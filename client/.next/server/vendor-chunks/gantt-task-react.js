"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/gantt-task-react";
exports.ids = ["vendor-chunks/gantt-task-react"];
exports.modules = {

/***/ "(ssr)/./node_modules/gantt-task-react/dist/index.modern.js":
/*!************************************************************!*\
  !*** ./node_modules/gantt-task-react/dist/index.modern.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Gantt: () => (/* binding */ Gantt),\n/* harmony export */   ViewMode: () => (/* binding */ ViewMode)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar ViewMode;\n\n(function (ViewMode) {\n  ViewMode[\"Hour\"] = \"Hour\";\n  ViewMode[\"QuarterDay\"] = \"Quarter Day\";\n  ViewMode[\"HalfDay\"] = \"Half Day\";\n  ViewMode[\"Day\"] = \"Day\";\n  ViewMode[\"Week\"] = \"Week\";\n  ViewMode[\"Month\"] = \"Month\";\n  ViewMode[\"Year\"] = \"Year\";\n})(ViewMode || (ViewMode = {}));\n\nvar intlDTCache = {};\nvar getCachedDateTimeFormat = function getCachedDateTimeFormat(locString, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  var key = JSON.stringify([locString, opts]);\n  var dtf = intlDTCache[key];\n\n  if (!dtf) {\n    dtf = new Intl.DateTimeFormat(locString, opts);\n    intlDTCache[key] = dtf;\n  }\n\n  return dtf;\n};\nvar addToDate = function addToDate(date, quantity, scale) {\n  var newDate = new Date(date.getFullYear() + (scale === \"year\" ? quantity : 0), date.getMonth() + (scale === \"month\" ? quantity : 0), date.getDate() + (scale === \"day\" ? quantity : 0), date.getHours() + (scale === \"hour\" ? quantity : 0), date.getMinutes() + (scale === \"minute\" ? quantity : 0), date.getSeconds() + (scale === \"second\" ? quantity : 0), date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0));\n  return newDate;\n};\nvar startOfDate = function startOfDate(date, scale) {\n  var scores = [\"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"month\", \"year\"];\n\n  var shouldReset = function shouldReset(_scale) {\n    var maxScore = scores.indexOf(scale);\n    return scores.indexOf(_scale) <= maxScore;\n  };\n\n  var newDate = new Date(date.getFullYear(), shouldReset(\"year\") ? 0 : date.getMonth(), shouldReset(\"month\") ? 1 : date.getDate(), shouldReset(\"day\") ? 0 : date.getHours(), shouldReset(\"hour\") ? 0 : date.getMinutes(), shouldReset(\"minute\") ? 0 : date.getSeconds(), shouldReset(\"second\") ? 0 : date.getMilliseconds());\n  return newDate;\n};\nvar ganttDateRange = function ganttDateRange(tasks, viewMode, preStepsCount) {\n  var newStartDate = tasks[0].start;\n  var newEndDate = tasks[0].start;\n\n  for (var _iterator = _createForOfIteratorHelperLoose(tasks), _step; !(_step = _iterator()).done;) {\n    var task = _step.value;\n\n    if (task.start < newStartDate) {\n      newStartDate = task.start;\n    }\n\n    if (task.end > newEndDate) {\n      newEndDate = task.end;\n    }\n  }\n\n  switch (viewMode) {\n    case ViewMode.Year:\n      newStartDate = addToDate(newStartDate, -1, \"year\");\n      newStartDate = startOfDate(newStartDate, \"year\");\n      newEndDate = addToDate(newEndDate, 1, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n\n    case ViewMode.Month:\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"month\");\n      newStartDate = startOfDate(newStartDate, \"month\");\n      newEndDate = addToDate(newEndDate, 1, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n\n    case ViewMode.Week:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(getMonday(newStartDate), -7 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\n      break;\n\n    case ViewMode.Day:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 19, \"day\");\n      break;\n\n    case ViewMode.QuarterDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 66, \"hour\");\n      break;\n\n    case ViewMode.HalfDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 108, \"hour\");\n      break;\n\n    case ViewMode.Hour:\n      newStartDate = startOfDate(newStartDate, \"hour\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"hour\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 1, \"day\");\n      break;\n  }\n\n  return [newStartDate, newEndDate];\n};\nvar seedDates = function seedDates(startDate, endDate, viewMode) {\n  var currentDate = new Date(startDate);\n  var dates = [currentDate];\n\n  while (currentDate < endDate) {\n    switch (viewMode) {\n      case ViewMode.Year:\n        currentDate = addToDate(currentDate, 1, \"year\");\n        break;\n\n      case ViewMode.Month:\n        currentDate = addToDate(currentDate, 1, \"month\");\n        break;\n\n      case ViewMode.Week:\n        currentDate = addToDate(currentDate, 7, \"day\");\n        break;\n\n      case ViewMode.Day:\n        currentDate = addToDate(currentDate, 1, \"day\");\n        break;\n\n      case ViewMode.HalfDay:\n        currentDate = addToDate(currentDate, 12, \"hour\");\n        break;\n\n      case ViewMode.QuarterDay:\n        currentDate = addToDate(currentDate, 6, \"hour\");\n        break;\n\n      case ViewMode.Hour:\n        currentDate = addToDate(currentDate, 1, \"hour\");\n        break;\n    }\n\n    dates.push(currentDate);\n  }\n\n  return dates;\n};\nvar getLocaleMonth = function getLocaleMonth(date, locale) {\n  var bottomValue = getCachedDateTimeFormat(locale, {\n    month: \"long\"\n  }).format(date);\n  bottomValue = bottomValue.replace(bottomValue[0], bottomValue[0].toLocaleUpperCase());\n  return bottomValue;\n};\nvar getLocalDayOfWeek = function getLocalDayOfWeek(date, locale, format) {\n  var bottomValue = getCachedDateTimeFormat(locale, {\n    weekday: format\n  }).format(date);\n  bottomValue = bottomValue.replace(bottomValue[0], bottomValue[0].toLocaleUpperCase());\n  return bottomValue;\n};\n\nvar getMonday = function getMonday(date) {\n  var day = date.getDay();\n  var diff = date.getDate() - day + (day === 0 ? -6 : 1);\n  return new Date(date.setDate(diff));\n};\n\nvar getWeekNumberISO8601 = function getWeekNumberISO8601(date) {\n  var tmpDate = new Date(date.valueOf());\n  var dayNumber = (tmpDate.getDay() + 6) % 7;\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\n  var firstThursday = tmpDate.valueOf();\n  tmpDate.setMonth(0, 1);\n\n  if (tmpDate.getDay() !== 4) {\n    tmpDate.setMonth(0, 1 + (4 - tmpDate.getDay() + 7) % 7);\n  }\n\n  var weekNumber = (1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)).toString();\n\n  if (weekNumber.length === 1) {\n    return \"0\" + weekNumber;\n  } else {\n    return weekNumber;\n  }\n};\nvar getDaysInMonth = function getDaysInMonth(month, year) {\n  return new Date(year, month + 1, 0).getDate();\n};\n\nvar styles = {\"ganttTable\":\"_3_ygE\",\"ganttTable_Header\":\"_1nBOt\",\"ganttTable_HeaderSeparator\":\"_2eZzQ\",\"ganttTable_HeaderItem\":\"_WuQ0f\"};\n\nvar TaskListHeaderDefault = function TaskListHeaderDefault(_ref) {\n  var headerHeight = _ref.headerHeight,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize,\n      rowWidth = _ref.rowWidth;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable,\n    style: {\n      fontFamily: fontFamily,\n      fontSize: fontSize\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_Header,\n    style: {\n      height: headerHeight - 2\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderItem,\n    style: {\n      minWidth: rowWidth\n    }\n  }, \"\\xA0Name\"), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderSeparator,\n    style: {\n      height: headerHeight * 0.5,\n      marginTop: headerHeight * 0.2\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderItem,\n    style: {\n      minWidth: rowWidth\n    }\n  }, \"\\xA0From\"), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderSeparator,\n    style: {\n      height: headerHeight * 0.5,\n      marginTop: headerHeight * 0.25\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderItem,\n    style: {\n      minWidth: rowWidth\n    }\n  }, \"\\xA0To\")));\n};\n\nvar styles$1 = {\"taskListWrapper\":\"_3ZbQT\",\"taskListTableRow\":\"_34SS0\",\"taskListCell\":\"_3lLk3\",\"taskListNameWrapper\":\"_nI1Xw\",\"taskListExpander\":\"_2QjE6\",\"taskListEmptyExpander\":\"_2TfEi\"};\n\nvar localeDateStringCache = {};\n\nvar toLocaleDateStringFactory = function toLocaleDateStringFactory(locale) {\n  return function (date, dateTimeOptions) {\n    var key = date.toString();\n    var lds = localeDateStringCache[key];\n\n    if (!lds) {\n      lds = date.toLocaleDateString(locale, dateTimeOptions);\n      localeDateStringCache[key] = lds;\n    }\n\n    return lds;\n  };\n};\n\nvar dateTimeOptions = {\n  weekday: \"short\",\n  year: \"numeric\",\n  month: \"long\",\n  day: \"numeric\"\n};\nvar TaskListTableDefault = function TaskListTableDefault(_ref) {\n  var rowHeight = _ref.rowHeight,\n      rowWidth = _ref.rowWidth,\n      tasks = _ref.tasks,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize,\n      locale = _ref.locale,\n      onExpanderClick = _ref.onExpanderClick;\n  var toLocaleDateString = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return toLocaleDateStringFactory(locale);\n  }, [locale]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles$1.taskListWrapper,\n    style: {\n      fontFamily: fontFamily,\n      fontSize: fontSize\n    }\n  }, tasks.map(function (t) {\n    var expanderSymbol = \"\";\n\n    if (t.hideChildren === false) {\n      expanderSymbol = \"▼\";\n    } else if (t.hideChildren === true) {\n      expanderSymbol = \"▶\";\n    }\n\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListTableRow,\n      style: {\n        height: rowHeight\n      },\n      key: t.id + \"row\"\n    }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListCell,\n      style: {\n        minWidth: rowWidth,\n        maxWidth: rowWidth\n      },\n      title: t.name\n    }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListNameWrapper\n    }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: expanderSymbol ? styles$1.taskListExpander : styles$1.taskListEmptyExpander,\n      onClick: function onClick() {\n        return onExpanderClick(t);\n      }\n    }, expanderSymbol), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, t.name))), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListCell,\n      style: {\n        minWidth: rowWidth,\n        maxWidth: rowWidth\n      }\n    }, \"\\xA0\", toLocaleDateString(t.start, dateTimeOptions)), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListCell,\n      style: {\n        minWidth: rowWidth,\n        maxWidth: rowWidth\n      }\n    }, \"\\xA0\", toLocaleDateString(t.end, dateTimeOptions)));\n  }));\n};\n\nvar styles$2 = {\"tooltipDefaultContainer\":\"_3T42e\",\"tooltipDefaultContainerParagraph\":\"_29NTg\",\"tooltipDetailsContainer\":\"_25P-K\",\"tooltipDetailsContainerHidden\":\"_3gVAq\"};\n\nvar Tooltip = function Tooltip(_ref) {\n  var task = _ref.task,\n      rowHeight = _ref.rowHeight,\n      rtl = _ref.rtl,\n      svgContainerHeight = _ref.svgContainerHeight,\n      svgContainerWidth = _ref.svgContainerWidth,\n      scrollX = _ref.scrollX,\n      scrollY = _ref.scrollY,\n      arrowIndent = _ref.arrowIndent,\n      fontSize = _ref.fontSize,\n      fontFamily = _ref.fontFamily,\n      headerHeight = _ref.headerHeight,\n      taskListWidth = _ref.taskListWidth,\n      TooltipContent = _ref.TooltipContent;\n  var tooltipRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      relatedY = _useState[0],\n      setRelatedY = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      relatedX = _useState2[0],\n      setRelatedX = _useState2[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (tooltipRef.current) {\n      var tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\n      var tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\n      var newRelatedY = task.index * rowHeight - scrollY + headerHeight;\n      var newRelatedX;\n\n      if (rtl) {\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\n\n        if (newRelatedX < 0) {\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\n        }\n\n        var tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n\n        if (tooltipLeftmostPoint > svgContainerWidth) {\n          newRelatedX = svgContainerWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      } else {\n        newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\n\n        var _tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n\n        var fullChartWidth = taskListWidth + svgContainerWidth;\n\n        if (_tooltipLeftmostPoint > fullChartWidth) {\n          newRelatedX = task.x1 + taskListWidth - arrowIndent * 1.5 - scrollX - tooltipWidth;\n        }\n\n        if (newRelatedX < taskListWidth) {\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      }\n\n      var tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\n\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\n        newRelatedY = svgContainerHeight - tooltipHeight;\n      }\n\n      setRelatedY(newRelatedY);\n      setRelatedX(newRelatedX);\n    }\n  }, [tooltipRef, task, arrowIndent, scrollX, scrollY, headerHeight, taskListWidth, rowHeight, svgContainerHeight, svgContainerWidth, rtl]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: tooltipRef,\n    className: relatedX ? styles$2.tooltipDetailsContainer : styles$2.tooltipDetailsContainerHidden,\n    style: {\n      left: relatedX,\n      top: relatedY\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TooltipContent, {\n    task: task,\n    fontSize: fontSize,\n    fontFamily: fontFamily\n  }));\n};\nvar StandardTooltipContent = function StandardTooltipContent(_ref2) {\n  var task = _ref2.task,\n      fontSize = _ref2.fontSize,\n      fontFamily = _ref2.fontFamily;\n  var style = {\n    fontSize: fontSize,\n    fontFamily: fontFamily\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles$2.tooltipDefaultContainer,\n    style: style\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"b\", {\n    style: {\n      fontSize: fontSize + 6\n    }\n  }, task.name + \": \" + task.start.getDate() + \"-\" + (task.start.getMonth() + 1) + \"-\" + task.start.getFullYear() + \" - \" + task.end.getDate() + \"-\" + (task.end.getMonth() + 1) + \"-\" + task.end.getFullYear()), task.end.getTime() - task.start.getTime() !== 0 && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: styles$2.tooltipDefaultContainerParagraph\n  }, \"Duration: \" + ~~((task.end.getTime() - task.start.getTime()) / (1000 * 60 * 60 * 24)) + \" day(s)\"), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: styles$2.tooltipDefaultContainerParagraph\n  }, !!task.progress && \"Progress: \" + task.progress + \" %\"));\n};\n\nvar styles$3 = {\"scroll\":\"_1eT-t\"};\n\nvar VerticalScroll = function VerticalScroll(_ref) {\n  var scroll = _ref.scroll,\n      ganttHeight = _ref.ganttHeight,\n      ganttFullHeight = _ref.ganttFullHeight,\n      headerHeight = _ref.headerHeight,\n      rtl = _ref.rtl,\n      onScroll = _ref.onScroll;\n  var scrollRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scroll;\n    }\n  }, [scroll]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    style: {\n      height: ganttHeight,\n      marginTop: headerHeight,\n      marginLeft: rtl ? \"\" : \"-1rem\"\n    },\n    className: styles$3.scroll,\n    onScroll: onScroll,\n    ref: scrollRef\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    style: {\n      height: ganttFullHeight,\n      width: 1\n    }\n  }));\n};\n\nvar TaskList = function TaskList(_ref) {\n  var headerHeight = _ref.headerHeight,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize,\n      rowWidth = _ref.rowWidth,\n      rowHeight = _ref.rowHeight,\n      scrollY = _ref.scrollY,\n      tasks = _ref.tasks,\n      selectedTask = _ref.selectedTask,\n      setSelectedTask = _ref.setSelectedTask,\n      onExpanderClick = _ref.onExpanderClick,\n      locale = _ref.locale,\n      ganttHeight = _ref.ganttHeight,\n      taskListRef = _ref.taskListRef,\n      horizontalContainerClass = _ref.horizontalContainerClass,\n      TaskListHeader = _ref.TaskListHeader,\n      TaskListTable = _ref.TaskListTable;\n  var horizontalContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n  var headerProps = {\n    headerHeight: headerHeight,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    rowWidth: rowWidth\n  };\n  var selectedTaskId = selectedTask ? selectedTask.id : \"\";\n  var tableProps = {\n    rowHeight: rowHeight,\n    rowWidth: rowWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    tasks: tasks,\n    locale: locale,\n    selectedTaskId: selectedTaskId,\n    setSelectedTask: setSelectedTask,\n    onExpanderClick: onExpanderClick\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: taskListRef\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskListHeader, Object.assign({}, headerProps)), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: horizontalContainerRef,\n    className: horizontalContainerClass,\n    style: ganttHeight ? {\n      height: ganttHeight\n    } : {}\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskListTable, Object.assign({}, tableProps))));\n};\n\nvar styles$4 = {\"gridRow\":\"_2dZTy\",\"gridRowLine\":\"_3rUKi\",\"gridTick\":\"_RuwuK\"};\n\nvar GridBody = function GridBody(_ref) {\n  var tasks = _ref.tasks,\n      dates = _ref.dates,\n      rowHeight = _ref.rowHeight,\n      svgWidth = _ref.svgWidth,\n      columnWidth = _ref.columnWidth,\n      todayColor = _ref.todayColor,\n      rtl = _ref.rtl;\n  var y = 0;\n  var gridRows = [];\n  var rowLines = [react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"line\", {\n    key: \"RowLineFirst\",\n    x: \"0\",\n    y1: 0,\n    x2: svgWidth,\n    y2: 0,\n    className: styles$4.gridRowLine\n  })];\n\n  for (var _iterator = _createForOfIteratorHelperLoose(tasks), _step; !(_step = _iterator()).done;) {\n    var task = _step.value;\n    gridRows.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n      key: \"Row\" + task.id,\n      x: \"0\",\n      y: y,\n      width: svgWidth,\n      height: rowHeight,\n      className: styles$4.gridRow\n    }));\n    rowLines.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"line\", {\n      key: \"RowLine\" + task.id,\n      x: \"0\",\n      y1: y + rowHeight,\n      x2: svgWidth,\n      y2: y + rowHeight,\n      className: styles$4.gridRowLine\n    }));\n    y += rowHeight;\n  }\n\n  var now = new Date();\n  var tickX = 0;\n  var ticks = [];\n  var today = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", null);\n\n  for (var i = 0; i < dates.length; i++) {\n    var date = dates[i];\n    ticks.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"line\", {\n      key: date.getTime(),\n      x1: tickX,\n      y1: 0,\n      x2: tickX,\n      y2: y,\n      className: styles$4.gridTick\n    }));\n\n    if (i + 1 !== dates.length && date.getTime() < now.getTime() && dates[i + 1].getTime() >= now.getTime() || i !== 0 && i + 1 === dates.length && date.getTime() < now.getTime() && addToDate(date, date.getTime() - dates[i - 1].getTime(), \"millisecond\").getTime() >= now.getTime()) {\n      today = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n        x: tickX,\n        y: 0,\n        width: columnWidth,\n        height: y,\n        fill: todayColor\n      });\n    }\n\n    if (rtl && i + 1 !== dates.length && date.getTime() >= now.getTime() && dates[i + 1].getTime() < now.getTime()) {\n      today = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n        x: tickX + columnWidth,\n        y: 0,\n        width: columnWidth,\n        height: y,\n        fill: todayColor\n      });\n    }\n\n    tickX += columnWidth;\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"gridBody\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"rows\"\n  }, gridRows), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"rowLines\"\n  }, rowLines), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"ticks\"\n  }, ticks), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"today\"\n  }, today));\n};\n\nvar Grid = function Grid(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"grid\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(GridBody, Object.assign({}, props)));\n};\n\nvar styles$5 = {\"calendarBottomText\":\"_9w8d5\",\"calendarTopTick\":\"_1rLuZ\",\"calendarTopText\":\"_2q1Kt\",\"calendarHeader\":\"_35nLX\"};\n\nvar TopPartOfCalendar = function TopPartOfCalendar(_ref) {\n  var value = _ref.value,\n      x1Line = _ref.x1Line,\n      y1Line = _ref.y1Line,\n      y2Line = _ref.y2Line,\n      xText = _ref.xText,\n      yText = _ref.yText;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"calendarTop\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"line\", {\n    x1: x1Line,\n    y1: y1Line,\n    x2: x1Line,\n    y2: y2Line,\n    className: styles$5.calendarTopTick,\n    key: value + \"line\"\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n    key: value + \"text\",\n    y: yText,\n    x: xText,\n    className: styles$5.calendarTopText\n  }, value));\n};\n\nvar Calendar = function Calendar(_ref) {\n  var dateSetup = _ref.dateSetup,\n      locale = _ref.locale,\n      viewMode = _ref.viewMode,\n      rtl = _ref.rtl,\n      headerHeight = _ref.headerHeight,\n      columnWidth = _ref.columnWidth,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize;\n\n  var getCalendarValuesForYear = function getCalendarValuesForYear() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n\n    for (var i = 0; i < dateSetup.dates.length; i++) {\n      var date = dateSetup.dates[i];\n      var bottomValue = date.getFullYear();\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getFullYear(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n\n      if (i === 0 || date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()) {\n        var topValue = date.getFullYear().toString();\n        var xText = void 0;\n\n        if (rtl) {\n          xText = (6 + i + date.getFullYear() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getFullYear()) * columnWidth;\n        }\n\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue,\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: headerHeight,\n          xText: xText,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForMonth = function getCalendarValuesForMonth() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n\n    for (var i = 0; i < dateSetup.dates.length; i++) {\n      var date = dateSetup.dates[i];\n      var bottomValue = getLocaleMonth(date, locale);\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: bottomValue + date.getFullYear(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n\n      if (i === 0 || date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()) {\n        var topValue = date.getFullYear().toString();\n        var xText = void 0;\n\n        if (rtl) {\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getMonth()) * columnWidth;\n        }\n\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue,\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: xText,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForWeek = function getCalendarValuesForWeek() {\n    var topValues = [];\n    var bottomValues = [];\n    var weeksCount = 1;\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n\n    for (var i = dates.length - 1; i >= 0; i--) {\n      var date = dates[i];\n      var topValue = \"\";\n\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\n        topValue = getLocaleMonth(date, locale) + \", \" + date.getFullYear();\n      }\n\n      var bottomValue = \"W\" + getWeekNumberISO8601(date);\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * (i + +rtl),\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n\n      if (topValue) {\n        if (i !== dates.length - 1) {\n          topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n            key: topValue,\n            value: topValue,\n            x1Line: columnWidth * i + weeksCount * columnWidth,\n            y1Line: 0,\n            y2Line: topDefaultHeight,\n            xText: columnWidth * i + columnWidth * weeksCount * 0.5,\n            yText: topDefaultHeight * 0.9\n          }));\n        }\n\n        weeksCount = 0;\n      }\n\n      weeksCount++;\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForDay = function getCalendarValuesForDay() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n\n    for (var i = 0; i < dates.length; i++) {\n      var date = dates[i];\n      var bottomValue = getLocalDayOfWeek(date, locale, \"short\") + \", \" + date.getDate().toString();\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n\n      if (i + 1 !== dates.length && date.getMonth() !== dates[i + 1].getMonth()) {\n        var topValue = getLocaleMonth(date, locale);\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue + date.getFullYear(),\n          value: topValue,\n          x1Line: columnWidth * (i + 1),\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: columnWidth * (i + 1) - getDaysInMonth(date.getMonth(), date.getFullYear()) * columnWidth * 0.5,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForPartOfDay = function getCalendarValuesForPartOfDay() {\n    var topValues = [];\n    var bottomValues = [];\n    var ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n\n    for (var i = 0; i < dates.length; i++) {\n      var date = dates[i];\n      var bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\"\n      }).format(date);\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * (i + +rtl),\n        className: styles$5.calendarBottomText,\n        fontFamily: fontFamily\n      }, bottomValue));\n\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\n        var topValue = getLocalDayOfWeek(date, locale, \"short\") + \", \" + date.getDate() + \" \" + getLocaleMonth(date, locale);\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue + date.getFullYear(),\n          value: topValue,\n          x1Line: columnWidth * i + ticks * columnWidth,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: columnWidth * i + ticks * columnWidth * 0.5,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForHour = function getCalendarValuesForHour() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n\n    for (var i = 0; i < dates.length; i++) {\n      var date = dates[i];\n      var bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\"\n      }).format(date);\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * (i + +rtl),\n        className: styles$5.calendarBottomText,\n        fontFamily: fontFamily\n      }, bottomValue));\n\n      if (i !== 0 && date.getDate() !== dates[i - 1].getDate()) {\n        var displayDate = dates[i - 1];\n        var topValue = getLocalDayOfWeek(displayDate, locale, \"long\") + \", \" + displayDate.getDate() + \" \" + getLocaleMonth(displayDate, locale);\n        var topPosition = (date.getHours() - 24) / 2;\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue + displayDate.getFullYear(),\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: columnWidth * (i + topPosition),\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var topValues = [];\n  var bottomValues = [];\n\n  switch (dateSetup.viewMode) {\n    case ViewMode.Year:\n      var _getCalendarValuesFor = getCalendarValuesForYear();\n\n      topValues = _getCalendarValuesFor[0];\n      bottomValues = _getCalendarValuesFor[1];\n      break;\n\n    case ViewMode.Month:\n      var _getCalendarValuesFor2 = getCalendarValuesForMonth();\n\n      topValues = _getCalendarValuesFor2[0];\n      bottomValues = _getCalendarValuesFor2[1];\n      break;\n\n    case ViewMode.Week:\n      var _getCalendarValuesFor3 = getCalendarValuesForWeek();\n\n      topValues = _getCalendarValuesFor3[0];\n      bottomValues = _getCalendarValuesFor3[1];\n      break;\n\n    case ViewMode.Day:\n      var _getCalendarValuesFor4 = getCalendarValuesForDay();\n\n      topValues = _getCalendarValuesFor4[0];\n      bottomValues = _getCalendarValuesFor4[1];\n      break;\n\n    case ViewMode.QuarterDay:\n    case ViewMode.HalfDay:\n      var _getCalendarValuesFor5 = getCalendarValuesForPartOfDay();\n\n      topValues = _getCalendarValuesFor5[0];\n      bottomValues = _getCalendarValuesFor5[1];\n      break;\n\n    case ViewMode.Hour:\n      var _getCalendarValuesFor6 = getCalendarValuesForHour();\n\n      topValues = _getCalendarValuesFor6[0];\n      bottomValues = _getCalendarValuesFor6[1];\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"calendar\",\n    fontSize: fontSize,\n    fontFamily: fontFamily\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: 0,\n    y: 0,\n    width: columnWidth * dateSetup.dates.length,\n    height: headerHeight,\n    className: styles$5.calendarHeader\n  }), bottomValues, \" \", topValues);\n};\n\n// A type of promise-like that resolves synchronously and supports only one observer\n\nconst _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\nconst _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously call a function and send errors to recovery continuation\nfunction _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\nvar Arrow = function Arrow(_ref) {\n  var taskFrom = _ref.taskFrom,\n      taskTo = _ref.taskTo,\n      rowHeight = _ref.rowHeight,\n      taskHeight = _ref.taskHeight,\n      arrowIndent = _ref.arrowIndent,\n      rtl = _ref.rtl;\n  var path;\n  var trianglePoints;\n\n  if (rtl) {\n    var _drownPathAndTriangle = drownPathAndTriangleRTL(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent);\n\n    path = _drownPathAndTriangle[0];\n    trianglePoints = _drownPathAndTriangle[1];\n  } else {\n    var _drownPathAndTriangle2 = drownPathAndTriangle(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent);\n\n    path = _drownPathAndTriangle2[0];\n    trianglePoints = _drownPathAndTriangle2[1];\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"arrow\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", {\n    strokeWidth: \"1.5\",\n    d: path,\n    fill: \"none\"\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"polygon\", {\n    points: trianglePoints\n  }));\n};\n\nvar drownPathAndTriangle = function drownPathAndTriangle(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent) {\n  var indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  var taskToEndPosition = taskTo.y + taskHeight / 2;\n  var taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\n  var taskFromHorizontalOffsetValue = taskFromEndPosition < taskTo.x1 ? \"\" : \"H \" + (taskTo.x1 - arrowIndent);\n  var taskToHorizontalOffsetValue = taskFromEndPosition > taskTo.x1 ? arrowIndent : taskTo.x1 - taskFrom.x2 - arrowIndent;\n  var path = \"M \" + taskFrom.x2 + \" \" + (taskFrom.y + taskHeight / 2) + \" \\n  h \" + arrowIndent + \" \\n  v \" + indexCompare * rowHeight / 2 + \" \\n  \" + taskFromHorizontalOffsetValue + \"\\n  V \" + taskToEndPosition + \" \\n  h \" + taskToHorizontalOffsetValue;\n  var trianglePoints = taskTo.x1 + \",\" + taskToEndPosition + \" \\n  \" + (taskTo.x1 - 5) + \",\" + (taskToEndPosition - 5) + \" \\n  \" + (taskTo.x1 - 5) + \",\" + (taskToEndPosition + 5);\n  return [path, trianglePoints];\n};\n\nvar drownPathAndTriangleRTL = function drownPathAndTriangleRTL(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent) {\n  var indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  var taskToEndPosition = taskTo.y + taskHeight / 2;\n  var taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\n  var taskFromHorizontalOffsetValue = taskFromEndPosition > taskTo.x2 ? \"\" : \"H \" + (taskTo.x2 + arrowIndent);\n  var taskToHorizontalOffsetValue = taskFromEndPosition < taskTo.x2 ? -arrowIndent : taskTo.x2 - taskFrom.x1 + arrowIndent;\n  var path = \"M \" + taskFrom.x1 + \" \" + (taskFrom.y + taskHeight / 2) + \" \\n  h \" + -arrowIndent + \" \\n  v \" + indexCompare * rowHeight / 2 + \" \\n  \" + taskFromHorizontalOffsetValue + \"\\n  V \" + taskToEndPosition + \" \\n  h \" + taskToHorizontalOffsetValue;\n  var trianglePoints = taskTo.x2 + \",\" + taskToEndPosition + \" \\n  \" + (taskTo.x2 + 5) + \",\" + (taskToEndPosition + 5) + \" \\n  \" + (taskTo.x2 + 5) + \",\" + (taskToEndPosition - 5);\n  return [path, trianglePoints];\n};\n\nvar convertToBarTasks = function convertToBarTasks(tasks, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor) {\n  var barTasks = tasks.map(function (t, i) {\n    return convertToBarTask(t, i, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor);\n  });\n  barTasks = barTasks.map(function (task) {\n    var dependencies = task.dependencies || [];\n\n    var _loop = function _loop(j) {\n      var dependence = barTasks.findIndex(function (value) {\n        return value.id === dependencies[j];\n      });\n      if (dependence !== -1) barTasks[dependence].barChildren.push(task);\n    };\n\n    for (var j = 0; j < dependencies.length; j++) {\n      _loop(j);\n    }\n\n    return task;\n  });\n  return barTasks;\n};\n\nvar convertToBarTask = function convertToBarTask(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor) {\n  var barTask;\n\n  switch (task.type) {\n    case \"milestone\":\n      barTask = convertToMilestone(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, milestoneBackgroundColor, milestoneBackgroundSelectedColor);\n      break;\n\n    case \"project\":\n      barTask = convertToBar(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor);\n      break;\n\n    default:\n      barTask = convertToBar(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor);\n      break;\n  }\n\n  return barTask;\n};\n\nvar convertToBar = function convertToBar(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor) {\n  var x1;\n  var x2;\n\n  if (rtl) {\n    x2 = taskXCoordinateRTL(task.start, dates, columnWidth);\n    x1 = taskXCoordinateRTL(task.end, dates, columnWidth);\n  } else {\n    x1 = taskXCoordinate(task.start, dates, columnWidth);\n    x2 = taskXCoordinate(task.end, dates, columnWidth);\n  }\n\n  var typeInternal = task.type;\n\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\n    typeInternal = \"smalltask\";\n    x2 = x1 + handleWidth * 2;\n  }\n\n  var _progressWithByParams = progressWithByParams(x1, x2, task.progress, rtl),\n      progressWidth = _progressWithByParams[0],\n      progressX = _progressWithByParams[1];\n\n  var y = taskYCoordinate(index, rowHeight, taskHeight);\n  var hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\n\n  var styles = _extends({\n    backgroundColor: barBackgroundColor,\n    backgroundSelectedColor: barBackgroundSelectedColor,\n    progressColor: barProgressColor,\n    progressSelectedColor: barProgressSelectedColor\n  }, task.styles);\n\n  return _extends({}, task, {\n    typeInternal: typeInternal,\n    x1: x1,\n    x2: x2,\n    y: y,\n    index: index,\n    progressX: progressX,\n    progressWidth: progressWidth,\n    barCornerRadius: barCornerRadius,\n    handleWidth: handleWidth,\n    hideChildren: hideChildren,\n    height: taskHeight,\n    barChildren: [],\n    styles: styles\n  });\n};\n\nvar convertToMilestone = function convertToMilestone(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, milestoneBackgroundColor, milestoneBackgroundSelectedColor) {\n  var x = taskXCoordinate(task.start, dates, columnWidth);\n  var y = taskYCoordinate(index, rowHeight, taskHeight);\n  var x1 = x - taskHeight * 0.5;\n  var x2 = x + taskHeight * 0.5;\n  var rotatedHeight = taskHeight / 1.414;\n\n  var styles = _extends({\n    backgroundColor: milestoneBackgroundColor,\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\n    progressColor: \"\",\n    progressSelectedColor: \"\"\n  }, task.styles);\n\n  return _extends({}, task, {\n    end: task.start,\n    x1: x1,\n    x2: x2,\n    y: y,\n    index: index,\n    progressX: 0,\n    progressWidth: 0,\n    barCornerRadius: barCornerRadius,\n    handleWidth: handleWidth,\n    typeInternal: task.type,\n    progress: 0,\n    height: rotatedHeight,\n    hideChildren: undefined,\n    barChildren: [],\n    styles: styles\n  });\n};\n\nvar taskXCoordinate = function taskXCoordinate(xDate, dates, columnWidth) {\n  var index = dates.findIndex(function (d) {\n    return d.getTime() >= xDate.getTime();\n  }) - 1;\n  var remainderMillis = xDate.getTime() - dates[index].getTime();\n  var percentOfInterval = remainderMillis / (dates[index + 1].getTime() - dates[index].getTime());\n  var x = index * columnWidth + percentOfInterval * columnWidth;\n  return x;\n};\n\nvar taskXCoordinateRTL = function taskXCoordinateRTL(xDate, dates, columnWidth) {\n  var x = taskXCoordinate(xDate, dates, columnWidth);\n  x += columnWidth;\n  return x;\n};\n\nvar taskYCoordinate = function taskYCoordinate(index, rowHeight, taskHeight) {\n  var y = index * rowHeight + (rowHeight - taskHeight) / 2;\n  return y;\n};\n\nvar progressWithByParams = function progressWithByParams(taskX1, taskX2, progress, rtl) {\n  var progressWidth = (taskX2 - taskX1) * progress * 0.01;\n  var progressX;\n\n  if (rtl) {\n    progressX = taskX2 - progressWidth;\n  } else {\n    progressX = taskX1;\n  }\n\n  return [progressWidth, progressX];\n};\n\nvar progressByX = function progressByX(x, task) {\n  if (x >= task.x2) return 100;else if (x <= task.x1) return 0;else {\n    var barWidth = task.x2 - task.x1;\n    var progressPercent = Math.round((x - task.x1) * 100 / barWidth);\n    return progressPercent;\n  }\n};\n\nvar progressByXRTL = function progressByXRTL(x, task) {\n  if (x >= task.x2) return 0;else if (x <= task.x1) return 100;else {\n    var barWidth = task.x2 - task.x1;\n    var progressPercent = Math.round((task.x2 - x) * 100 / barWidth);\n    return progressPercent;\n  }\n};\n\nvar getProgressPoint = function getProgressPoint(progressX, taskY, taskHeight) {\n  var point = [progressX - 5, taskY + taskHeight, progressX + 5, taskY + taskHeight, progressX, taskY + taskHeight - 8.66];\n  return point.join(\",\");\n};\n\nvar startByX = function startByX(x, xStep, task) {\n  if (x >= task.x2 - task.handleWidth * 2) {\n    x = task.x2 - task.handleWidth * 2;\n  }\n\n  var steps = Math.round((x - task.x1) / xStep);\n  var additionalXValue = steps * xStep;\n  var newX = task.x1 + additionalXValue;\n  return newX;\n};\n\nvar endByX = function endByX(x, xStep, task) {\n  if (x <= task.x1 + task.handleWidth * 2) {\n    x = task.x1 + task.handleWidth * 2;\n  }\n\n  var steps = Math.round((x - task.x2) / xStep);\n  var additionalXValue = steps * xStep;\n  var newX = task.x2 + additionalXValue;\n  return newX;\n};\n\nvar moveByX = function moveByX(x, xStep, task) {\n  var steps = Math.round((x - task.x1) / xStep);\n  var additionalXValue = steps * xStep;\n  var newX1 = task.x1 + additionalXValue;\n  var newX2 = newX1 + task.x2 - task.x1;\n  return [newX1, newX2];\n};\n\nvar dateByX = function dateByX(x, taskX, taskDate, xStep, timeStep) {\n  var newDate = new Date((x - taskX) / xStep * timeStep + taskDate.getTime());\n  newDate = new Date(newDate.getTime() + (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000);\n  return newDate;\n};\n\nvar handleTaskBySVGMouseEvent = function handleTaskBySVGMouseEvent(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta, rtl) {\n  var result;\n\n  switch (selectedTask.type) {\n    case \"milestone\":\n      result = handleTaskBySVGMouseEventForMilestone(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta);\n      break;\n\n    default:\n      result = handleTaskBySVGMouseEventForBar(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta, rtl);\n      break;\n  }\n\n  return result;\n};\n\nvar handleTaskBySVGMouseEventForBar = function handleTaskBySVGMouseEventForBar(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta, rtl) {\n  var changedTask = _extends({}, selectedTask);\n\n  var isChanged = false;\n\n  switch (action) {\n    case \"progress\":\n      if (rtl) {\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\n      } else {\n        changedTask.progress = progressByX(svgX, selectedTask);\n      }\n\n      isChanged = changedTask.progress !== selectedTask.progress;\n\n      if (isChanged) {\n        var _progressWithByParams2 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n            progressWidth = _progressWithByParams2[0],\n            progressX = _progressWithByParams2[1];\n\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n\n      break;\n\n    case \"start\":\n      {\n        var newX1 = startByX(svgX, xStep, selectedTask);\n        changedTask.x1 = newX1;\n        isChanged = changedTask.x1 !== selectedTask.x1;\n\n        if (isChanged) {\n          if (rtl) {\n            changedTask.end = dateByX(newX1, selectedTask.x1, selectedTask.end, xStep, timeStep);\n          } else {\n            changedTask.start = dateByX(newX1, selectedTask.x1, selectedTask.start, xStep, timeStep);\n          }\n\n          var _progressWithByParams3 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n              _progressWidth = _progressWithByParams3[0],\n              _progressX = _progressWithByParams3[1];\n\n          changedTask.progressWidth = _progressWidth;\n          changedTask.progressX = _progressX;\n        }\n\n        break;\n      }\n\n    case \"end\":\n      {\n        var newX2 = endByX(svgX, xStep, selectedTask);\n        changedTask.x2 = newX2;\n        isChanged = changedTask.x2 !== selectedTask.x2;\n\n        if (isChanged) {\n          if (rtl) {\n            changedTask.start = dateByX(newX2, selectedTask.x2, selectedTask.start, xStep, timeStep);\n          } else {\n            changedTask.end = dateByX(newX2, selectedTask.x2, selectedTask.end, xStep, timeStep);\n          }\n\n          var _progressWithByParams4 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n              _progressWidth2 = _progressWithByParams4[0],\n              _progressX2 = _progressWithByParams4[1];\n\n          changedTask.progressWidth = _progressWidth2;\n          changedTask.progressX = _progressX2;\n        }\n\n        break;\n      }\n\n    case \"move\":\n      {\n        var _moveByX = moveByX(svgX - initEventX1Delta, xStep, selectedTask),\n            newMoveX1 = _moveByX[0],\n            newMoveX2 = _moveByX[1];\n\n        isChanged = newMoveX1 !== selectedTask.x1;\n\n        if (isChanged) {\n          changedTask.start = dateByX(newMoveX1, selectedTask.x1, selectedTask.start, xStep, timeStep);\n          changedTask.end = dateByX(newMoveX2, selectedTask.x2, selectedTask.end, xStep, timeStep);\n          changedTask.x1 = newMoveX1;\n          changedTask.x2 = newMoveX2;\n\n          var _progressWithByParams5 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n              _progressWidth3 = _progressWithByParams5[0],\n              _progressX3 = _progressWithByParams5[1];\n\n          changedTask.progressWidth = _progressWidth3;\n          changedTask.progressX = _progressX3;\n        }\n\n        break;\n      }\n  }\n\n  return {\n    isChanged: isChanged,\n    changedTask: changedTask\n  };\n};\n\nvar handleTaskBySVGMouseEventForMilestone = function handleTaskBySVGMouseEventForMilestone(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta) {\n  var changedTask = _extends({}, selectedTask);\n\n  var isChanged = false;\n\n  switch (action) {\n    case \"move\":\n      {\n        var _moveByX2 = moveByX(svgX - initEventX1Delta, xStep, selectedTask),\n            newMoveX1 = _moveByX2[0],\n            newMoveX2 = _moveByX2[1];\n\n        isChanged = newMoveX1 !== selectedTask.x1;\n\n        if (isChanged) {\n          changedTask.start = dateByX(newMoveX1, selectedTask.x1, selectedTask.start, xStep, timeStep);\n          changedTask.end = changedTask.start;\n          changedTask.x1 = newMoveX1;\n          changedTask.x2 = newMoveX2;\n        }\n\n        break;\n      }\n  }\n\n  return {\n    isChanged: isChanged,\n    changedTask: changedTask\n  };\n};\n\nfunction isKeyboardEvent(event) {\n  return event.key !== undefined;\n}\nfunction removeHiddenTasks(tasks) {\n  var groupedTasks = tasks.filter(function (t) {\n    return t.hideChildren && t.type === \"project\";\n  });\n\n  if (groupedTasks.length > 0) {\n    var _loop = function _loop(i) {\n      var groupedTask = groupedTasks[i];\n      var children = getChildren(tasks, groupedTask);\n      tasks = tasks.filter(function (t) {\n        return children.indexOf(t) === -1;\n      });\n    };\n\n    for (var i = 0; groupedTasks.length > i; i++) {\n      _loop(i);\n    }\n  }\n\n  return tasks;\n}\n\nfunction getChildren(taskList, task) {\n  var tasks = [];\n\n  if (task.type !== \"project\") {\n    tasks = taskList.filter(function (t) {\n      return t.dependencies && t.dependencies.indexOf(task.id) !== -1;\n    });\n  } else {\n    tasks = taskList.filter(function (t) {\n      return t.project && t.project === task.id;\n    });\n  }\n\n  var taskChildren = [];\n  tasks.forEach(function (t) {\n    taskChildren.push.apply(taskChildren, getChildren(taskList, t));\n  });\n  tasks = tasks.concat(tasks, taskChildren);\n  return tasks;\n}\n\nvar sortTasks = function sortTasks(taskA, taskB) {\n  var orderA = taskA.displayOrder || Number.MAX_VALUE;\n  var orderB = taskB.displayOrder || Number.MAX_VALUE;\n\n  if (orderA > orderB) {\n    return 1;\n  } else if (orderA < orderB) {\n    return -1;\n  } else {\n    return 0;\n  }\n};\n\nvar styles$6 = {\"barWrapper\":\"_KxSXS\",\"barHandle\":\"_3w_5u\",\"barBackground\":\"_31ERP\"};\n\nvar BarDisplay = function BarDisplay(_ref) {\n  var x = _ref.x,\n      y = _ref.y,\n      width = _ref.width,\n      height = _ref.height,\n      isSelected = _ref.isSelected,\n      progressX = _ref.progressX,\n      progressWidth = _ref.progressWidth,\n      barCornerRadius = _ref.barCornerRadius,\n      styles = _ref.styles,\n      onMouseDown = _ref.onMouseDown;\n\n  var getProcessColor = function getProcessColor() {\n    return isSelected ? styles.progressSelectedColor : styles.progressColor;\n  };\n\n  var getBarColor = function getBarColor() {\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    onMouseDown: onMouseDown\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: x,\n    width: width,\n    y: y,\n    height: height,\n    ry: barCornerRadius,\n    rx: barCornerRadius,\n    fill: getBarColor(),\n    className: styles$6.barBackground\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: progressX,\n    width: progressWidth,\n    y: y,\n    height: height,\n    ry: barCornerRadius,\n    rx: barCornerRadius,\n    fill: getProcessColor()\n  }));\n};\n\nvar BarDateHandle = function BarDateHandle(_ref) {\n  var x = _ref.x,\n      y = _ref.y,\n      width = _ref.width,\n      height = _ref.height,\n      barCornerRadius = _ref.barCornerRadius,\n      onMouseDown = _ref.onMouseDown;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    className: styles$6.barHandle,\n    ry: barCornerRadius,\n    rx: barCornerRadius,\n    onMouseDown: onMouseDown\n  });\n};\n\nvar BarProgressHandle = function BarProgressHandle(_ref) {\n  var progressPoint = _ref.progressPoint,\n      onMouseDown = _ref.onMouseDown;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"polygon\", {\n    className: styles$6.barHandle,\n    points: progressPoint,\n    onMouseDown: onMouseDown\n  });\n};\n\nvar Bar = function Bar(_ref) {\n  var task = _ref.task,\n      isProgressChangeable = _ref.isProgressChangeable,\n      isDateChangeable = _ref.isDateChangeable,\n      rtl = _ref.rtl,\n      onEventStart = _ref.onEventStart,\n      isSelected = _ref.isSelected;\n  var progressPoint = getProgressPoint(+!rtl * task.progressWidth + task.progressX, task.y, task.height);\n  var handleHeight = task.height - 2;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: styles$6.barWrapper,\n    tabIndex: 0\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarDisplay, {\n    x: task.x1,\n    y: task.y,\n    width: task.x2 - task.x1,\n    height: task.height,\n    progressX: task.progressX,\n    progressWidth: task.progressWidth,\n    barCornerRadius: task.barCornerRadius,\n    styles: task.styles,\n    isSelected: isSelected,\n    onMouseDown: function onMouseDown(e) {\n      isDateChangeable && onEventStart(\"move\", task, e);\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"handleGroup\"\n  }, isDateChangeable && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarDateHandle, {\n    x: task.x1 + 1,\n    y: task.y + 1,\n    width: task.handleWidth,\n    height: handleHeight,\n    barCornerRadius: task.barCornerRadius,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"start\", task, e);\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarDateHandle, {\n    x: task.x2 - task.handleWidth - 1,\n    y: task.y + 1,\n    width: task.handleWidth,\n    height: handleHeight,\n    barCornerRadius: task.barCornerRadius,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"end\", task, e);\n    }\n  })), isProgressChangeable && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarProgressHandle, {\n    progressPoint: progressPoint,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"progress\", task, e);\n    }\n  })));\n};\n\nvar BarSmall = function BarSmall(_ref) {\n  var task = _ref.task,\n      isProgressChangeable = _ref.isProgressChangeable,\n      isDateChangeable = _ref.isDateChangeable,\n      onEventStart = _ref.onEventStart,\n      isSelected = _ref.isSelected;\n  var progressPoint = getProgressPoint(task.progressWidth + task.x1, task.y, task.height);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: styles$6.barWrapper,\n    tabIndex: 0\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarDisplay, {\n    x: task.x1,\n    y: task.y,\n    width: task.x2 - task.x1,\n    height: task.height,\n    progressX: task.progressX,\n    progressWidth: task.progressWidth,\n    barCornerRadius: task.barCornerRadius,\n    styles: task.styles,\n    isSelected: isSelected,\n    onMouseDown: function onMouseDown(e) {\n      isDateChangeable && onEventStart(\"move\", task, e);\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"handleGroup\"\n  }, isProgressChangeable && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarProgressHandle, {\n    progressPoint: progressPoint,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"progress\", task, e);\n    }\n  })));\n};\n\nvar styles$7 = {\"milestoneWrapper\":\"_RRr13\",\"milestoneBackground\":\"_2P2B1\"};\n\nvar Milestone = function Milestone(_ref) {\n  var task = _ref.task,\n      isDateChangeable = _ref.isDateChangeable,\n      onEventStart = _ref.onEventStart,\n      isSelected = _ref.isSelected;\n  var transform = \"rotate(45 \" + (task.x1 + task.height * 0.356) + \" \\n    \" + (task.y + task.height * 0.85) + \")\";\n\n  var getBarColor = function getBarColor() {\n    return isSelected ? task.styles.backgroundSelectedColor : task.styles.backgroundColor;\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    tabIndex: 0,\n    className: styles$7.milestoneWrapper\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    fill: getBarColor(),\n    x: task.x1,\n    width: task.height,\n    y: task.y,\n    height: task.height,\n    rx: task.barCornerRadius,\n    ry: task.barCornerRadius,\n    transform: transform,\n    className: styles$7.milestoneBackground,\n    onMouseDown: function onMouseDown(e) {\n      isDateChangeable && onEventStart(\"move\", task, e);\n    }\n  }));\n};\n\nvar styles$8 = {\"projectWrapper\":\"_1KJ6x\",\"projectBackground\":\"_2RbVy\",\"projectTop\":\"_2pZMF\"};\n\nvar Project = function Project(_ref) {\n  var task = _ref.task,\n      isSelected = _ref.isSelected;\n  var barColor = isSelected ? task.styles.backgroundSelectedColor : task.styles.backgroundColor;\n  var processColor = isSelected ? task.styles.progressSelectedColor : task.styles.progressColor;\n  var projectWith = task.x2 - task.x1;\n  var projectLeftTriangle = [task.x1, task.y + task.height / 2 - 1, task.x1, task.y + task.height, task.x1 + 15, task.y + task.height / 2 - 1].join(\",\");\n  var projectRightTriangle = [task.x2, task.y + task.height / 2 - 1, task.x2, task.y + task.height, task.x2 - 15, task.y + task.height / 2 - 1].join(\",\");\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    tabIndex: 0,\n    className: styles$8.projectWrapper\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    fill: barColor,\n    x: task.x1,\n    width: projectWith,\n    y: task.y,\n    height: task.height,\n    rx: task.barCornerRadius,\n    ry: task.barCornerRadius,\n    className: styles$8.projectBackground\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: task.progressX,\n    width: task.progressWidth,\n    y: task.y,\n    height: task.height,\n    ry: task.barCornerRadius,\n    rx: task.barCornerRadius,\n    fill: processColor\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    fill: barColor,\n    x: task.x1,\n    width: projectWith,\n    y: task.y,\n    height: task.height / 2,\n    rx: task.barCornerRadius,\n    ry: task.barCornerRadius,\n    className: styles$8.projectTop\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"polygon\", {\n    className: styles$8.projectTop,\n    points: projectLeftTriangle,\n    fill: barColor\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"polygon\", {\n    className: styles$8.projectTop,\n    points: projectRightTriangle,\n    fill: barColor\n  }));\n};\n\nvar style = {\"barLabel\":\"_3zRJQ\",\"barLabelOutside\":\"_3KcaM\"};\n\nvar TaskItem = function TaskItem(props) {\n  var _props = _extends({}, props),\n      task = _props.task,\n      arrowIndent = _props.arrowIndent,\n      isDelete = _props.isDelete,\n      taskHeight = _props.taskHeight,\n      isSelected = _props.isSelected,\n      rtl = _props.rtl,\n      onEventStart = _props.onEventStart;\n\n  var textRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null)),\n      taskItem = _useState[0],\n      setTaskItem = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true),\n      isTextInside = _useState2[0],\n      setIsTextInside = _useState2[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    switch (task.typeInternal) {\n      case \"milestone\":\n        setTaskItem(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Milestone, Object.assign({}, props)));\n        break;\n\n      case \"project\":\n        setTaskItem(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Project, Object.assign({}, props)));\n        break;\n\n      case \"smalltask\":\n        setTaskItem(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarSmall, Object.assign({}, props)));\n        break;\n\n      default:\n        setTaskItem(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Bar, Object.assign({}, props)));\n        break;\n    }\n  }, [task, isSelected]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (textRef.current) {\n      setIsTextInside(textRef.current.getBBox().width < task.x2 - task.x1);\n    }\n  }, [textRef, task]);\n\n  var getX = function getX() {\n    var width = task.x2 - task.x1;\n    var hasChild = task.barChildren.length > 0;\n\n    if (isTextInside) {\n      return task.x1 + width * 0.5;\n    }\n\n    if (rtl && textRef.current) {\n      return task.x1 - textRef.current.getBBox().width - arrowIndent * +hasChild - arrowIndent * 0.2;\n    } else {\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\n    }\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    onKeyDown: function onKeyDown(e) {\n      switch (e.key) {\n        case \"Delete\":\n          {\n            if (isDelete) onEventStart(\"delete\", task, e);\n            break;\n          }\n      }\n\n      e.stopPropagation();\n    },\n    onMouseEnter: function onMouseEnter(e) {\n      onEventStart(\"mouseenter\", task, e);\n    },\n    onMouseLeave: function onMouseLeave(e) {\n      onEventStart(\"mouseleave\", task, e);\n    },\n    onDoubleClick: function onDoubleClick(e) {\n      onEventStart(\"dblclick\", task, e);\n    },\n    onClick: function onClick(e) {\n      onEventStart(\"click\", task, e);\n    },\n    onFocus: function onFocus() {\n      onEventStart(\"select\", task);\n    }\n  }, taskItem, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n    x: getX(),\n    y: task.y + taskHeight * 0.5,\n    className: isTextInside ? style.barLabel :  style.barLabelOutside,\n    ref: textRef\n  }, task.name));\n};\n\nvar TaskGanttContent = function TaskGanttContent(_ref) {\n  var _svg$current;\n\n  var tasks = _ref.tasks,\n      dates = _ref.dates,\n      ganttEvent = _ref.ganttEvent,\n      selectedTask = _ref.selectedTask,\n      rowHeight = _ref.rowHeight,\n      columnWidth = _ref.columnWidth,\n      timeStep = _ref.timeStep,\n      svg = _ref.svg,\n      taskHeight = _ref.taskHeight,\n      arrowColor = _ref.arrowColor,\n      arrowIndent = _ref.arrowIndent,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize,\n      rtl = _ref.rtl,\n      setGanttEvent = _ref.setGanttEvent,\n      setFailedTask = _ref.setFailedTask,\n      setSelectedTask = _ref.setSelectedTask,\n      onDateChange = _ref.onDateChange,\n      onProgressChange = _ref.onProgressChange,\n      onDoubleClick = _ref.onDoubleClick,\n      onClick = _ref.onClick,\n      onDelete = _ref.onDelete;\n  var point = svg === null || svg === void 0 ? void 0 : (_svg$current = svg.current) === null || _svg$current === void 0 ? void 0 : _svg$current.createSVGPoint();\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      xStep = _useState[0],\n      setXStep = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      initEventX1Delta = _useState2[0],\n      setInitEventX1Delta = _useState2[1];\n\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      isMoving = _useState3[0],\n      setIsMoving = _useState3[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var dateDelta = dates[1].getTime() - dates[0].getTime() - dates[1].getTimezoneOffset() * 60 * 1000 + dates[0].getTimezoneOffset() * 60 * 1000;\n    var newXStep = timeStep * columnWidth / dateDelta;\n    setXStep(newXStep);\n  }, [columnWidth, dates, timeStep]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var handleMouseMove = function handleMouseMove(event) {\n      try {\n        var _svg$current$getScree;\n\n        if (!ganttEvent.changedTask || !point || !(svg !== null && svg !== void 0 && svg.current)) return Promise.resolve();\n        event.preventDefault();\n        point.x = event.clientX;\n        var cursor = point.matrixTransform(svg === null || svg === void 0 ? void 0 : (_svg$current$getScree = svg.current.getScreenCTM()) === null || _svg$current$getScree === void 0 ? void 0 : _svg$current$getScree.inverse());\n\n        var _handleTaskBySVGMouse = handleTaskBySVGMouseEvent(cursor.x, ganttEvent.action, ganttEvent.changedTask, xStep, timeStep, initEventX1Delta, rtl),\n            isChanged = _handleTaskBySVGMouse.isChanged,\n            changedTask = _handleTaskBySVGMouse.changedTask;\n\n        if (isChanged) {\n          setGanttEvent({\n            action: ganttEvent.action,\n            changedTask: changedTask\n          });\n        }\n\n        return Promise.resolve();\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    };\n\n    var handleMouseUp = function handleMouseUp(event) {\n      try {\n        var _svg$current$getScree2;\n\n        var _temp6 = function _temp6() {\n          if (!operationSuccess) {\n            setFailedTask(originalSelectedTask);\n          }\n        };\n\n        var action = ganttEvent.action,\n            originalSelectedTask = ganttEvent.originalSelectedTask,\n            changedTask = ganttEvent.changedTask;\n        if (!changedTask || !point || !(svg !== null && svg !== void 0 && svg.current) || !originalSelectedTask) return Promise.resolve();\n        event.preventDefault();\n        point.x = event.clientX;\n        var cursor = point.matrixTransform(svg === null || svg === void 0 ? void 0 : (_svg$current$getScree2 = svg.current.getScreenCTM()) === null || _svg$current$getScree2 === void 0 ? void 0 : _svg$current$getScree2.inverse());\n\n        var _handleTaskBySVGMouse2 = handleTaskBySVGMouseEvent(cursor.x, action, changedTask, xStep, timeStep, initEventX1Delta, rtl),\n            newChangedTask = _handleTaskBySVGMouse2.changedTask;\n\n        var isNotLikeOriginal = originalSelectedTask.start !== newChangedTask.start || originalSelectedTask.end !== newChangedTask.end || originalSelectedTask.progress !== newChangedTask.progress;\n        svg.current.removeEventListener(\"mousemove\", handleMouseMove);\n        svg.current.removeEventListener(\"mouseup\", handleMouseUp);\n        setGanttEvent({\n          action: \"\"\n        });\n        setIsMoving(false);\n        var operationSuccess = true;\n\n        var _temp7 = function () {\n          if ((action === \"move\" || action === \"end\" || action === \"start\") && onDateChange && isNotLikeOriginal) {\n            var _temp8 = _catch(function () {\n              return Promise.resolve(onDateChange(newChangedTask, newChangedTask.barChildren)).then(function (result) {\n                if (result !== undefined) {\n                  operationSuccess = result;\n                }\n              });\n            }, function () {\n              operationSuccess = false;\n            });\n\n            if (_temp8 && _temp8.then) return _temp8.then(function () {});\n          } else {\n            var _temp9 = function () {\n              if (onProgressChange && isNotLikeOriginal) {\n                var _temp10 = _catch(function () {\n                  return Promise.resolve(onProgressChange(newChangedTask, newChangedTask.barChildren)).then(function (result) {\n                    if (result !== undefined) {\n                      operationSuccess = result;\n                    }\n                  });\n                }, function () {\n                  operationSuccess = false;\n                });\n\n                if (_temp10 && _temp10.then) return _temp10.then(function () {});\n              }\n            }();\n\n            if (_temp9 && _temp9.then) return _temp9.then(function () {});\n          }\n        }();\n\n        return Promise.resolve(_temp7 && _temp7.then ? _temp7.then(_temp6) : _temp6(_temp7));\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    };\n\n    if (!isMoving && (ganttEvent.action === \"move\" || ganttEvent.action === \"end\" || ganttEvent.action === \"start\" || ganttEvent.action === \"progress\") && svg !== null && svg !== void 0 && svg.current) {\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\n      svg.current.addEventListener(\"mouseup\", handleMouseUp);\n      setIsMoving(true);\n    }\n  }, [ganttEvent, xStep, initEventX1Delta, onProgressChange, timeStep, onDateChange, svg, isMoving, point, rtl, setFailedTask, setGanttEvent]);\n\n  var handleBarEventStart = function handleBarEventStart(action, task, event) {\n    try {\n      return Promise.resolve(function () {\n        if (!event) {\n          if (action === \"select\") {\n            setSelectedTask(task.id);\n          }\n        } else return function () {\n          if (isKeyboardEvent(event)) {\n            var _temp14 = function () {\n              if (action === \"delete\") {\n                var _temp15 = function () {\n                  if (onDelete) {\n                    var _temp16 = _catch(function () {\n                      return Promise.resolve(onDelete(task)).then(function (result) {\n                        if (result !== undefined && result) {\n                          setGanttEvent({\n                            action: action,\n                            changedTask: task\n                          });\n                        }\n                      });\n                    }, function (error) {\n                      console.error(\"Error on Delete. \" + error);\n                    });\n\n                    if (_temp16 && _temp16.then) return _temp16.then(function () {});\n                  }\n                }();\n\n                if (_temp15 && _temp15.then) return _temp15.then(function () {});\n              }\n            }();\n\n            if (_temp14 && _temp14.then) return _temp14.then(function () {});\n          } else if (action === \"mouseenter\") {\n            if (!ganttEvent.action) {\n              setGanttEvent({\n                action: action,\n                changedTask: task,\n                originalSelectedTask: task\n              });\n            }\n          } else if (action === \"mouseleave\") {\n            if (ganttEvent.action === \"mouseenter\") {\n              setGanttEvent({\n                action: \"\"\n              });\n            }\n          } else if (action === \"dblclick\") {\n            !!onDoubleClick && onDoubleClick(task);\n          } else if (action === \"click\") {\n            !!onClick && onClick(task);\n          } else if (action === \"move\") {\n            var _svg$current$getScree3;\n\n            if (!(svg !== null && svg !== void 0 && svg.current) || !point) return;\n            point.x = event.clientX;\n            var cursor = point.matrixTransform((_svg$current$getScree3 = svg.current.getScreenCTM()) === null || _svg$current$getScree3 === void 0 ? void 0 : _svg$current$getScree3.inverse());\n            setInitEventX1Delta(cursor.x - task.x1);\n            setGanttEvent({\n              action: action,\n              changedTask: task,\n              originalSelectedTask: task\n            });\n          } else {\n            setGanttEvent({\n              action: action,\n              changedTask: task,\n              originalSelectedTask: task\n            });\n          }\n        }();\n      }());\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"content\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"arrows\",\n    fill: arrowColor,\n    stroke: arrowColor\n  }, tasks.map(function (task) {\n    return task.barChildren.map(function (child) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Arrow, {\n        key: \"Arrow from \" + task.id + \" to \" + tasks[child.index].id,\n        taskFrom: task,\n        taskTo: tasks[child.index],\n        rowHeight: rowHeight,\n        taskHeight: taskHeight,\n        arrowIndent: arrowIndent,\n        rtl: rtl\n      });\n    });\n  })), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"bar\",\n    fontFamily: fontFamily,\n    fontSize: fontSize\n  }, tasks.map(function (task) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskItem, {\n      task: task,\n      arrowIndent: arrowIndent,\n      taskHeight: taskHeight,\n      isProgressChangeable: !!onProgressChange && !task.isDisabled,\n      isDateChangeable: !!onDateChange && !task.isDisabled,\n      isDelete: !task.isDisabled,\n      onEventStart: handleBarEventStart,\n      key: task.id,\n      isSelected: !!selectedTask && task.id === selectedTask.id,\n      rtl: rtl\n    });\n  })));\n};\n\nvar styles$9 = {\"ganttVerticalContainer\":\"_CZjuD\",\"horizontalContainer\":\"_2B2zv\",\"wrapper\":\"_3eULf\"};\n\nvar TaskGantt = function TaskGantt(_ref) {\n  var gridProps = _ref.gridProps,\n      calendarProps = _ref.calendarProps,\n      barProps = _ref.barProps,\n      ganttHeight = _ref.ganttHeight,\n      scrollY = _ref.scrollY,\n      scrollX = _ref.scrollX;\n  var ganttSVGRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var horizontalContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var verticalGanttContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var newBarProps = _extends({}, barProps, {\n    svg: ganttSVGRef\n  });\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (verticalGanttContainerRef.current) {\n      verticalGanttContainerRef.current.scrollLeft = scrollX;\n    }\n  }, [scrollX]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles$9.ganttVerticalContainer,\n    ref: verticalGanttContainerRef,\n    dir: \"ltr\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: gridProps.svgWidth,\n    height: calendarProps.headerHeight,\n    fontFamily: barProps.fontFamily\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Calendar, Object.assign({}, calendarProps))), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: horizontalContainerRef,\n    className: styles$9.horizontalContainer,\n    style: ganttHeight ? {\n      height: ganttHeight,\n      width: gridProps.svgWidth\n    } : {\n      width: gridProps.svgWidth\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: gridProps.svgWidth,\n    height: barProps.rowHeight * barProps.tasks.length,\n    fontFamily: barProps.fontFamily,\n    ref: ganttSVGRef\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Grid, Object.assign({}, gridProps)), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskGanttContent, Object.assign({}, newBarProps)))));\n};\n\nvar styles$a = {\"scrollWrapper\":\"_2k9Ys\",\"scroll\":\"_19jgW\"};\n\nvar HorizontalScroll = function HorizontalScroll(_ref) {\n  var scroll = _ref.scroll,\n      svgWidth = _ref.svgWidth,\n      taskListWidth = _ref.taskListWidth,\n      rtl = _ref.rtl,\n      onScroll = _ref.onScroll;\n  var scrollRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (scrollRef.current) {\n      scrollRef.current.scrollLeft = scroll;\n    }\n  }, [scroll]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    dir: \"ltr\",\n    style: {\n      margin: rtl ? \"0px \" + taskListWidth + \"px 0px 0px\" : \"0px 0px 0px \" + taskListWidth + \"px\"\n    },\n    className: styles$a.scrollWrapper,\n    onScroll: onScroll,\n    ref: scrollRef\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    style: {\n      width: svgWidth\n    },\n    className: styles$a.scroll\n  }));\n};\n\nvar Gantt = function Gantt(_ref) {\n  var tasks = _ref.tasks,\n      _ref$headerHeight = _ref.headerHeight,\n      headerHeight = _ref$headerHeight === void 0 ? 50 : _ref$headerHeight,\n      _ref$columnWidth = _ref.columnWidth,\n      columnWidth = _ref$columnWidth === void 0 ? 60 : _ref$columnWidth,\n      _ref$listCellWidth = _ref.listCellWidth,\n      listCellWidth = _ref$listCellWidth === void 0 ? \"155px\" : _ref$listCellWidth,\n      _ref$rowHeight = _ref.rowHeight,\n      rowHeight = _ref$rowHeight === void 0 ? 50 : _ref$rowHeight,\n      _ref$ganttHeight = _ref.ganttHeight,\n      ganttHeight = _ref$ganttHeight === void 0 ? 0 : _ref$ganttHeight,\n      _ref$viewMode = _ref.viewMode,\n      viewMode = _ref$viewMode === void 0 ? ViewMode.Day : _ref$viewMode,\n      _ref$preStepsCount = _ref.preStepsCount,\n      preStepsCount = _ref$preStepsCount === void 0 ? 1 : _ref$preStepsCount,\n      _ref$locale = _ref.locale,\n      locale = _ref$locale === void 0 ? \"en-GB\" : _ref$locale,\n      _ref$barFill = _ref.barFill,\n      barFill = _ref$barFill === void 0 ? 60 : _ref$barFill,\n      _ref$barCornerRadius = _ref.barCornerRadius,\n      barCornerRadius = _ref$barCornerRadius === void 0 ? 3 : _ref$barCornerRadius,\n      _ref$barProgressColor = _ref.barProgressColor,\n      barProgressColor = _ref$barProgressColor === void 0 ? \"#a3a3ff\" : _ref$barProgressColor,\n      _ref$barProgressSelec = _ref.barProgressSelectedColor,\n      barProgressSelectedColor = _ref$barProgressSelec === void 0 ? \"#8282f5\" : _ref$barProgressSelec,\n      _ref$barBackgroundCol = _ref.barBackgroundColor,\n      barBackgroundColor = _ref$barBackgroundCol === void 0 ? \"#b8c2cc\" : _ref$barBackgroundCol,\n      _ref$barBackgroundSel = _ref.barBackgroundSelectedColor,\n      barBackgroundSelectedColor = _ref$barBackgroundSel === void 0 ? \"#aeb8c2\" : _ref$barBackgroundSel,\n      _ref$projectProgressC = _ref.projectProgressColor,\n      projectProgressColor = _ref$projectProgressC === void 0 ? \"#7db59a\" : _ref$projectProgressC,\n      _ref$projectProgressS = _ref.projectProgressSelectedColor,\n      projectProgressSelectedColor = _ref$projectProgressS === void 0 ? \"#59a985\" : _ref$projectProgressS,\n      _ref$projectBackgroun = _ref.projectBackgroundColor,\n      projectBackgroundColor = _ref$projectBackgroun === void 0 ? \"#fac465\" : _ref$projectBackgroun,\n      _ref$projectBackgroun2 = _ref.projectBackgroundSelectedColor,\n      projectBackgroundSelectedColor = _ref$projectBackgroun2 === void 0 ? \"#f7bb53\" : _ref$projectBackgroun2,\n      _ref$milestoneBackgro = _ref.milestoneBackgroundColor,\n      milestoneBackgroundColor = _ref$milestoneBackgro === void 0 ? \"#f1c453\" : _ref$milestoneBackgro,\n      _ref$milestoneBackgro2 = _ref.milestoneBackgroundSelectedColor,\n      milestoneBackgroundSelectedColor = _ref$milestoneBackgro2 === void 0 ? \"#f29e4c\" : _ref$milestoneBackgro2,\n      _ref$rtl = _ref.rtl,\n      rtl = _ref$rtl === void 0 ? false : _ref$rtl,\n      _ref$handleWidth = _ref.handleWidth,\n      handleWidth = _ref$handleWidth === void 0 ? 8 : _ref$handleWidth,\n      _ref$timeStep = _ref.timeStep,\n      timeStep = _ref$timeStep === void 0 ? 300000 : _ref$timeStep,\n      _ref$arrowColor = _ref.arrowColor,\n      arrowColor = _ref$arrowColor === void 0 ? \"grey\" : _ref$arrowColor,\n      _ref$fontFamily = _ref.fontFamily,\n      fontFamily = _ref$fontFamily === void 0 ? \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\" : _ref$fontFamily,\n      _ref$fontSize = _ref.fontSize,\n      fontSize = _ref$fontSize === void 0 ? \"14px\" : _ref$fontSize,\n      _ref$arrowIndent = _ref.arrowIndent,\n      arrowIndent = _ref$arrowIndent === void 0 ? 20 : _ref$arrowIndent,\n      _ref$todayColor = _ref.todayColor,\n      todayColor = _ref$todayColor === void 0 ? \"rgba(252, 248, 227, 0.5)\" : _ref$todayColor,\n      viewDate = _ref.viewDate,\n      _ref$TooltipContent = _ref.TooltipContent,\n      TooltipContent = _ref$TooltipContent === void 0 ? StandardTooltipContent : _ref$TooltipContent,\n      _ref$TaskListHeader = _ref.TaskListHeader,\n      TaskListHeader = _ref$TaskListHeader === void 0 ? TaskListHeaderDefault : _ref$TaskListHeader,\n      _ref$TaskListTable = _ref.TaskListTable,\n      TaskListTable = _ref$TaskListTable === void 0 ? TaskListTableDefault : _ref$TaskListTable,\n      onDateChange = _ref.onDateChange,\n      onProgressChange = _ref.onProgressChange,\n      onDoubleClick = _ref.onDoubleClick,\n      onClick = _ref.onClick,\n      onDelete = _ref.onDelete,\n      onSelect = _ref.onSelect,\n      onExpanderClick = _ref.onExpanderClick;\n  var wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var taskListRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(function () {\n    var _ganttDateRange = ganttDateRange(tasks, viewMode, preStepsCount),\n        startDate = _ganttDateRange[0],\n        endDate = _ganttDateRange[1];\n\n    return {\n      viewMode: viewMode,\n      dates: seedDates(startDate, endDate, viewMode)\n    };\n  }),\n      dateSetup = _useState[0],\n      setDateSetup = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(undefined),\n      currentViewDate = _useState2[0],\n      setCurrentViewDate = _useState2[1];\n\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      taskListWidth = _useState3[0],\n      setTaskListWidth = _useState3[1];\n\n  var _useState4 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      svgContainerWidth = _useState4[0],\n      setSvgContainerWidth = _useState4[1];\n\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(ganttHeight),\n      svgContainerHeight = _useState5[0],\n      setSvgContainerHeight = _useState5[1];\n\n  var _useState6 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),\n      barTasks = _useState6[0],\n      setBarTasks = _useState6[1];\n\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    action: \"\"\n  }),\n      ganttEvent = _useState7[0],\n      setGanttEvent = _useState7[1];\n\n  var taskHeight = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return rowHeight * barFill / 100;\n  }, [rowHeight, barFill]);\n\n  var _useState8 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),\n      selectedTask = _useState8[0],\n      setSelectedTask = _useState8[1];\n\n  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),\n      failedTask = _useState9[0],\n      setFailedTask = _useState9[1];\n\n  var svgWidth = dateSetup.dates.length * columnWidth;\n  var ganttFullHeight = barTasks.length * rowHeight;\n\n  var _useState10 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      scrollY = _useState10[0],\n      setScrollY = _useState10[1];\n\n  var _useState11 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(-1),\n      scrollX = _useState11[0],\n      setScrollX = _useState11[1];\n\n  var _useState12 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      ignoreScrollEvent = _useState12[0],\n      setIgnoreScrollEvent = _useState12[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var filteredTasks;\n\n    if (onExpanderClick) {\n      filteredTasks = removeHiddenTasks(tasks);\n    } else {\n      filteredTasks = tasks;\n    }\n\n    filteredTasks = filteredTasks.sort(sortTasks);\n\n    var _ganttDateRange2 = ganttDateRange(filteredTasks, viewMode, preStepsCount),\n        startDate = _ganttDateRange2[0],\n        endDate = _ganttDateRange2[1];\n\n    var newDates = seedDates(startDate, endDate, viewMode);\n\n    if (rtl) {\n      newDates = newDates.reverse();\n\n      if (scrollX === -1) {\n        setScrollX(newDates.length * columnWidth);\n      }\n    }\n\n    setDateSetup({\n      dates: newDates,\n      viewMode: viewMode\n    });\n    setBarTasks(convertToBarTasks(filteredTasks, newDates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor));\n  }, [tasks, viewMode, preStepsCount, rowHeight, barCornerRadius, columnWidth, taskHeight, handleWidth, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor, rtl, scrollX, onExpanderClick]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (viewMode === dateSetup.viewMode && (viewDate && !currentViewDate || viewDate && (currentViewDate === null || currentViewDate === void 0 ? void 0 : currentViewDate.valueOf()) !== viewDate.valueOf())) {\n      var dates = dateSetup.dates;\n      var index = dates.findIndex(function (d, i) {\n        return viewDate.valueOf() >= d.valueOf() && i + 1 !== dates.length && viewDate.valueOf() < dates[i + 1].valueOf();\n      });\n\n      if (index === -1) {\n        return;\n      }\n\n      setCurrentViewDate(viewDate);\n      setScrollX(columnWidth * index);\n    }\n  }, [viewDate, columnWidth, dateSetup.dates, dateSetup.viewMode, viewMode, currentViewDate, setCurrentViewDate]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var changedTask = ganttEvent.changedTask,\n        action = ganttEvent.action;\n\n    if (changedTask) {\n      if (action === \"delete\") {\n        setGanttEvent({\n          action: \"\"\n        });\n        setBarTasks(barTasks.filter(function (t) {\n          return t.id !== changedTask.id;\n        }));\n      } else if (action === \"move\" || action === \"end\" || action === \"start\" || action === \"progress\") {\n        var prevStateTask = barTasks.find(function (t) {\n          return t.id === changedTask.id;\n        });\n\n        if (prevStateTask && (prevStateTask.start.getTime() !== changedTask.start.getTime() || prevStateTask.end.getTime() !== changedTask.end.getTime() || prevStateTask.progress !== changedTask.progress)) {\n          var newTaskList = barTasks.map(function (t) {\n            return t.id === changedTask.id ? changedTask : t;\n          });\n          setBarTasks(newTaskList);\n        }\n      }\n    }\n  }, [ganttEvent, barTasks]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (failedTask) {\n      setBarTasks(barTasks.map(function (t) {\n        return t.id !== failedTask.id ? t : failedTask;\n      }));\n      setFailedTask(null);\n    }\n  }, [failedTask, barTasks]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!listCellWidth) {\n      setTaskListWidth(0);\n    }\n\n    if (taskListRef.current) {\n      setTaskListWidth(taskListRef.current.offsetWidth);\n    }\n  }, [taskListRef, listCellWidth]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (wrapperRef.current) {\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\n    }\n  }, [wrapperRef, taskListWidth]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (ganttHeight) {\n      setSvgContainerHeight(ganttHeight + headerHeight);\n    } else {\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\n    }\n  }, [ganttHeight, tasks, headerHeight, rowHeight]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var _wrapperRef$current;\n\n    var handleWheel = function handleWheel(event) {\n      if (event.shiftKey || event.deltaX) {\n        var scrollMove = event.deltaX ? event.deltaX : event.deltaY;\n        var newScrollX = scrollX + scrollMove;\n\n        if (newScrollX < 0) {\n          newScrollX = 0;\n        } else if (newScrollX > svgWidth) {\n          newScrollX = svgWidth;\n        }\n\n        setScrollX(newScrollX);\n        event.preventDefault();\n      } else if (ganttHeight) {\n        var newScrollY = scrollY + event.deltaY;\n\n        if (newScrollY < 0) {\n          newScrollY = 0;\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\n          newScrollY = ganttFullHeight - ganttHeight;\n        }\n\n        if (newScrollY !== scrollY) {\n          setScrollY(newScrollY);\n          event.preventDefault();\n        }\n      }\n\n      setIgnoreScrollEvent(true);\n    };\n\n    (_wrapperRef$current = wrapperRef.current) === null || _wrapperRef$current === void 0 ? void 0 : _wrapperRef$current.addEventListener(\"wheel\", handleWheel, {\n      passive: false\n    });\n    return function () {\n      var _wrapperRef$current2;\n\n      (_wrapperRef$current2 = wrapperRef.current) === null || _wrapperRef$current2 === void 0 ? void 0 : _wrapperRef$current2.removeEventListener(\"wheel\", handleWheel);\n    };\n  }, [wrapperRef, scrollY, scrollX, ganttHeight, svgWidth, rtl, ganttFullHeight]);\n\n  var handleScrollY = function handleScrollY(event) {\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\n      setScrollY(event.currentTarget.scrollTop);\n      setIgnoreScrollEvent(true);\n    } else {\n      setIgnoreScrollEvent(false);\n    }\n  };\n\n  var handleScrollX = function handleScrollX(event) {\n    if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\n      setScrollX(event.currentTarget.scrollLeft);\n      setIgnoreScrollEvent(true);\n    } else {\n      setIgnoreScrollEvent(false);\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    event.preventDefault();\n    var newScrollY = scrollY;\n    var newScrollX = scrollX;\n    var isX = true;\n\n    switch (event.key) {\n      case \"Down\":\n      case \"ArrowDown\":\n        newScrollY += rowHeight;\n        isX = false;\n        break;\n\n      case \"Up\":\n      case \"ArrowUp\":\n        newScrollY -= rowHeight;\n        isX = false;\n        break;\n\n      case \"Left\":\n      case \"ArrowLeft\":\n        newScrollX -= columnWidth;\n        break;\n\n      case \"Right\":\n      case \"ArrowRight\":\n        newScrollX += columnWidth;\n        break;\n    }\n\n    if (isX) {\n      if (newScrollX < 0) {\n        newScrollX = 0;\n      } else if (newScrollX > svgWidth) {\n        newScrollX = svgWidth;\n      }\n\n      setScrollX(newScrollX);\n    } else {\n      if (newScrollY < 0) {\n        newScrollY = 0;\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\n        newScrollY = ganttFullHeight - ganttHeight;\n      }\n\n      setScrollY(newScrollY);\n    }\n\n    setIgnoreScrollEvent(true);\n  };\n\n  var handleSelectedTask = function handleSelectedTask(taskId) {\n    var newSelectedTask = barTasks.find(function (t) {\n      return t.id === taskId;\n    });\n    var oldSelectedTask = barTasks.find(function (t) {\n      return !!selectedTask && t.id === selectedTask.id;\n    });\n\n    if (onSelect) {\n      if (oldSelectedTask) {\n        onSelect(oldSelectedTask, false);\n      }\n\n      if (newSelectedTask) {\n        onSelect(newSelectedTask, true);\n      }\n    }\n\n    setSelectedTask(newSelectedTask);\n  };\n\n  var handleExpanderClick = function handleExpanderClick(task) {\n    if (onExpanderClick && task.hideChildren !== undefined) {\n      onExpanderClick(_extends({}, task, {\n        hideChildren: !task.hideChildren\n      }));\n    }\n  };\n\n  var gridProps = {\n    columnWidth: columnWidth,\n    svgWidth: svgWidth,\n    tasks: tasks,\n    rowHeight: rowHeight,\n    dates: dateSetup.dates,\n    todayColor: todayColor,\n    rtl: rtl\n  };\n  var calendarProps = {\n    dateSetup: dateSetup,\n    locale: locale,\n    viewMode: viewMode,\n    headerHeight: headerHeight,\n    columnWidth: columnWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    rtl: rtl\n  };\n  var barProps = {\n    tasks: barTasks,\n    dates: dateSetup.dates,\n    ganttEvent: ganttEvent,\n    selectedTask: selectedTask,\n    rowHeight: rowHeight,\n    taskHeight: taskHeight,\n    columnWidth: columnWidth,\n    arrowColor: arrowColor,\n    timeStep: timeStep,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    arrowIndent: arrowIndent,\n    svgWidth: svgWidth,\n    rtl: rtl,\n    setGanttEvent: setGanttEvent,\n    setFailedTask: setFailedTask,\n    setSelectedTask: handleSelectedTask,\n    onDateChange: onDateChange,\n    onProgressChange: onProgressChange,\n    onDoubleClick: onDoubleClick,\n    onClick: onClick,\n    onDelete: onDelete\n  };\n  var tableProps = {\n    rowHeight: rowHeight,\n    rowWidth: listCellWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    tasks: barTasks,\n    locale: locale,\n    headerHeight: headerHeight,\n    scrollY: scrollY,\n    ganttHeight: ganttHeight,\n    horizontalContainerClass: styles$9.horizontalContainer,\n    selectedTask: selectedTask,\n    taskListRef: taskListRef,\n    setSelectedTask: handleSelectedTask,\n    onExpanderClick: handleExpanderClick,\n    TaskListHeader: TaskListHeader,\n    TaskListTable: TaskListTable\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles$9.wrapper,\n    onKeyDown: handleKeyDown,\n    tabIndex: 0,\n    ref: wrapperRef\n  }, listCellWidth && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskList, Object.assign({}, tableProps)), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskGantt, {\n    gridProps: gridProps,\n    calendarProps: calendarProps,\n    barProps: barProps,\n    ganttHeight: ganttHeight,\n    scrollY: scrollY,\n    scrollX: scrollX\n  }), ganttEvent.changedTask && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Tooltip, {\n    arrowIndent: arrowIndent,\n    rowHeight: rowHeight,\n    svgContainerHeight: svgContainerHeight,\n    svgContainerWidth: svgContainerWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    scrollX: scrollX,\n    scrollY: scrollY,\n    task: ganttEvent.changedTask,\n    headerHeight: headerHeight,\n    taskListWidth: taskListWidth,\n    TooltipContent: TooltipContent,\n    rtl: rtl,\n    svgWidth: svgWidth\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(VerticalScroll, {\n    ganttFullHeight: ganttFullHeight,\n    ganttHeight: ganttHeight,\n    headerHeight: headerHeight,\n    scroll: scrollY,\n    onScroll: handleScrollY,\n    rtl: rtl\n  })), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(HorizontalScroll, {\n    svgWidth: svgWidth,\n    taskListWidth: taskListWidth,\n    scroll: scrollX,\n    rtl: rtl,\n    onScroll: handleScrollX\n  }));\n};\n\n\n//# sourceMappingURL=index.modern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZ2FudHQtdGFzay1yZWFjdC9kaXN0L2luZGV4Lm1vZGVybi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW9FOztBQUVwRTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5Q0FBeUMsU0FBUzs7QUFFbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0QkFBNEI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzRUFBc0UsNEJBQTRCO0FBQ2xHOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0IsZ0NBQWdDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkIsa0NBQWtDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCOztBQUUvQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtC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V0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywwREFBbUIsY0FBYywwREFBbUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLG1CQUFtQiwwREFBbUIsMkJBQTJCLGdCQUFnQiwwREFBbUI7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyw2QkFBNkIsMERBQW1CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLEdBQUcsMERBQW1CO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSSwwREFBbUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFMkI7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGllbnQvLi9ub2RlX21vZHVsZXMvZ2FudHQtdGFzay1yZWFjdC9kaXN0L2luZGV4Lm1vZGVybi5qcz9hMjhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VNZW1vLCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldO1xuXG4gIHJldHVybiBhcnIyO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7XG4gIHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdO1xuICBpZiAoaXQpIHJldHVybiAoaXQgPSBpdC5jYWxsKG8pKS5uZXh0LmJpbmQoaXQpO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICBpZiAoaXQpIG8gPSBpdDtcbiAgICB2YXIgaSA9IDA7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4ge1xuICAgICAgICBkb25lOiB0cnVlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBvW2krK11cbiAgICAgIH07XG4gICAgfTtcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxudmFyIFZpZXdNb2RlO1xuXG4oZnVuY3Rpb24gKFZpZXdNb2RlKSB7XG4gIFZpZXdNb2RlW1wiSG91clwiXSA9IFwiSG91clwiO1xuICBWaWV3TW9kZVtcIlF1YXJ0ZXJEYXlcIl0gPSBcIlF1YXJ0ZXIgRGF5XCI7XG4gIFZpZXdNb2RlW1wiSGFsZkRheVwiXSA9IFwiSGFsZiBEYXlcIjtcbiAgVmlld01vZGVbXCJEYXlcIl0gPSBcIkRheVwiO1xuICBWaWV3TW9kZVtcIldlZWtcIl0gPSBcIldlZWtcIjtcbiAgVmlld01vZGVbXCJNb250aFwiXSA9IFwiTW9udGhcIjtcbiAgVmlld01vZGVbXCJZZWFyXCJdID0gXCJZZWFyXCI7XG59KShWaWV3TW9kZSB8fCAoVmlld01vZGUgPSB7fSkpO1xuXG52YXIgaW50bERUQ2FjaGUgPSB7fTtcbnZhciBnZXRDYWNoZWREYXRlVGltZUZvcm1hdCA9IGZ1bmN0aW9uIGdldENhY2hlZERhdGVUaW1lRm9ybWF0KGxvY1N0cmluZywgb3B0cykge1xuICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0cyA9IHt9O1xuICB9XG5cbiAgdmFyIGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgdmFyIGR0ZiA9IGludGxEVENhY2hlW2tleV07XG5cbiAgaWYgKCFkdGYpIHtcbiAgICBkdGYgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxEVENhY2hlW2tleV0gPSBkdGY7XG4gIH1cblxuICByZXR1cm4gZHRmO1xufTtcbnZhciBhZGRUb0RhdGUgPSBmdW5jdGlvbiBhZGRUb0RhdGUoZGF0ZSwgcXVhbnRpdHksIHNjYWxlKSB7XG4gIHZhciBuZXdEYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpICsgKHNjYWxlID09PSBcInllYXJcIiA/IHF1YW50aXR5IDogMCksIGRhdGUuZ2V0TW9udGgoKSArIChzY2FsZSA9PT0gXCJtb250aFwiID8gcXVhbnRpdHkgOiAwKSwgZGF0ZS5nZXREYXRlKCkgKyAoc2NhbGUgPT09IFwiZGF5XCIgPyBxdWFudGl0eSA6IDApLCBkYXRlLmdldEhvdXJzKCkgKyAoc2NhbGUgPT09IFwiaG91clwiID8gcXVhbnRpdHkgOiAwKSwgZGF0ZS5nZXRNaW51dGVzKCkgKyAoc2NhbGUgPT09IFwibWludXRlXCIgPyBxdWFudGl0eSA6IDApLCBkYXRlLmdldFNlY29uZHMoKSArIChzY2FsZSA9PT0gXCJzZWNvbmRcIiA/IHF1YW50aXR5IDogMCksIGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgKyAoc2NhbGUgPT09IFwibWlsbGlzZWNvbmRcIiA/IHF1YW50aXR5IDogMCkpO1xuICByZXR1cm4gbmV3RGF0ZTtcbn07XG52YXIgc3RhcnRPZkRhdGUgPSBmdW5jdGlvbiBzdGFydE9mRGF0ZShkYXRlLCBzY2FsZSkge1xuICB2YXIgc2NvcmVzID0gW1wibWlsbGlzZWNvbmRcIiwgXCJzZWNvbmRcIiwgXCJtaW51dGVcIiwgXCJob3VyXCIsIFwiZGF5XCIsIFwibW9udGhcIiwgXCJ5ZWFyXCJdO1xuXG4gIHZhciBzaG91bGRSZXNldCA9IGZ1bmN0aW9uIHNob3VsZFJlc2V0KF9zY2FsZSkge1xuICAgIHZhciBtYXhTY29yZSA9IHNjb3Jlcy5pbmRleE9mKHNjYWxlKTtcbiAgICByZXR1cm4gc2NvcmVzLmluZGV4T2YoX3NjYWxlKSA8PSBtYXhTY29yZTtcbiAgfTtcblxuICB2YXIgbmV3RGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgc2hvdWxkUmVzZXQoXCJ5ZWFyXCIpID8gMCA6IGRhdGUuZ2V0TW9udGgoKSwgc2hvdWxkUmVzZXQoXCJtb250aFwiKSA/IDEgOiBkYXRlLmdldERhdGUoKSwgc2hvdWxkUmVzZXQoXCJkYXlcIikgPyAwIDogZGF0ZS5nZXRIb3VycygpLCBzaG91bGRSZXNldChcImhvdXJcIikgPyAwIDogZGF0ZS5nZXRNaW51dGVzKCksIHNob3VsZFJlc2V0KFwibWludXRlXCIpID8gMCA6IGRhdGUuZ2V0U2Vjb25kcygpLCBzaG91bGRSZXNldChcInNlY29uZFwiKSA/IDAgOiBkYXRlLmdldE1pbGxpc2Vjb25kcygpKTtcbiAgcmV0dXJuIG5ld0RhdGU7XG59O1xudmFyIGdhbnR0RGF0ZVJhbmdlID0gZnVuY3Rpb24gZ2FudHREYXRlUmFuZ2UodGFza3MsIHZpZXdNb2RlLCBwcmVTdGVwc0NvdW50KSB7XG4gIHZhciBuZXdTdGFydERhdGUgPSB0YXNrc1swXS5zdGFydDtcbiAgdmFyIG5ld0VuZERhdGUgPSB0YXNrc1swXS5zdGFydDtcblxuICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRhc2tzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICB2YXIgdGFzayA9IF9zdGVwLnZhbHVlO1xuXG4gICAgaWYgKHRhc2suc3RhcnQgPCBuZXdTdGFydERhdGUpIHtcbiAgICAgIG5ld1N0YXJ0RGF0ZSA9IHRhc2suc3RhcnQ7XG4gICAgfVxuXG4gICAgaWYgKHRhc2suZW5kID4gbmV3RW5kRGF0ZSkge1xuICAgICAgbmV3RW5kRGF0ZSA9IHRhc2suZW5kO1xuICAgIH1cbiAgfVxuXG4gIHN3aXRjaCAodmlld01vZGUpIHtcbiAgICBjYXNlIFZpZXdNb2RlLlllYXI6XG4gICAgICBuZXdTdGFydERhdGUgPSBhZGRUb0RhdGUobmV3U3RhcnREYXRlLCAtMSwgXCJ5ZWFyXCIpO1xuICAgICAgbmV3U3RhcnREYXRlID0gc3RhcnRPZkRhdGUobmV3U3RhcnREYXRlLCBcInllYXJcIik7XG4gICAgICBuZXdFbmREYXRlID0gYWRkVG9EYXRlKG5ld0VuZERhdGUsIDEsIFwieWVhclwiKTtcbiAgICAgIG5ld0VuZERhdGUgPSBzdGFydE9mRGF0ZShuZXdFbmREYXRlLCBcInllYXJcIik7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgVmlld01vZGUuTW9udGg6XG4gICAgICBuZXdTdGFydERhdGUgPSBhZGRUb0RhdGUobmV3U3RhcnREYXRlLCAtMSAqIHByZVN0ZXBzQ291bnQsIFwibW9udGhcIik7XG4gICAgICBuZXdTdGFydERhdGUgPSBzdGFydE9mRGF0ZShuZXdTdGFydERhdGUsIFwibW9udGhcIik7XG4gICAgICBuZXdFbmREYXRlID0gYWRkVG9EYXRlKG5ld0VuZERhdGUsIDEsIFwieWVhclwiKTtcbiAgICAgIG5ld0VuZERhdGUgPSBzdGFydE9mRGF0ZShuZXdFbmREYXRlLCBcInllYXJcIik7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgVmlld01vZGUuV2VlazpcbiAgICAgIG5ld1N0YXJ0RGF0ZSA9IHN0YXJ0T2ZEYXRlKG5ld1N0YXJ0RGF0ZSwgXCJkYXlcIik7XG4gICAgICBuZXdTdGFydERhdGUgPSBhZGRUb0RhdGUoZ2V0TW9uZGF5KG5ld1N0YXJ0RGF0ZSksIC03ICogcHJlU3RlcHNDb3VudCwgXCJkYXlcIik7XG4gICAgICBuZXdFbmREYXRlID0gc3RhcnRPZkRhdGUobmV3RW5kRGF0ZSwgXCJkYXlcIik7XG4gICAgICBuZXdFbmREYXRlID0gYWRkVG9EYXRlKG5ld0VuZERhdGUsIDEuNSwgXCJtb250aFwiKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBWaWV3TW9kZS5EYXk6XG4gICAgICBuZXdTdGFydERhdGUgPSBzdGFydE9mRGF0ZShuZXdTdGFydERhdGUsIFwiZGF5XCIpO1xuICAgICAgbmV3U3RhcnREYXRlID0gYWRkVG9EYXRlKG5ld1N0YXJ0RGF0ZSwgLTEgKiBwcmVTdGVwc0NvdW50LCBcImRheVwiKTtcbiAgICAgIG5ld0VuZERhdGUgPSBzdGFydE9mRGF0ZShuZXdFbmREYXRlLCBcImRheVwiKTtcbiAgICAgIG5ld0VuZERhdGUgPSBhZGRUb0RhdGUobmV3RW5kRGF0ZSwgMTksIFwiZGF5XCIpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZpZXdNb2RlLlF1YXJ0ZXJEYXk6XG4gICAgICBuZXdTdGFydERhdGUgPSBzdGFydE9mRGF0ZShuZXdTdGFydERhdGUsIFwiZGF5XCIpO1xuICAgICAgbmV3U3RhcnREYXRlID0gYWRkVG9EYXRlKG5ld1N0YXJ0RGF0ZSwgLTEgKiBwcmVTdGVwc0NvdW50LCBcImRheVwiKTtcbiAgICAgIG5ld0VuZERhdGUgPSBzdGFydE9mRGF0ZShuZXdFbmREYXRlLCBcImRheVwiKTtcbiAgICAgIG5ld0VuZERhdGUgPSBhZGRUb0RhdGUobmV3RW5kRGF0ZSwgNjYsIFwiaG91clwiKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBWaWV3TW9kZS5IYWxmRGF5OlxuICAgICAgbmV3U3RhcnREYXRlID0gc3RhcnRPZkRhdGUobmV3U3RhcnREYXRlLCBcImRheVwiKTtcbiAgICAgIG5ld1N0YXJ0RGF0ZSA9IGFkZFRvRGF0ZShuZXdTdGFydERhdGUsIC0xICogcHJlU3RlcHNDb3VudCwgXCJkYXlcIik7XG4gICAgICBuZXdFbmREYXRlID0gc3RhcnRPZkRhdGUobmV3RW5kRGF0ZSwgXCJkYXlcIik7XG4gICAgICBuZXdFbmREYXRlID0gYWRkVG9EYXRlKG5ld0VuZERhdGUsIDEwOCwgXCJob3VyXCIpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZpZXdNb2RlLkhvdXI6XG4gICAgICBuZXdTdGFydERhdGUgPSBzdGFydE9mRGF0ZShuZXdTdGFydERhdGUsIFwiaG91clwiKTtcbiAgICAgIG5ld1N0YXJ0RGF0ZSA9IGFkZFRvRGF0ZShuZXdTdGFydERhdGUsIC0xICogcHJlU3RlcHNDb3VudCwgXCJob3VyXCIpO1xuICAgICAgbmV3RW5kRGF0ZSA9IHN0YXJ0T2ZEYXRlKG5ld0VuZERhdGUsIFwiZGF5XCIpO1xuICAgICAgbmV3RW5kRGF0ZSA9IGFkZFRvRGF0ZShuZXdFbmREYXRlLCAxLCBcImRheVwiKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIFtuZXdTdGFydERhdGUsIG5ld0VuZERhdGVdO1xufTtcbnZhciBzZWVkRGF0ZXMgPSBmdW5jdGlvbiBzZWVkRGF0ZXMoc3RhcnREYXRlLCBlbmREYXRlLCB2aWV3TW9kZSkge1xuICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xuICB2YXIgZGF0ZXMgPSBbY3VycmVudERhdGVdO1xuXG4gIHdoaWxlIChjdXJyZW50RGF0ZSA8IGVuZERhdGUpIHtcbiAgICBzd2l0Y2ggKHZpZXdNb2RlKSB7XG4gICAgICBjYXNlIFZpZXdNb2RlLlllYXI6XG4gICAgICAgIGN1cnJlbnREYXRlID0gYWRkVG9EYXRlKGN1cnJlbnREYXRlLCAxLCBcInllYXJcIik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFZpZXdNb2RlLk1vbnRoOlxuICAgICAgICBjdXJyZW50RGF0ZSA9IGFkZFRvRGF0ZShjdXJyZW50RGF0ZSwgMSwgXCJtb250aFwiKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVmlld01vZGUuV2VlazpcbiAgICAgICAgY3VycmVudERhdGUgPSBhZGRUb0RhdGUoY3VycmVudERhdGUsIDcsIFwiZGF5XCIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBWaWV3TW9kZS5EYXk6XG4gICAgICAgIGN1cnJlbnREYXRlID0gYWRkVG9EYXRlKGN1cnJlbnREYXRlLCAxLCBcImRheVwiKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVmlld01vZGUuSGFsZkRheTpcbiAgICAgICAgY3VycmVudERhdGUgPSBhZGRUb0RhdGUoY3VycmVudERhdGUsIDEyLCBcImhvdXJcIik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFZpZXdNb2RlLlF1YXJ0ZXJEYXk6XG4gICAgICAgIGN1cnJlbnREYXRlID0gYWRkVG9EYXRlKGN1cnJlbnREYXRlLCA2LCBcImhvdXJcIik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFZpZXdNb2RlLkhvdXI6XG4gICAgICAgIGN1cnJlbnREYXRlID0gYWRkVG9EYXRlKGN1cnJlbnREYXRlLCAxLCBcImhvdXJcIik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGRhdGVzLnB1c2goY3VycmVudERhdGUpO1xuICB9XG5cbiAgcmV0dXJuIGRhdGVzO1xufTtcbnZhciBnZXRMb2NhbGVNb250aCA9IGZ1bmN0aW9uIGdldExvY2FsZU1vbnRoKGRhdGUsIGxvY2FsZSkge1xuICB2YXIgYm90dG9tVmFsdWUgPSBnZXRDYWNoZWREYXRlVGltZUZvcm1hdChsb2NhbGUsIHtcbiAgICBtb250aDogXCJsb25nXCJcbiAgfSkuZm9ybWF0KGRhdGUpO1xuICBib3R0b21WYWx1ZSA9IGJvdHRvbVZhbHVlLnJlcGxhY2UoYm90dG9tVmFsdWVbMF0sIGJvdHRvbVZhbHVlWzBdLnRvTG9jYWxlVXBwZXJDYXNlKCkpO1xuICByZXR1cm4gYm90dG9tVmFsdWU7XG59O1xudmFyIGdldExvY2FsRGF5T2ZXZWVrID0gZnVuY3Rpb24gZ2V0TG9jYWxEYXlPZldlZWsoZGF0ZSwgbG9jYWxlLCBmb3JtYXQpIHtcbiAgdmFyIGJvdHRvbVZhbHVlID0gZ2V0Q2FjaGVkRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCB7XG4gICAgd2Vla2RheTogZm9ybWF0XG4gIH0pLmZvcm1hdChkYXRlKTtcbiAgYm90dG9tVmFsdWUgPSBib3R0b21WYWx1ZS5yZXBsYWNlKGJvdHRvbVZhbHVlWzBdLCBib3R0b21WYWx1ZVswXS50b0xvY2FsZVVwcGVyQ2FzZSgpKTtcbiAgcmV0dXJuIGJvdHRvbVZhbHVlO1xufTtcblxudmFyIGdldE1vbmRheSA9IGZ1bmN0aW9uIGdldE1vbmRheShkYXRlKSB7XG4gIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICB2YXIgZGlmZiA9IGRhdGUuZ2V0RGF0ZSgpIC0gZGF5ICsgKGRheSA9PT0gMCA/IC02IDogMSk7XG4gIHJldHVybiBuZXcgRGF0ZShkYXRlLnNldERhdGUoZGlmZikpO1xufTtcblxudmFyIGdldFdlZWtOdW1iZXJJU084NjAxID0gZnVuY3Rpb24gZ2V0V2Vla051bWJlcklTTzg2MDEoZGF0ZSkge1xuICB2YXIgdG1wRGF0ZSA9IG5ldyBEYXRlKGRhdGUudmFsdWVPZigpKTtcbiAgdmFyIGRheU51bWJlciA9ICh0bXBEYXRlLmdldERheSgpICsgNikgJSA3O1xuICB0bXBEYXRlLnNldERhdGUodG1wRGF0ZS5nZXREYXRlKCkgLSBkYXlOdW1iZXIgKyAzKTtcbiAgdmFyIGZpcnN0VGh1cnNkYXkgPSB0bXBEYXRlLnZhbHVlT2YoKTtcbiAgdG1wRGF0ZS5zZXRNb250aCgwLCAxKTtcblxuICBpZiAodG1wRGF0ZS5nZXREYXkoKSAhPT0gNCkge1xuICAgIHRtcERhdGUuc2V0TW9udGgoMCwgMSArICg0IC0gdG1wRGF0ZS5nZXREYXkoKSArIDcpICUgNyk7XG4gIH1cblxuICB2YXIgd2Vla051bWJlciA9ICgxICsgTWF0aC5jZWlsKChmaXJzdFRodXJzZGF5IC0gdG1wRGF0ZS52YWx1ZU9mKCkpIC8gNjA0ODAwMDAwKSkudG9TdHJpbmcoKTtcblxuICBpZiAod2Vla051bWJlci5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gXCIwXCIgKyB3ZWVrTnVtYmVyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB3ZWVrTnVtYmVyO1xuICB9XG59O1xudmFyIGdldERheXNJbk1vbnRoID0gZnVuY3Rpb24gZ2V0RGF5c0luTW9udGgobW9udGgsIHllYXIpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgMCkuZ2V0RGF0ZSgpO1xufTtcblxudmFyIHN0eWxlcyA9IHtcImdhbnR0VGFibGVcIjpcIl8zX3lnRVwiLFwiZ2FudHRUYWJsZV9IZWFkZXJcIjpcIl8xbkJPdFwiLFwiZ2FudHRUYWJsZV9IZWFkZXJTZXBhcmF0b3JcIjpcIl8yZVp6UVwiLFwiZ2FudHRUYWJsZV9IZWFkZXJJdGVtXCI6XCJfV3VRMGZcIn07XG5cbnZhciBUYXNrTGlzdEhlYWRlckRlZmF1bHQgPSBmdW5jdGlvbiBUYXNrTGlzdEhlYWRlckRlZmF1bHQoX3JlZikge1xuICB2YXIgaGVhZGVySGVpZ2h0ID0gX3JlZi5oZWFkZXJIZWlnaHQsXG4gICAgICBmb250RmFtaWx5ID0gX3JlZi5mb250RmFtaWx5LFxuICAgICAgZm9udFNpemUgPSBfcmVmLmZvbnRTaXplLFxuICAgICAgcm93V2lkdGggPSBfcmVmLnJvd1dpZHRoO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMuZ2FudHRUYWJsZSxcbiAgICBzdHlsZToge1xuICAgICAgZm9udEZhbWlseTogZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplOiBmb250U2l6ZVxuICAgIH1cbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMuZ2FudHRUYWJsZV9IZWFkZXIsXG4gICAgc3R5bGU6IHtcbiAgICAgIGhlaWdodDogaGVhZGVySGVpZ2h0IC0gMlxuICAgIH1cbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMuZ2FudHRUYWJsZV9IZWFkZXJJdGVtLFxuICAgIHN0eWxlOiB7XG4gICAgICBtaW5XaWR0aDogcm93V2lkdGhcbiAgICB9XG4gIH0sIFwiXFx4QTBOYW1lXCIpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcy5nYW50dFRhYmxlX0hlYWRlclNlcGFyYXRvcixcbiAgICBzdHlsZToge1xuICAgICAgaGVpZ2h0OiBoZWFkZXJIZWlnaHQgKiAwLjUsXG4gICAgICBtYXJnaW5Ub3A6IGhlYWRlckhlaWdodCAqIDAuMlxuICAgIH1cbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzLmdhbnR0VGFibGVfSGVhZGVySXRlbSxcbiAgICBzdHlsZToge1xuICAgICAgbWluV2lkdGg6IHJvd1dpZHRoXG4gICAgfVxuICB9LCBcIlxceEEwRnJvbVwiKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMuZ2FudHRUYWJsZV9IZWFkZXJTZXBhcmF0b3IsXG4gICAgc3R5bGU6IHtcbiAgICAgIGhlaWdodDogaGVhZGVySGVpZ2h0ICogMC41LFxuICAgICAgbWFyZ2luVG9wOiBoZWFkZXJIZWlnaHQgKiAwLjI1XG4gICAgfVxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMuZ2FudHRUYWJsZV9IZWFkZXJJdGVtLFxuICAgIHN0eWxlOiB7XG4gICAgICBtaW5XaWR0aDogcm93V2lkdGhcbiAgICB9XG4gIH0sIFwiXFx4QTBUb1wiKSkpO1xufTtcblxudmFyIHN0eWxlcyQxID0ge1widGFza0xpc3RXcmFwcGVyXCI6XCJfM1piUVRcIixcInRhc2tMaXN0VGFibGVSb3dcIjpcIl8zNFNTMFwiLFwidGFza0xpc3RDZWxsXCI6XCJfM2xMazNcIixcInRhc2tMaXN0TmFtZVdyYXBwZXJcIjpcIl9uSTFYd1wiLFwidGFza0xpc3RFeHBhbmRlclwiOlwiXzJRakU2XCIsXCJ0YXNrTGlzdEVtcHR5RXhwYW5kZXJcIjpcIl8yVGZFaVwifTtcblxudmFyIGxvY2FsZURhdGVTdHJpbmdDYWNoZSA9IHt9O1xuXG52YXIgdG9Mb2NhbGVEYXRlU3RyaW5nRmFjdG9yeSA9IGZ1bmN0aW9uIHRvTG9jYWxlRGF0ZVN0cmluZ0ZhY3RvcnkobG9jYWxlKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgZGF0ZVRpbWVPcHRpb25zKSB7XG4gICAgdmFyIGtleSA9IGRhdGUudG9TdHJpbmcoKTtcbiAgICB2YXIgbGRzID0gbG9jYWxlRGF0ZVN0cmluZ0NhY2hlW2tleV07XG5cbiAgICBpZiAoIWxkcykge1xuICAgICAgbGRzID0gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcobG9jYWxlLCBkYXRlVGltZU9wdGlvbnMpO1xuICAgICAgbG9jYWxlRGF0ZVN0cmluZ0NhY2hlW2tleV0gPSBsZHM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxkcztcbiAgfTtcbn07XG5cbnZhciBkYXRlVGltZU9wdGlvbnMgPSB7XG4gIHdlZWtkYXk6IFwic2hvcnRcIixcbiAgeWVhcjogXCJudW1lcmljXCIsXG4gIG1vbnRoOiBcImxvbmdcIixcbiAgZGF5OiBcIm51bWVyaWNcIlxufTtcbnZhciBUYXNrTGlzdFRhYmxlRGVmYXVsdCA9IGZ1bmN0aW9uIFRhc2tMaXN0VGFibGVEZWZhdWx0KF9yZWYpIHtcbiAgdmFyIHJvd0hlaWdodCA9IF9yZWYucm93SGVpZ2h0LFxuICAgICAgcm93V2lkdGggPSBfcmVmLnJvd1dpZHRoLFxuICAgICAgdGFza3MgPSBfcmVmLnRhc2tzLFxuICAgICAgZm9udEZhbWlseSA9IF9yZWYuZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplID0gX3JlZi5mb250U2l6ZSxcbiAgICAgIGxvY2FsZSA9IF9yZWYubG9jYWxlLFxuICAgICAgb25FeHBhbmRlckNsaWNrID0gX3JlZi5vbkV4cGFuZGVyQ2xpY2s7XG4gIHZhciB0b0xvY2FsZURhdGVTdHJpbmcgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdG9Mb2NhbGVEYXRlU3RyaW5nRmFjdG9yeShsb2NhbGUpO1xuICB9LCBbbG9jYWxlXSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQxLnRhc2tMaXN0V3JhcHBlcixcbiAgICBzdHlsZToge1xuICAgICAgZm9udEZhbWlseTogZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplOiBmb250U2l6ZVxuICAgIH1cbiAgfSwgdGFza3MubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgdmFyIGV4cGFuZGVyU3ltYm9sID0gXCJcIjtcblxuICAgIGlmICh0LmhpZGVDaGlsZHJlbiA9PT0gZmFsc2UpIHtcbiAgICAgIGV4cGFuZGVyU3ltYm9sID0gXCLilrxcIjtcbiAgICB9IGVsc2UgaWYgKHQuaGlkZUNoaWxkcmVuID09PSB0cnVlKSB7XG4gICAgICBleHBhbmRlclN5bWJvbCA9IFwi4pa2XCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkMS50YXNrTGlzdFRhYmxlUm93LFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgaGVpZ2h0OiByb3dIZWlnaHRcbiAgICAgIH0sXG4gICAgICBrZXk6IHQuaWQgKyBcInJvd1wiXG4gICAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IHN0eWxlcyQxLnRhc2tMaXN0Q2VsbCxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1pbldpZHRoOiByb3dXaWR0aCxcbiAgICAgICAgbWF4V2lkdGg6IHJvd1dpZHRoXG4gICAgICB9LFxuICAgICAgdGl0bGU6IHQubmFtZVxuICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkMS50YXNrTGlzdE5hbWVXcmFwcGVyXG4gICAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IGV4cGFuZGVyU3ltYm9sID8gc3R5bGVzJDEudGFza0xpc3RFeHBhbmRlciA6IHN0eWxlcyQxLnRhc2tMaXN0RW1wdHlFeHBhbmRlcixcbiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgIHJldHVybiBvbkV4cGFuZGVyQ2xpY2sodCk7XG4gICAgICB9XG4gICAgfSwgZXhwYW5kZXJTeW1ib2wpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIHQubmFtZSkpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IHN0eWxlcyQxLnRhc2tMaXN0Q2VsbCxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1pbldpZHRoOiByb3dXaWR0aCxcbiAgICAgICAgbWF4V2lkdGg6IHJvd1dpZHRoXG4gICAgICB9XG4gICAgfSwgXCJcXHhBMFwiLCB0b0xvY2FsZURhdGVTdHJpbmcodC5zdGFydCwgZGF0ZVRpbWVPcHRpb25zKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkMS50YXNrTGlzdENlbGwsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtaW5XaWR0aDogcm93V2lkdGgsXG4gICAgICAgIG1heFdpZHRoOiByb3dXaWR0aFxuICAgICAgfVxuICAgIH0sIFwiXFx4QTBcIiwgdG9Mb2NhbGVEYXRlU3RyaW5nKHQuZW5kLCBkYXRlVGltZU9wdGlvbnMpKSk7XG4gIH0pKTtcbn07XG5cbnZhciBzdHlsZXMkMiA9IHtcInRvb2x0aXBEZWZhdWx0Q29udGFpbmVyXCI6XCJfM1Q0MmVcIixcInRvb2x0aXBEZWZhdWx0Q29udGFpbmVyUGFyYWdyYXBoXCI6XCJfMjlOVGdcIixcInRvb2x0aXBEZXRhaWxzQ29udGFpbmVyXCI6XCJfMjVQLUtcIixcInRvb2x0aXBEZXRhaWxzQ29udGFpbmVySGlkZGVuXCI6XCJfM2dWQXFcIn07XG5cbnZhciBUb29sdGlwID0gZnVuY3Rpb24gVG9vbHRpcChfcmVmKSB7XG4gIHZhciB0YXNrID0gX3JlZi50YXNrLFxuICAgICAgcm93SGVpZ2h0ID0gX3JlZi5yb3dIZWlnaHQsXG4gICAgICBydGwgPSBfcmVmLnJ0bCxcbiAgICAgIHN2Z0NvbnRhaW5lckhlaWdodCA9IF9yZWYuc3ZnQ29udGFpbmVySGVpZ2h0LFxuICAgICAgc3ZnQ29udGFpbmVyV2lkdGggPSBfcmVmLnN2Z0NvbnRhaW5lcldpZHRoLFxuICAgICAgc2Nyb2xsWCA9IF9yZWYuc2Nyb2xsWCxcbiAgICAgIHNjcm9sbFkgPSBfcmVmLnNjcm9sbFksXG4gICAgICBhcnJvd0luZGVudCA9IF9yZWYuYXJyb3dJbmRlbnQsXG4gICAgICBmb250U2l6ZSA9IF9yZWYuZm9udFNpemUsXG4gICAgICBmb250RmFtaWx5ID0gX3JlZi5mb250RmFtaWx5LFxuICAgICAgaGVhZGVySGVpZ2h0ID0gX3JlZi5oZWFkZXJIZWlnaHQsXG4gICAgICB0YXNrTGlzdFdpZHRoID0gX3JlZi50YXNrTGlzdFdpZHRoLFxuICAgICAgVG9vbHRpcENvbnRlbnQgPSBfcmVmLlRvb2x0aXBDb250ZW50O1xuICB2YXIgdG9vbHRpcFJlZiA9IHVzZVJlZihudWxsKTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoMCksXG4gICAgICByZWxhdGVkWSA9IF91c2VTdGF0ZVswXSxcbiAgICAgIHNldFJlbGF0ZWRZID0gX3VzZVN0YXRlWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUyID0gdXNlU3RhdGUoMCksXG4gICAgICByZWxhdGVkWCA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRSZWxhdGVkWCA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodG9vbHRpcFJlZi5jdXJyZW50KSB7XG4gICAgICB2YXIgdG9vbHRpcEhlaWdodCA9IHRvb2x0aXBSZWYuY3VycmVudC5vZmZzZXRIZWlnaHQgKiAxLjE7XG4gICAgICB2YXIgdG9vbHRpcFdpZHRoID0gdG9vbHRpcFJlZi5jdXJyZW50Lm9mZnNldFdpZHRoICogMS4xO1xuICAgICAgdmFyIG5ld1JlbGF0ZWRZID0gdGFzay5pbmRleCAqIHJvd0hlaWdodCAtIHNjcm9sbFkgKyBoZWFkZXJIZWlnaHQ7XG4gICAgICB2YXIgbmV3UmVsYXRlZFg7XG5cbiAgICAgIGlmIChydGwpIHtcbiAgICAgICAgbmV3UmVsYXRlZFggPSB0YXNrLngxIC0gYXJyb3dJbmRlbnQgKiAxLjUgLSB0b29sdGlwV2lkdGggLSBzY3JvbGxYO1xuXG4gICAgICAgIGlmIChuZXdSZWxhdGVkWCA8IDApIHtcbiAgICAgICAgICBuZXdSZWxhdGVkWCA9IHRhc2sueDIgKyBhcnJvd0luZGVudCAqIDEuNSAtIHNjcm9sbFg7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9vbHRpcExlZnRtb3N0UG9pbnQgPSB0b29sdGlwV2lkdGggKyBuZXdSZWxhdGVkWDtcblxuICAgICAgICBpZiAodG9vbHRpcExlZnRtb3N0UG9pbnQgPiBzdmdDb250YWluZXJXaWR0aCkge1xuICAgICAgICAgIG5ld1JlbGF0ZWRYID0gc3ZnQ29udGFpbmVyV2lkdGggLSB0b29sdGlwV2lkdGg7XG4gICAgICAgICAgbmV3UmVsYXRlZFkgKz0gcm93SGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdSZWxhdGVkWCA9IHRhc2sueDIgKyBhcnJvd0luZGVudCAqIDEuNSArIHRhc2tMaXN0V2lkdGggLSBzY3JvbGxYO1xuXG4gICAgICAgIHZhciBfdG9vbHRpcExlZnRtb3N0UG9pbnQgPSB0b29sdGlwV2lkdGggKyBuZXdSZWxhdGVkWDtcblxuICAgICAgICB2YXIgZnVsbENoYXJ0V2lkdGggPSB0YXNrTGlzdFdpZHRoICsgc3ZnQ29udGFpbmVyV2lkdGg7XG5cbiAgICAgICAgaWYgKF90b29sdGlwTGVmdG1vc3RQb2ludCA+IGZ1bGxDaGFydFdpZHRoKSB7XG4gICAgICAgICAgbmV3UmVsYXRlZFggPSB0YXNrLngxICsgdGFza0xpc3RXaWR0aCAtIGFycm93SW5kZW50ICogMS41IC0gc2Nyb2xsWCAtIHRvb2x0aXBXaWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdSZWxhdGVkWCA8IHRhc2tMaXN0V2lkdGgpIHtcbiAgICAgICAgICBuZXdSZWxhdGVkWCA9IHN2Z0NvbnRhaW5lcldpZHRoICsgdGFza0xpc3RXaWR0aCAtIHRvb2x0aXBXaWR0aDtcbiAgICAgICAgICBuZXdSZWxhdGVkWSArPSByb3dIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHRvb2x0aXBMb3dlclBvaW50ID0gdG9vbHRpcEhlaWdodCArIG5ld1JlbGF0ZWRZIC0gc2Nyb2xsWTtcblxuICAgICAgaWYgKHRvb2x0aXBMb3dlclBvaW50ID4gc3ZnQ29udGFpbmVySGVpZ2h0IC0gc2Nyb2xsWSkge1xuICAgICAgICBuZXdSZWxhdGVkWSA9IHN2Z0NvbnRhaW5lckhlaWdodCAtIHRvb2x0aXBIZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIHNldFJlbGF0ZWRZKG5ld1JlbGF0ZWRZKTtcbiAgICAgIHNldFJlbGF0ZWRYKG5ld1JlbGF0ZWRYKTtcbiAgICB9XG4gIH0sIFt0b29sdGlwUmVmLCB0YXNrLCBhcnJvd0luZGVudCwgc2Nyb2xsWCwgc2Nyb2xsWSwgaGVhZGVySGVpZ2h0LCB0YXNrTGlzdFdpZHRoLCByb3dIZWlnaHQsIHN2Z0NvbnRhaW5lckhlaWdodCwgc3ZnQ29udGFpbmVyV2lkdGgsIHJ0bF0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcmVmOiB0b29sdGlwUmVmLFxuICAgIGNsYXNzTmFtZTogcmVsYXRlZFggPyBzdHlsZXMkMi50b29sdGlwRGV0YWlsc0NvbnRhaW5lciA6IHN0eWxlcyQyLnRvb2x0aXBEZXRhaWxzQ29udGFpbmVySGlkZGVuLFxuICAgIHN0eWxlOiB7XG4gICAgICBsZWZ0OiByZWxhdGVkWCxcbiAgICAgIHRvcDogcmVsYXRlZFlcbiAgICB9XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcENvbnRlbnQsIHtcbiAgICB0YXNrOiB0YXNrLFxuICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5XG4gIH0pKTtcbn07XG52YXIgU3RhbmRhcmRUb29sdGlwQ29udGVudCA9IGZ1bmN0aW9uIFN0YW5kYXJkVG9vbHRpcENvbnRlbnQoX3JlZjIpIHtcbiAgdmFyIHRhc2sgPSBfcmVmMi50YXNrLFxuICAgICAgZm9udFNpemUgPSBfcmVmMi5mb250U2l6ZSxcbiAgICAgIGZvbnRGYW1pbHkgPSBfcmVmMi5mb250RmFtaWx5O1xuICB2YXIgc3R5bGUgPSB7XG4gICAgZm9udFNpemU6IGZvbnRTaXplLFxuICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHlcbiAgfTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzJDIudG9vbHRpcERlZmF1bHRDb250YWluZXIsXG4gICAgc3R5bGU6IHN0eWxlXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJiXCIsIHtcbiAgICBzdHlsZToge1xuICAgICAgZm9udFNpemU6IGZvbnRTaXplICsgNlxuICAgIH1cbiAgfSwgdGFzay5uYW1lICsgXCI6IFwiICsgdGFzay5zdGFydC5nZXREYXRlKCkgKyBcIi1cIiArICh0YXNrLnN0YXJ0LmdldE1vbnRoKCkgKyAxKSArIFwiLVwiICsgdGFzay5zdGFydC5nZXRGdWxsWWVhcigpICsgXCIgLSBcIiArIHRhc2suZW5kLmdldERhdGUoKSArIFwiLVwiICsgKHRhc2suZW5kLmdldE1vbnRoKCkgKyAxKSArIFwiLVwiICsgdGFzay5lbmQuZ2V0RnVsbFllYXIoKSksIHRhc2suZW5kLmdldFRpbWUoKSAtIHRhc2suc3RhcnQuZ2V0VGltZSgpICE9PSAwICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwXCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQyLnRvb2x0aXBEZWZhdWx0Q29udGFpbmVyUGFyYWdyYXBoXG4gIH0sIFwiRHVyYXRpb246IFwiICsgfn4oKHRhc2suZW5kLmdldFRpbWUoKSAtIHRhc2suc3RhcnQuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSkgKyBcIiBkYXkocylcIiksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwXCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQyLnRvb2x0aXBEZWZhdWx0Q29udGFpbmVyUGFyYWdyYXBoXG4gIH0sICEhdGFzay5wcm9ncmVzcyAmJiBcIlByb2dyZXNzOiBcIiArIHRhc2sucHJvZ3Jlc3MgKyBcIiAlXCIpKTtcbn07XG5cbnZhciBzdHlsZXMkMyA9IHtcInNjcm9sbFwiOlwiXzFlVC10XCJ9O1xuXG52YXIgVmVydGljYWxTY3JvbGwgPSBmdW5jdGlvbiBWZXJ0aWNhbFNjcm9sbChfcmVmKSB7XG4gIHZhciBzY3JvbGwgPSBfcmVmLnNjcm9sbCxcbiAgICAgIGdhbnR0SGVpZ2h0ID0gX3JlZi5nYW50dEhlaWdodCxcbiAgICAgIGdhbnR0RnVsbEhlaWdodCA9IF9yZWYuZ2FudHRGdWxsSGVpZ2h0LFxuICAgICAgaGVhZGVySGVpZ2h0ID0gX3JlZi5oZWFkZXJIZWlnaHQsXG4gICAgICBydGwgPSBfcmVmLnJ0bCxcbiAgICAgIG9uU2Nyb2xsID0gX3JlZi5vblNjcm9sbDtcbiAgdmFyIHNjcm9sbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2Nyb2xsUmVmLmN1cnJlbnQpIHtcbiAgICAgIHNjcm9sbFJlZi5jdXJyZW50LnNjcm9sbFRvcCA9IHNjcm9sbDtcbiAgICB9XG4gIH0sIFtzY3JvbGxdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHN0eWxlOiB7XG4gICAgICBoZWlnaHQ6IGdhbnR0SGVpZ2h0LFxuICAgICAgbWFyZ2luVG9wOiBoZWFkZXJIZWlnaHQsXG4gICAgICBtYXJnaW5MZWZ0OiBydGwgPyBcIlwiIDogXCItMXJlbVwiXG4gICAgfSxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQzLnNjcm9sbCxcbiAgICBvblNjcm9sbDogb25TY3JvbGwsXG4gICAgcmVmOiBzY3JvbGxSZWZcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgc3R5bGU6IHtcbiAgICAgIGhlaWdodDogZ2FudHRGdWxsSGVpZ2h0LFxuICAgICAgd2lkdGg6IDFcbiAgICB9XG4gIH0pKTtcbn07XG5cbnZhciBUYXNrTGlzdCA9IGZ1bmN0aW9uIFRhc2tMaXN0KF9yZWYpIHtcbiAgdmFyIGhlYWRlckhlaWdodCA9IF9yZWYuaGVhZGVySGVpZ2h0LFxuICAgICAgZm9udEZhbWlseSA9IF9yZWYuZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplID0gX3JlZi5mb250U2l6ZSxcbiAgICAgIHJvd1dpZHRoID0gX3JlZi5yb3dXaWR0aCxcbiAgICAgIHJvd0hlaWdodCA9IF9yZWYucm93SGVpZ2h0LFxuICAgICAgc2Nyb2xsWSA9IF9yZWYuc2Nyb2xsWSxcbiAgICAgIHRhc2tzID0gX3JlZi50YXNrcyxcbiAgICAgIHNlbGVjdGVkVGFzayA9IF9yZWYuc2VsZWN0ZWRUYXNrLFxuICAgICAgc2V0U2VsZWN0ZWRUYXNrID0gX3JlZi5zZXRTZWxlY3RlZFRhc2ssXG4gICAgICBvbkV4cGFuZGVyQ2xpY2sgPSBfcmVmLm9uRXhwYW5kZXJDbGljayxcbiAgICAgIGxvY2FsZSA9IF9yZWYubG9jYWxlLFxuICAgICAgZ2FudHRIZWlnaHQgPSBfcmVmLmdhbnR0SGVpZ2h0LFxuICAgICAgdGFza0xpc3RSZWYgPSBfcmVmLnRhc2tMaXN0UmVmLFxuICAgICAgaG9yaXpvbnRhbENvbnRhaW5lckNsYXNzID0gX3JlZi5ob3Jpem9udGFsQ29udGFpbmVyQ2xhc3MsXG4gICAgICBUYXNrTGlzdEhlYWRlciA9IF9yZWYuVGFza0xpc3RIZWFkZXIsXG4gICAgICBUYXNrTGlzdFRhYmxlID0gX3JlZi5UYXNrTGlzdFRhYmxlO1xuICB2YXIgaG9yaXpvbnRhbENvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaG9yaXpvbnRhbENvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBob3Jpem9udGFsQ29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsVG9wID0gc2Nyb2xsWTtcbiAgICB9XG4gIH0sIFtzY3JvbGxZXSk7XG4gIHZhciBoZWFkZXJQcm9wcyA9IHtcbiAgICBoZWFkZXJIZWlnaHQ6IGhlYWRlckhlaWdodCxcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5LFxuICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICByb3dXaWR0aDogcm93V2lkdGhcbiAgfTtcbiAgdmFyIHNlbGVjdGVkVGFza0lkID0gc2VsZWN0ZWRUYXNrID8gc2VsZWN0ZWRUYXNrLmlkIDogXCJcIjtcbiAgdmFyIHRhYmxlUHJvcHMgPSB7XG4gICAgcm93SGVpZ2h0OiByb3dIZWlnaHQsXG4gICAgcm93V2lkdGg6IHJvd1dpZHRoLFxuICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgZm9udFNpemU6IGZvbnRTaXplLFxuICAgIHRhc2tzOiB0YXNrcyxcbiAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICBzZWxlY3RlZFRhc2tJZDogc2VsZWN0ZWRUYXNrSWQsXG4gICAgc2V0U2VsZWN0ZWRUYXNrOiBzZXRTZWxlY3RlZFRhc2ssXG4gICAgb25FeHBhbmRlckNsaWNrOiBvbkV4cGFuZGVyQ2xpY2tcbiAgfTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHJlZjogdGFza0xpc3RSZWZcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChUYXNrTGlzdEhlYWRlciwgT2JqZWN0LmFzc2lnbih7fSwgaGVhZGVyUHJvcHMpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcmVmOiBob3Jpem9udGFsQ29udGFpbmVyUmVmLFxuICAgIGNsYXNzTmFtZTogaG9yaXpvbnRhbENvbnRhaW5lckNsYXNzLFxuICAgIHN0eWxlOiBnYW50dEhlaWdodCA/IHtcbiAgICAgIGhlaWdodDogZ2FudHRIZWlnaHRcbiAgICB9IDoge31cbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChUYXNrTGlzdFRhYmxlLCBPYmplY3QuYXNzaWduKHt9LCB0YWJsZVByb3BzKSkpKTtcbn07XG5cbnZhciBzdHlsZXMkNCA9IHtcImdyaWRSb3dcIjpcIl8yZFpUeVwiLFwiZ3JpZFJvd0xpbmVcIjpcIl8zclVLaVwiLFwiZ3JpZFRpY2tcIjpcIl9SdXd1S1wifTtcblxudmFyIEdyaWRCb2R5ID0gZnVuY3Rpb24gR3JpZEJvZHkoX3JlZikge1xuICB2YXIgdGFza3MgPSBfcmVmLnRhc2tzLFxuICAgICAgZGF0ZXMgPSBfcmVmLmRhdGVzLFxuICAgICAgcm93SGVpZ2h0ID0gX3JlZi5yb3dIZWlnaHQsXG4gICAgICBzdmdXaWR0aCA9IF9yZWYuc3ZnV2lkdGgsXG4gICAgICBjb2x1bW5XaWR0aCA9IF9yZWYuY29sdW1uV2lkdGgsXG4gICAgICB0b2RheUNvbG9yID0gX3JlZi50b2RheUNvbG9yLFxuICAgICAgcnRsID0gX3JlZi5ydGw7XG4gIHZhciB5ID0gMDtcbiAgdmFyIGdyaWRSb3dzID0gW107XG4gIHZhciByb3dMaW5lcyA9IFtSZWFjdC5jcmVhdGVFbGVtZW50KFwibGluZVwiLCB7XG4gICAga2V5OiBcIlJvd0xpbmVGaXJzdFwiLFxuICAgIHg6IFwiMFwiLFxuICAgIHkxOiAwLFxuICAgIHgyOiBzdmdXaWR0aCxcbiAgICB5MjogMCxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ0LmdyaWRSb3dMaW5lXG4gIH0pXTtcblxuICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRhc2tzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICB2YXIgdGFzayA9IF9zdGVwLnZhbHVlO1xuICAgIGdyaWRSb3dzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgICAga2V5OiBcIlJvd1wiICsgdGFzay5pZCxcbiAgICAgIHg6IFwiMFwiLFxuICAgICAgeTogeSxcbiAgICAgIHdpZHRoOiBzdmdXaWR0aCxcbiAgICAgIGhlaWdodDogcm93SGVpZ2h0LFxuICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkNC5ncmlkUm93XG4gICAgfSkpO1xuICAgIHJvd0xpbmVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChcImxpbmVcIiwge1xuICAgICAga2V5OiBcIlJvd0xpbmVcIiArIHRhc2suaWQsXG4gICAgICB4OiBcIjBcIixcbiAgICAgIHkxOiB5ICsgcm93SGVpZ2h0LFxuICAgICAgeDI6IHN2Z1dpZHRoLFxuICAgICAgeTI6IHkgKyByb3dIZWlnaHQsXG4gICAgICBjbGFzc05hbWU6IHN0eWxlcyQ0LmdyaWRSb3dMaW5lXG4gICAgfSkpO1xuICAgIHkgKz0gcm93SGVpZ2h0O1xuICB9XG5cbiAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aWNrWCA9IDA7XG4gIHZhciB0aWNrcyA9IFtdO1xuICB2YXIgdG9kYXkgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCBudWxsKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRhdGUgPSBkYXRlc1tpXTtcbiAgICB0aWNrcy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaW5lXCIsIHtcbiAgICAgIGtleTogZGF0ZS5nZXRUaW1lKCksXG4gICAgICB4MTogdGlja1gsXG4gICAgICB5MTogMCxcbiAgICAgIHgyOiB0aWNrWCxcbiAgICAgIHkyOiB5LFxuICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkNC5ncmlkVGlja1xuICAgIH0pKTtcblxuICAgIGlmIChpICsgMSAhPT0gZGF0ZXMubGVuZ3RoICYmIGRhdGUuZ2V0VGltZSgpIDwgbm93LmdldFRpbWUoKSAmJiBkYXRlc1tpICsgMV0uZ2V0VGltZSgpID49IG5vdy5nZXRUaW1lKCkgfHwgaSAhPT0gMCAmJiBpICsgMSA9PT0gZGF0ZXMubGVuZ3RoICYmIGRhdGUuZ2V0VGltZSgpIDwgbm93LmdldFRpbWUoKSAmJiBhZGRUb0RhdGUoZGF0ZSwgZGF0ZS5nZXRUaW1lKCkgLSBkYXRlc1tpIC0gMV0uZ2V0VGltZSgpLCBcIm1pbGxpc2Vjb25kXCIpLmdldFRpbWUoKSA+PSBub3cuZ2V0VGltZSgpKSB7XG4gICAgICB0b2RheSA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIsIHtcbiAgICAgICAgeDogdGlja1gsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIHdpZHRoOiBjb2x1bW5XaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB5LFxuICAgICAgICBmaWxsOiB0b2RheUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocnRsICYmIGkgKyAxICE9PSBkYXRlcy5sZW5ndGggJiYgZGF0ZS5nZXRUaW1lKCkgPj0gbm93LmdldFRpbWUoKSAmJiBkYXRlc1tpICsgMV0uZ2V0VGltZSgpIDwgbm93LmdldFRpbWUoKSkge1xuICAgICAgdG9kYXkgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7XG4gICAgICAgIHg6IHRpY2tYICsgY29sdW1uV2lkdGgsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIHdpZHRoOiBjb2x1bW5XaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB5LFxuICAgICAgICBmaWxsOiB0b2RheUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aWNrWCArPSBjb2x1bW5XaWR0aDtcbiAgfVxuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcImdyaWRCb2R5XCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJyb3dzXCJcbiAgfSwgZ3JpZFJvd3MpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcInJvd0xpbmVzXCJcbiAgfSwgcm93TGluZXMpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcInRpY2tzXCJcbiAgfSwgdGlja3MpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcInRvZGF5XCJcbiAgfSwgdG9kYXkpKTtcbn07XG5cbnZhciBHcmlkID0gZnVuY3Rpb24gR3JpZChwcm9wcykge1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJncmlkXCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChHcmlkQm9keSwgT2JqZWN0LmFzc2lnbih7fSwgcHJvcHMpKSk7XG59O1xuXG52YXIgc3R5bGVzJDUgPSB7XCJjYWxlbmRhckJvdHRvbVRleHRcIjpcIl85dzhkNVwiLFwiY2FsZW5kYXJUb3BUaWNrXCI6XCJfMXJMdVpcIixcImNhbGVuZGFyVG9wVGV4dFwiOlwiXzJxMUt0XCIsXCJjYWxlbmRhckhlYWRlclwiOlwiXzM1bkxYXCJ9O1xuXG52YXIgVG9wUGFydE9mQ2FsZW5kYXIgPSBmdW5jdGlvbiBUb3BQYXJ0T2ZDYWxlbmRhcihfcmVmKSB7XG4gIHZhciB2YWx1ZSA9IF9yZWYudmFsdWUsXG4gICAgICB4MUxpbmUgPSBfcmVmLngxTGluZSxcbiAgICAgIHkxTGluZSA9IF9yZWYueTFMaW5lLFxuICAgICAgeTJMaW5lID0gX3JlZi55MkxpbmUsXG4gICAgICB4VGV4dCA9IF9yZWYueFRleHQsXG4gICAgICB5VGV4dCA9IF9yZWYueVRleHQ7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhbGVuZGFyVG9wXCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImxpbmVcIiwge1xuICAgIHgxOiB4MUxpbmUsXG4gICAgeTE6IHkxTGluZSxcbiAgICB4MjogeDFMaW5lLFxuICAgIHkyOiB5MkxpbmUsXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkNS5jYWxlbmRhclRvcFRpY2ssXG4gICAga2V5OiB2YWx1ZSArIFwibGluZVwiXG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwidGV4dFwiLCB7XG4gICAga2V5OiB2YWx1ZSArIFwidGV4dFwiLFxuICAgIHk6IHlUZXh0LFxuICAgIHg6IHhUZXh0LFxuICAgIGNsYXNzTmFtZTogc3R5bGVzJDUuY2FsZW5kYXJUb3BUZXh0XG4gIH0sIHZhbHVlKSk7XG59O1xuXG52YXIgQ2FsZW5kYXIgPSBmdW5jdGlvbiBDYWxlbmRhcihfcmVmKSB7XG4gIHZhciBkYXRlU2V0dXAgPSBfcmVmLmRhdGVTZXR1cCxcbiAgICAgIGxvY2FsZSA9IF9yZWYubG9jYWxlLFxuICAgICAgdmlld01vZGUgPSBfcmVmLnZpZXdNb2RlLFxuICAgICAgcnRsID0gX3JlZi5ydGwsXG4gICAgICBoZWFkZXJIZWlnaHQgPSBfcmVmLmhlYWRlckhlaWdodCxcbiAgICAgIGNvbHVtbldpZHRoID0gX3JlZi5jb2x1bW5XaWR0aCxcbiAgICAgIGZvbnRGYW1pbHkgPSBfcmVmLmZvbnRGYW1pbHksXG4gICAgICBmb250U2l6ZSA9IF9yZWYuZm9udFNpemU7XG5cbiAgdmFyIGdldENhbGVuZGFyVmFsdWVzRm9yWWVhciA9IGZ1bmN0aW9uIGdldENhbGVuZGFyVmFsdWVzRm9yWWVhcigpIHtcbiAgICB2YXIgdG9wVmFsdWVzID0gW107XG4gICAgdmFyIGJvdHRvbVZhbHVlcyA9IFtdO1xuICAgIHZhciB0b3BEZWZhdWx0SGVpZ2h0ID0gaGVhZGVySGVpZ2h0ICogMC41O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRlU2V0dXAuZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkYXRlID0gZGF0ZVNldHVwLmRhdGVzW2ldO1xuICAgICAgdmFyIGJvdHRvbVZhbHVlID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgYm90dG9tVmFsdWVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChcInRleHRcIiwge1xuICAgICAgICBrZXk6IGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgeTogaGVhZGVySGVpZ2h0ICogMC44LFxuICAgICAgICB4OiBjb2x1bW5XaWR0aCAqIGkgKyBjb2x1bW5XaWR0aCAqIDAuNSxcbiAgICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkNS5jYWxlbmRhckJvdHRvbVRleHRcbiAgICAgIH0sIGJvdHRvbVZhbHVlKSk7XG5cbiAgICAgIGlmIChpID09PSAwIHx8IGRhdGUuZ2V0RnVsbFllYXIoKSAhPT0gZGF0ZVNldHVwLmRhdGVzW2kgLSAxXS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgIHZhciB0b3BWYWx1ZSA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuICAgICAgICB2YXIgeFRleHQgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKHJ0bCkge1xuICAgICAgICAgIHhUZXh0ID0gKDYgKyBpICsgZGF0ZS5nZXRGdWxsWWVhcigpICsgMSkgKiBjb2x1bW5XaWR0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB4VGV4dCA9ICg2ICsgaSAtIGRhdGUuZ2V0RnVsbFllYXIoKSkgKiBjb2x1bW5XaWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvcFZhbHVlcy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9wUGFydE9mQ2FsZW5kYXIsIHtcbiAgICAgICAgICBrZXk6IHRvcFZhbHVlLFxuICAgICAgICAgIHZhbHVlOiB0b3BWYWx1ZSxcbiAgICAgICAgICB4MUxpbmU6IGNvbHVtbldpZHRoICogaSxcbiAgICAgICAgICB5MUxpbmU6IDAsXG4gICAgICAgICAgeTJMaW5lOiBoZWFkZXJIZWlnaHQsXG4gICAgICAgICAgeFRleHQ6IHhUZXh0LFxuICAgICAgICAgIHlUZXh0OiB0b3BEZWZhdWx0SGVpZ2h0ICogMC45XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3RvcFZhbHVlcywgYm90dG9tVmFsdWVzXTtcbiAgfTtcblxuICB2YXIgZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JNb250aCA9IGZ1bmN0aW9uIGdldENhbGVuZGFyVmFsdWVzRm9yTW9udGgoKSB7XG4gICAgdmFyIHRvcFZhbHVlcyA9IFtdO1xuICAgIHZhciBib3R0b21WYWx1ZXMgPSBbXTtcbiAgICB2YXIgdG9wRGVmYXVsdEhlaWdodCA9IGhlYWRlckhlaWdodCAqIDAuNTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0ZVNldHVwLmRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGF0ZSA9IGRhdGVTZXR1cC5kYXRlc1tpXTtcbiAgICAgIHZhciBib3R0b21WYWx1ZSA9IGdldExvY2FsZU1vbnRoKGRhdGUsIGxvY2FsZSk7XG4gICAgICBib3R0b21WYWx1ZXMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFwidGV4dFwiLCB7XG4gICAgICAgIGtleTogYm90dG9tVmFsdWUgKyBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgIHk6IGhlYWRlckhlaWdodCAqIDAuOCxcbiAgICAgICAgeDogY29sdW1uV2lkdGggKiBpICsgY29sdW1uV2lkdGggKiAwLjUsXG4gICAgICAgIGNsYXNzTmFtZTogc3R5bGVzJDUuY2FsZW5kYXJCb3R0b21UZXh0XG4gICAgICB9LCBib3R0b21WYWx1ZSkpO1xuXG4gICAgICBpZiAoaSA9PT0gMCB8fCBkYXRlLmdldEZ1bGxZZWFyKCkgIT09IGRhdGVTZXR1cC5kYXRlc1tpIC0gMV0uZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICB2YXIgdG9wVmFsdWUgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtcbiAgICAgICAgdmFyIHhUZXh0ID0gdm9pZCAwO1xuXG4gICAgICAgIGlmIChydGwpIHtcbiAgICAgICAgICB4VGV4dCA9ICg2ICsgaSArIGRhdGUuZ2V0TW9udGgoKSArIDEpICogY29sdW1uV2lkdGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgeFRleHQgPSAoNiArIGkgLSBkYXRlLmdldE1vbnRoKCkpICogY29sdW1uV2lkdGg7XG4gICAgICAgIH1cblxuICAgICAgICB0b3BWYWx1ZXMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFRvcFBhcnRPZkNhbGVuZGFyLCB7XG4gICAgICAgICAga2V5OiB0b3BWYWx1ZSxcbiAgICAgICAgICB2YWx1ZTogdG9wVmFsdWUsXG4gICAgICAgICAgeDFMaW5lOiBjb2x1bW5XaWR0aCAqIGksXG4gICAgICAgICAgeTFMaW5lOiAwLFxuICAgICAgICAgIHkyTGluZTogdG9wRGVmYXVsdEhlaWdodCxcbiAgICAgICAgICB4VGV4dDogeFRleHQsXG4gICAgICAgICAgeVRleHQ6IHRvcERlZmF1bHRIZWlnaHQgKiAwLjlcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbdG9wVmFsdWVzLCBib3R0b21WYWx1ZXNdO1xuICB9O1xuXG4gIHZhciBnZXRDYWxlbmRhclZhbHVlc0ZvcldlZWsgPSBmdW5jdGlvbiBnZXRDYWxlbmRhclZhbHVlc0ZvcldlZWsoKSB7XG4gICAgdmFyIHRvcFZhbHVlcyA9IFtdO1xuICAgIHZhciBib3R0b21WYWx1ZXMgPSBbXTtcbiAgICB2YXIgd2Vla3NDb3VudCA9IDE7XG4gICAgdmFyIHRvcERlZmF1bHRIZWlnaHQgPSBoZWFkZXJIZWlnaHQgKiAwLjU7XG4gICAgdmFyIGRhdGVzID0gZGF0ZVNldHVwLmRhdGVzO1xuXG4gICAgZm9yICh2YXIgaSA9IGRhdGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgZGF0ZSA9IGRhdGVzW2ldO1xuICAgICAgdmFyIHRvcFZhbHVlID0gXCJcIjtcblxuICAgICAgaWYgKGkgPT09IDAgfHwgZGF0ZS5nZXRNb250aCgpICE9PSBkYXRlc1tpIC0gMV0uZ2V0TW9udGgoKSkge1xuICAgICAgICB0b3BWYWx1ZSA9IGdldExvY2FsZU1vbnRoKGRhdGUsIGxvY2FsZSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBib3R0b21WYWx1ZSA9IFwiV1wiICsgZ2V0V2Vla051bWJlcklTTzg2MDEoZGF0ZSk7XG4gICAgICBib3R0b21WYWx1ZXMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFwidGV4dFwiLCB7XG4gICAgICAgIGtleTogZGF0ZS5nZXRUaW1lKCksXG4gICAgICAgIHk6IGhlYWRlckhlaWdodCAqIDAuOCxcbiAgICAgICAgeDogY29sdW1uV2lkdGggKiAoaSArICtydGwpLFxuICAgICAgICBjbGFzc05hbWU6IHN0eWxlcyQ1LmNhbGVuZGFyQm90dG9tVGV4dFxuICAgICAgfSwgYm90dG9tVmFsdWUpKTtcblxuICAgICAgaWYgKHRvcFZhbHVlKSB7XG4gICAgICAgIGlmIChpICE9PSBkYXRlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgdG9wVmFsdWVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChUb3BQYXJ0T2ZDYWxlbmRhciwge1xuICAgICAgICAgICAga2V5OiB0b3BWYWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0b3BWYWx1ZSxcbiAgICAgICAgICAgIHgxTGluZTogY29sdW1uV2lkdGggKiBpICsgd2Vla3NDb3VudCAqIGNvbHVtbldpZHRoLFxuICAgICAgICAgICAgeTFMaW5lOiAwLFxuICAgICAgICAgICAgeTJMaW5lOiB0b3BEZWZhdWx0SGVpZ2h0LFxuICAgICAgICAgICAgeFRleHQ6IGNvbHVtbldpZHRoICogaSArIGNvbHVtbldpZHRoICogd2Vla3NDb3VudCAqIDAuNSxcbiAgICAgICAgICAgIHlUZXh0OiB0b3BEZWZhdWx0SGVpZ2h0ICogMC45XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgd2Vla3NDb3VudCA9IDA7XG4gICAgICB9XG5cbiAgICAgIHdlZWtzQ291bnQrKztcbiAgICB9XG5cbiAgICByZXR1cm4gW3RvcFZhbHVlcywgYm90dG9tVmFsdWVzXTtcbiAgfTtcblxuICB2YXIgZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JEYXkgPSBmdW5jdGlvbiBnZXRDYWxlbmRhclZhbHVlc0ZvckRheSgpIHtcbiAgICB2YXIgdG9wVmFsdWVzID0gW107XG4gICAgdmFyIGJvdHRvbVZhbHVlcyA9IFtdO1xuICAgIHZhciB0b3BEZWZhdWx0SGVpZ2h0ID0gaGVhZGVySGVpZ2h0ICogMC41O1xuICAgIHZhciBkYXRlcyA9IGRhdGVTZXR1cC5kYXRlcztcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkYXRlID0gZGF0ZXNbaV07XG4gICAgICB2YXIgYm90dG9tVmFsdWUgPSBnZXRMb2NhbERheU9mV2VlayhkYXRlLCBsb2NhbGUsIFwic2hvcnRcIikgKyBcIiwgXCIgKyBkYXRlLmdldERhdGUoKS50b1N0cmluZygpO1xuICAgICAgYm90dG9tVmFsdWVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChcInRleHRcIiwge1xuICAgICAgICBrZXk6IGRhdGUuZ2V0VGltZSgpLFxuICAgICAgICB5OiBoZWFkZXJIZWlnaHQgKiAwLjgsXG4gICAgICAgIHg6IGNvbHVtbldpZHRoICogaSArIGNvbHVtbldpZHRoICogMC41LFxuICAgICAgICBjbGFzc05hbWU6IHN0eWxlcyQ1LmNhbGVuZGFyQm90dG9tVGV4dFxuICAgICAgfSwgYm90dG9tVmFsdWUpKTtcblxuICAgICAgaWYgKGkgKyAxICE9PSBkYXRlcy5sZW5ndGggJiYgZGF0ZS5nZXRNb250aCgpICE9PSBkYXRlc1tpICsgMV0uZ2V0TW9udGgoKSkge1xuICAgICAgICB2YXIgdG9wVmFsdWUgPSBnZXRMb2NhbGVNb250aChkYXRlLCBsb2NhbGUpO1xuICAgICAgICB0b3BWYWx1ZXMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFRvcFBhcnRPZkNhbGVuZGFyLCB7XG4gICAgICAgICAga2V5OiB0b3BWYWx1ZSArIGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgICB2YWx1ZTogdG9wVmFsdWUsXG4gICAgICAgICAgeDFMaW5lOiBjb2x1bW5XaWR0aCAqIChpICsgMSksXG4gICAgICAgICAgeTFMaW5lOiAwLFxuICAgICAgICAgIHkyTGluZTogdG9wRGVmYXVsdEhlaWdodCxcbiAgICAgICAgICB4VGV4dDogY29sdW1uV2lkdGggKiAoaSArIDEpIC0gZ2V0RGF5c0luTW9udGgoZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldEZ1bGxZZWFyKCkpICogY29sdW1uV2lkdGggKiAwLjUsXG4gICAgICAgICAgeVRleHQ6IHRvcERlZmF1bHRIZWlnaHQgKiAwLjlcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbdG9wVmFsdWVzLCBib3R0b21WYWx1ZXNdO1xuICB9O1xuXG4gIHZhciBnZXRDYWxlbmRhclZhbHVlc0ZvclBhcnRPZkRheSA9IGZ1bmN0aW9uIGdldENhbGVuZGFyVmFsdWVzRm9yUGFydE9mRGF5KCkge1xuICAgIHZhciB0b3BWYWx1ZXMgPSBbXTtcbiAgICB2YXIgYm90dG9tVmFsdWVzID0gW107XG4gICAgdmFyIHRpY2tzID0gdmlld01vZGUgPT09IFZpZXdNb2RlLkhhbGZEYXkgPyAyIDogNDtcbiAgICB2YXIgdG9wRGVmYXVsdEhlaWdodCA9IGhlYWRlckhlaWdodCAqIDAuNTtcbiAgICB2YXIgZGF0ZXMgPSBkYXRlU2V0dXAuZGF0ZXM7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGF0ZSA9IGRhdGVzW2ldO1xuICAgICAgdmFyIGJvdHRvbVZhbHVlID0gZ2V0Q2FjaGVkRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCB7XG4gICAgICAgIGhvdXI6IFwibnVtZXJpY1wiXG4gICAgICB9KS5mb3JtYXQoZGF0ZSk7XG4gICAgICBib3R0b21WYWx1ZXMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFwidGV4dFwiLCB7XG4gICAgICAgIGtleTogZGF0ZS5nZXRUaW1lKCksXG4gICAgICAgIHk6IGhlYWRlckhlaWdodCAqIDAuOCxcbiAgICAgICAgeDogY29sdW1uV2lkdGggKiAoaSArICtydGwpLFxuICAgICAgICBjbGFzc05hbWU6IHN0eWxlcyQ1LmNhbGVuZGFyQm90dG9tVGV4dCxcbiAgICAgICAgZm9udEZhbWlseTogZm9udEZhbWlseVxuICAgICAgfSwgYm90dG9tVmFsdWUpKTtcblxuICAgICAgaWYgKGkgPT09IDAgfHwgZGF0ZS5nZXREYXRlKCkgIT09IGRhdGVzW2kgLSAxXS5nZXREYXRlKCkpIHtcbiAgICAgICAgdmFyIHRvcFZhbHVlID0gZ2V0TG9jYWxEYXlPZldlZWsoZGF0ZSwgbG9jYWxlLCBcInNob3J0XCIpICsgXCIsIFwiICsgZGF0ZS5nZXREYXRlKCkgKyBcIiBcIiArIGdldExvY2FsZU1vbnRoKGRhdGUsIGxvY2FsZSk7XG4gICAgICAgIHRvcFZhbHVlcy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9wUGFydE9mQ2FsZW5kYXIsIHtcbiAgICAgICAgICBrZXk6IHRvcFZhbHVlICsgZGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgIHZhbHVlOiB0b3BWYWx1ZSxcbiAgICAgICAgICB4MUxpbmU6IGNvbHVtbldpZHRoICogaSArIHRpY2tzICogY29sdW1uV2lkdGgsXG4gICAgICAgICAgeTFMaW5lOiAwLFxuICAgICAgICAgIHkyTGluZTogdG9wRGVmYXVsdEhlaWdodCxcbiAgICAgICAgICB4VGV4dDogY29sdW1uV2lkdGggKiBpICsgdGlja3MgKiBjb2x1bW5XaWR0aCAqIDAuNSxcbiAgICAgICAgICB5VGV4dDogdG9wRGVmYXVsdEhlaWdodCAqIDAuOVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFt0b3BWYWx1ZXMsIGJvdHRvbVZhbHVlc107XG4gIH07XG5cbiAgdmFyIGdldENhbGVuZGFyVmFsdWVzRm9ySG91ciA9IGZ1bmN0aW9uIGdldENhbGVuZGFyVmFsdWVzRm9ySG91cigpIHtcbiAgICB2YXIgdG9wVmFsdWVzID0gW107XG4gICAgdmFyIGJvdHRvbVZhbHVlcyA9IFtdO1xuICAgIHZhciB0b3BEZWZhdWx0SGVpZ2h0ID0gaGVhZGVySGVpZ2h0ICogMC41O1xuICAgIHZhciBkYXRlcyA9IGRhdGVTZXR1cC5kYXRlcztcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkYXRlID0gZGF0ZXNbaV07XG4gICAgICB2YXIgYm90dG9tVmFsdWUgPSBnZXRDYWNoZWREYXRlVGltZUZvcm1hdChsb2NhbGUsIHtcbiAgICAgICAgaG91cjogXCJudW1lcmljXCJcbiAgICAgIH0pLmZvcm1hdChkYXRlKTtcbiAgICAgIGJvdHRvbVZhbHVlcy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0XCIsIHtcbiAgICAgICAga2V5OiBkYXRlLmdldFRpbWUoKSxcbiAgICAgICAgeTogaGVhZGVySGVpZ2h0ICogMC44LFxuICAgICAgICB4OiBjb2x1bW5XaWR0aCAqIChpICsgK3J0bCksXG4gICAgICAgIGNsYXNzTmFtZTogc3R5bGVzJDUuY2FsZW5kYXJCb3R0b21UZXh0LFxuICAgICAgICBmb250RmFtaWx5OiBmb250RmFtaWx5XG4gICAgICB9LCBib3R0b21WYWx1ZSkpO1xuXG4gICAgICBpZiAoaSAhPT0gMCAmJiBkYXRlLmdldERhdGUoKSAhPT0gZGF0ZXNbaSAtIDFdLmdldERhdGUoKSkge1xuICAgICAgICB2YXIgZGlzcGxheURhdGUgPSBkYXRlc1tpIC0gMV07XG4gICAgICAgIHZhciB0b3BWYWx1ZSA9IGdldExvY2FsRGF5T2ZXZWVrKGRpc3BsYXlEYXRlLCBsb2NhbGUsIFwibG9uZ1wiKSArIFwiLCBcIiArIGRpc3BsYXlEYXRlLmdldERhdGUoKSArIFwiIFwiICsgZ2V0TG9jYWxlTW9udGgoZGlzcGxheURhdGUsIGxvY2FsZSk7XG4gICAgICAgIHZhciB0b3BQb3NpdGlvbiA9IChkYXRlLmdldEhvdXJzKCkgLSAyNCkgLyAyO1xuICAgICAgICB0b3BWYWx1ZXMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFRvcFBhcnRPZkNhbGVuZGFyLCB7XG4gICAgICAgICAga2V5OiB0b3BWYWx1ZSArIGRpc3BsYXlEYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgdmFsdWU6IHRvcFZhbHVlLFxuICAgICAgICAgIHgxTGluZTogY29sdW1uV2lkdGggKiBpLFxuICAgICAgICAgIHkxTGluZTogMCxcbiAgICAgICAgICB5MkxpbmU6IHRvcERlZmF1bHRIZWlnaHQsXG4gICAgICAgICAgeFRleHQ6IGNvbHVtbldpZHRoICogKGkgKyB0b3BQb3NpdGlvbiksXG4gICAgICAgICAgeVRleHQ6IHRvcERlZmF1bHRIZWlnaHQgKiAwLjlcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbdG9wVmFsdWVzLCBib3R0b21WYWx1ZXNdO1xuICB9O1xuXG4gIHZhciB0b3BWYWx1ZXMgPSBbXTtcbiAgdmFyIGJvdHRvbVZhbHVlcyA9IFtdO1xuXG4gIHN3aXRjaCAoZGF0ZVNldHVwLnZpZXdNb2RlKSB7XG4gICAgY2FzZSBWaWV3TW9kZS5ZZWFyOlxuICAgICAgdmFyIF9nZXRDYWxlbmRhclZhbHVlc0ZvciA9IGdldENhbGVuZGFyVmFsdWVzRm9yWWVhcigpO1xuXG4gICAgICB0b3BWYWx1ZXMgPSBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JbMF07XG4gICAgICBib3R0b21WYWx1ZXMgPSBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JbMV07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgVmlld01vZGUuTW9udGg6XG4gICAgICB2YXIgX2dldENhbGVuZGFyVmFsdWVzRm9yMiA9IGdldENhbGVuZGFyVmFsdWVzRm9yTW9udGgoKTtcblxuICAgICAgdG9wVmFsdWVzID0gX2dldENhbGVuZGFyVmFsdWVzRm9yMlswXTtcbiAgICAgIGJvdHRvbVZhbHVlcyA9IF9nZXRDYWxlbmRhclZhbHVlc0ZvcjJbMV07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgVmlld01vZGUuV2VlazpcbiAgICAgIHZhciBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3IzID0gZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JXZWVrKCk7XG5cbiAgICAgIHRvcFZhbHVlcyA9IF9nZXRDYWxlbmRhclZhbHVlc0ZvcjNbMF07XG4gICAgICBib3R0b21WYWx1ZXMgPSBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3IzWzFdO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZpZXdNb2RlLkRheTpcbiAgICAgIHZhciBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3I0ID0gZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JEYXkoKTtcblxuICAgICAgdG9wVmFsdWVzID0gX2dldENhbGVuZGFyVmFsdWVzRm9yNFswXTtcbiAgICAgIGJvdHRvbVZhbHVlcyA9IF9nZXRDYWxlbmRhclZhbHVlc0ZvcjRbMV07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgVmlld01vZGUuUXVhcnRlckRheTpcbiAgICBjYXNlIFZpZXdNb2RlLkhhbGZEYXk6XG4gICAgICB2YXIgX2dldENhbGVuZGFyVmFsdWVzRm9yNSA9IGdldENhbGVuZGFyVmFsdWVzRm9yUGFydE9mRGF5KCk7XG5cbiAgICAgIHRvcFZhbHVlcyA9IF9nZXRDYWxlbmRhclZhbHVlc0ZvcjVbMF07XG4gICAgICBib3R0b21WYWx1ZXMgPSBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3I1WzFdO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZpZXdNb2RlLkhvdXI6XG4gICAgICB2YXIgX2dldENhbGVuZGFyVmFsdWVzRm9yNiA9IGdldENhbGVuZGFyVmFsdWVzRm9ySG91cigpO1xuXG4gICAgICB0b3BWYWx1ZXMgPSBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3I2WzBdO1xuICAgICAgYm90dG9tVmFsdWVzID0gX2dldENhbGVuZGFyVmFsdWVzRm9yNlsxXTtcbiAgfVxuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhbGVuZGFyXCIsXG4gICAgZm9udFNpemU6IGZvbnRTaXplLFxuICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHlcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICB3aWR0aDogY29sdW1uV2lkdGggKiBkYXRlU2V0dXAuZGF0ZXMubGVuZ3RoLFxuICAgIGhlaWdodDogaGVhZGVySGVpZ2h0LFxuICAgIGNsYXNzTmFtZTogc3R5bGVzJDUuY2FsZW5kYXJIZWFkZXJcbiAgfSksIGJvdHRvbVZhbHVlcywgXCIgXCIsIHRvcFZhbHVlcyk7XG59O1xuXG4vLyBBIHR5cGUgb2YgcHJvbWlzZS1saWtlIHRoYXQgcmVzb2x2ZXMgc3luY2hyb25vdXNseSBhbmQgc3VwcG9ydHMgb25seSBvbmUgb2JzZXJ2ZXJcblxuY29uc3QgX2l0ZXJhdG9yU3ltYm9sID0gLyojX19QVVJFX18qLyB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gKFN5bWJvbC5pdGVyYXRvciB8fCAoU3ltYm9sLml0ZXJhdG9yID0gU3ltYm9sKFwiU3ltYm9sLml0ZXJhdG9yXCIpKSkgOiBcIkBAaXRlcmF0b3JcIjtcblxuY29uc3QgX2FzeW5jSXRlcmF0b3JTeW1ib2wgPSAvKiNfX1BVUkVfXyovIHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgPyAoU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgKFN5bWJvbC5hc3luY0l0ZXJhdG9yID0gU3ltYm9sKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3JcIikpKSA6IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG5cbi8vIEFzeW5jaHJvbm91c2x5IGNhbGwgYSBmdW5jdGlvbiBhbmQgc2VuZCBlcnJvcnMgdG8gcmVjb3ZlcnkgY29udGludWF0aW9uXG5mdW5jdGlvbiBfY2F0Y2goYm9keSwgcmVjb3Zlcikge1xuXHR0cnkge1xuXHRcdHZhciByZXN1bHQgPSBib2R5KCk7XG5cdH0gY2F0Y2goZSkge1xuXHRcdHJldHVybiByZWNvdmVyKGUpO1xuXHR9XG5cdGlmIChyZXN1bHQgJiYgcmVzdWx0LnRoZW4pIHtcblx0XHRyZXR1cm4gcmVzdWx0LnRoZW4odm9pZCAwLCByZWNvdmVyKTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgQXJyb3cgPSBmdW5jdGlvbiBBcnJvdyhfcmVmKSB7XG4gIHZhciB0YXNrRnJvbSA9IF9yZWYudGFza0Zyb20sXG4gICAgICB0YXNrVG8gPSBfcmVmLnRhc2tUbyxcbiAgICAgIHJvd0hlaWdodCA9IF9yZWYucm93SGVpZ2h0LFxuICAgICAgdGFza0hlaWdodCA9IF9yZWYudGFza0hlaWdodCxcbiAgICAgIGFycm93SW5kZW50ID0gX3JlZi5hcnJvd0luZGVudCxcbiAgICAgIHJ0bCA9IF9yZWYucnRsO1xuICB2YXIgcGF0aDtcbiAgdmFyIHRyaWFuZ2xlUG9pbnRzO1xuXG4gIGlmIChydGwpIHtcbiAgICB2YXIgX2Ryb3duUGF0aEFuZFRyaWFuZ2xlID0gZHJvd25QYXRoQW5kVHJpYW5nbGVSVEwodGFza0Zyb20sIHRhc2tUbywgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBhcnJvd0luZGVudCk7XG5cbiAgICBwYXRoID0gX2Ryb3duUGF0aEFuZFRyaWFuZ2xlWzBdO1xuICAgIHRyaWFuZ2xlUG9pbnRzID0gX2Ryb3duUGF0aEFuZFRyaWFuZ2xlWzFdO1xuICB9IGVsc2Uge1xuICAgIHZhciBfZHJvd25QYXRoQW5kVHJpYW5nbGUyID0gZHJvd25QYXRoQW5kVHJpYW5nbGUodGFza0Zyb20sIHRhc2tUbywgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBhcnJvd0luZGVudCk7XG5cbiAgICBwYXRoID0gX2Ryb3duUGF0aEFuZFRyaWFuZ2xlMlswXTtcbiAgICB0cmlhbmdsZVBvaW50cyA9IF9kcm93blBhdGhBbmRUcmlhbmdsZTJbMV07XG4gIH1cblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJhcnJvd1wiXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBzdHJva2VXaWR0aDogXCIxLjVcIixcbiAgICBkOiBwYXRoLFxuICAgIGZpbGw6IFwibm9uZVwiXG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicG9seWdvblwiLCB7XG4gICAgcG9pbnRzOiB0cmlhbmdsZVBvaW50c1xuICB9KSk7XG59O1xuXG52YXIgZHJvd25QYXRoQW5kVHJpYW5nbGUgPSBmdW5jdGlvbiBkcm93blBhdGhBbmRUcmlhbmdsZSh0YXNrRnJvbSwgdGFza1RvLCByb3dIZWlnaHQsIHRhc2tIZWlnaHQsIGFycm93SW5kZW50KSB7XG4gIHZhciBpbmRleENvbXBhcmUgPSB0YXNrRnJvbS5pbmRleCA+IHRhc2tUby5pbmRleCA/IC0xIDogMTtcbiAgdmFyIHRhc2tUb0VuZFBvc2l0aW9uID0gdGFza1RvLnkgKyB0YXNrSGVpZ2h0IC8gMjtcbiAgdmFyIHRhc2tGcm9tRW5kUG9zaXRpb24gPSB0YXNrRnJvbS54MiArIGFycm93SW5kZW50ICogMjtcbiAgdmFyIHRhc2tGcm9tSG9yaXpvbnRhbE9mZnNldFZhbHVlID0gdGFza0Zyb21FbmRQb3NpdGlvbiA8IHRhc2tUby54MSA/IFwiXCIgOiBcIkggXCIgKyAodGFza1RvLngxIC0gYXJyb3dJbmRlbnQpO1xuICB2YXIgdGFza1RvSG9yaXpvbnRhbE9mZnNldFZhbHVlID0gdGFza0Zyb21FbmRQb3NpdGlvbiA+IHRhc2tUby54MSA/IGFycm93SW5kZW50IDogdGFza1RvLngxIC0gdGFza0Zyb20ueDIgLSBhcnJvd0luZGVudDtcbiAgdmFyIHBhdGggPSBcIk0gXCIgKyB0YXNrRnJvbS54MiArIFwiIFwiICsgKHRhc2tGcm9tLnkgKyB0YXNrSGVpZ2h0IC8gMikgKyBcIiBcXG4gIGggXCIgKyBhcnJvd0luZGVudCArIFwiIFxcbiAgdiBcIiArIGluZGV4Q29tcGFyZSAqIHJvd0hlaWdodCAvIDIgKyBcIiBcXG4gIFwiICsgdGFza0Zyb21Ib3Jpem9udGFsT2Zmc2V0VmFsdWUgKyBcIlxcbiAgViBcIiArIHRhc2tUb0VuZFBvc2l0aW9uICsgXCIgXFxuICBoIFwiICsgdGFza1RvSG9yaXpvbnRhbE9mZnNldFZhbHVlO1xuICB2YXIgdHJpYW5nbGVQb2ludHMgPSB0YXNrVG8ueDEgKyBcIixcIiArIHRhc2tUb0VuZFBvc2l0aW9uICsgXCIgXFxuICBcIiArICh0YXNrVG8ueDEgLSA1KSArIFwiLFwiICsgKHRhc2tUb0VuZFBvc2l0aW9uIC0gNSkgKyBcIiBcXG4gIFwiICsgKHRhc2tUby54MSAtIDUpICsgXCIsXCIgKyAodGFza1RvRW5kUG9zaXRpb24gKyA1KTtcbiAgcmV0dXJuIFtwYXRoLCB0cmlhbmdsZVBvaW50c107XG59O1xuXG52YXIgZHJvd25QYXRoQW5kVHJpYW5nbGVSVEwgPSBmdW5jdGlvbiBkcm93blBhdGhBbmRUcmlhbmdsZVJUTCh0YXNrRnJvbSwgdGFza1RvLCByb3dIZWlnaHQsIHRhc2tIZWlnaHQsIGFycm93SW5kZW50KSB7XG4gIHZhciBpbmRleENvbXBhcmUgPSB0YXNrRnJvbS5pbmRleCA+IHRhc2tUby5pbmRleCA/IC0xIDogMTtcbiAgdmFyIHRhc2tUb0VuZFBvc2l0aW9uID0gdGFza1RvLnkgKyB0YXNrSGVpZ2h0IC8gMjtcbiAgdmFyIHRhc2tGcm9tRW5kUG9zaXRpb24gPSB0YXNrRnJvbS54MSAtIGFycm93SW5kZW50ICogMjtcbiAgdmFyIHRhc2tGcm9tSG9yaXpvbnRhbE9mZnNldFZhbHVlID0gdGFza0Zyb21FbmRQb3NpdGlvbiA+IHRhc2tUby54MiA/IFwiXCIgOiBcIkggXCIgKyAodGFza1RvLngyICsgYXJyb3dJbmRlbnQpO1xuICB2YXIgdGFza1RvSG9yaXpvbnRhbE9mZnNldFZhbHVlID0gdGFza0Zyb21FbmRQb3NpdGlvbiA8IHRhc2tUby54MiA/IC1hcnJvd0luZGVudCA6IHRhc2tUby54MiAtIHRhc2tGcm9tLngxICsgYXJyb3dJbmRlbnQ7XG4gIHZhciBwYXRoID0gXCJNIFwiICsgdGFza0Zyb20ueDEgKyBcIiBcIiArICh0YXNrRnJvbS55ICsgdGFza0hlaWdodCAvIDIpICsgXCIgXFxuICBoIFwiICsgLWFycm93SW5kZW50ICsgXCIgXFxuICB2IFwiICsgaW5kZXhDb21wYXJlICogcm93SGVpZ2h0IC8gMiArIFwiIFxcbiAgXCIgKyB0YXNrRnJvbUhvcml6b250YWxPZmZzZXRWYWx1ZSArIFwiXFxuICBWIFwiICsgdGFza1RvRW5kUG9zaXRpb24gKyBcIiBcXG4gIGggXCIgKyB0YXNrVG9Ib3Jpem9udGFsT2Zmc2V0VmFsdWU7XG4gIHZhciB0cmlhbmdsZVBvaW50cyA9IHRhc2tUby54MiArIFwiLFwiICsgdGFza1RvRW5kUG9zaXRpb24gKyBcIiBcXG4gIFwiICsgKHRhc2tUby54MiArIDUpICsgXCIsXCIgKyAodGFza1RvRW5kUG9zaXRpb24gKyA1KSArIFwiIFxcbiAgXCIgKyAodGFza1RvLngyICsgNSkgKyBcIixcIiArICh0YXNrVG9FbmRQb3NpdGlvbiAtIDUpO1xuICByZXR1cm4gW3BhdGgsIHRyaWFuZ2xlUG9pbnRzXTtcbn07XG5cbnZhciBjb252ZXJ0VG9CYXJUYXNrcyA9IGZ1bmN0aW9uIGNvbnZlcnRUb0JhclRhc2tzKHRhc2tzLCBkYXRlcywgY29sdW1uV2lkdGgsIHJvd0hlaWdodCwgdGFza0hlaWdodCwgYmFyQ29ybmVyUmFkaXVzLCBoYW5kbGVXaWR0aCwgcnRsLCBiYXJQcm9ncmVzc0NvbG9yLCBiYXJQcm9ncmVzc1NlbGVjdGVkQ29sb3IsIGJhckJhY2tncm91bmRDb2xvciwgYmFyQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsIHByb2plY3RQcm9ncmVzc0NvbG9yLCBwcm9qZWN0UHJvZ3Jlc3NTZWxlY3RlZENvbG9yLCBwcm9qZWN0QmFja2dyb3VuZENvbG9yLCBwcm9qZWN0QmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsIG1pbGVzdG9uZUJhY2tncm91bmRDb2xvciwgbWlsZXN0b25lQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IpIHtcbiAgdmFyIGJhclRhc2tzID0gdGFza3MubWFwKGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgcmV0dXJuIGNvbnZlcnRUb0JhclRhc2sodCwgaSwgZGF0ZXMsIGNvbHVtbldpZHRoLCByb3dIZWlnaHQsIHRhc2tIZWlnaHQsIGJhckNvcm5lclJhZGl1cywgaGFuZGxlV2lkdGgsIHJ0bCwgYmFyUHJvZ3Jlc3NDb2xvciwgYmFyUHJvZ3Jlc3NTZWxlY3RlZENvbG9yLCBiYXJCYWNrZ3JvdW5kQ29sb3IsIGJhckJhY2tncm91bmRTZWxlY3RlZENvbG9yLCBwcm9qZWN0UHJvZ3Jlc3NDb2xvciwgcHJvamVjdFByb2dyZXNzU2VsZWN0ZWRDb2xvciwgcHJvamVjdEJhY2tncm91bmRDb2xvciwgcHJvamVjdEJhY2tncm91bmRTZWxlY3RlZENvbG9yLCBtaWxlc3RvbmVCYWNrZ3JvdW5kQ29sb3IsIG1pbGVzdG9uZUJhY2tncm91bmRTZWxlY3RlZENvbG9yKTtcbiAgfSk7XG4gIGJhclRhc2tzID0gYmFyVGFza3MubWFwKGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IHRhc2suZGVwZW5kZW5jaWVzIHx8IFtdO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3Aoaikge1xuICAgICAgdmFyIGRlcGVuZGVuY2UgPSBiYXJUYXNrcy5maW5kSW5kZXgoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5pZCA9PT0gZGVwZW5kZW5jaWVzW2pdO1xuICAgICAgfSk7XG4gICAgICBpZiAoZGVwZW5kZW5jZSAhPT0gLTEpIGJhclRhc2tzW2RlcGVuZGVuY2VdLmJhckNoaWxkcmVuLnB1c2godGFzayk7XG4gICAgfTtcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGVwZW5kZW5jaWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICBfbG9vcChqKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGFzaztcbiAgfSk7XG4gIHJldHVybiBiYXJUYXNrcztcbn07XG5cbnZhciBjb252ZXJ0VG9CYXJUYXNrID0gZnVuY3Rpb24gY29udmVydFRvQmFyVGFzayh0YXNrLCBpbmRleCwgZGF0ZXMsIGNvbHVtbldpZHRoLCByb3dIZWlnaHQsIHRhc2tIZWlnaHQsIGJhckNvcm5lclJhZGl1cywgaGFuZGxlV2lkdGgsIHJ0bCwgYmFyUHJvZ3Jlc3NDb2xvciwgYmFyUHJvZ3Jlc3NTZWxlY3RlZENvbG9yLCBiYXJCYWNrZ3JvdW5kQ29sb3IsIGJhckJhY2tncm91bmRTZWxlY3RlZENvbG9yLCBwcm9qZWN0UHJvZ3Jlc3NDb2xvciwgcHJvamVjdFByb2dyZXNzU2VsZWN0ZWRDb2xvciwgcHJvamVjdEJhY2tncm91bmRDb2xvciwgcHJvamVjdEJhY2tncm91bmRTZWxlY3RlZENvbG9yLCBtaWxlc3RvbmVCYWNrZ3JvdW5kQ29sb3IsIG1pbGVzdG9uZUJhY2tncm91bmRTZWxlY3RlZENvbG9yKSB7XG4gIHZhciBiYXJUYXNrO1xuXG4gIHN3aXRjaCAodGFzay50eXBlKSB7XG4gICAgY2FzZSBcIm1pbGVzdG9uZVwiOlxuICAgICAgYmFyVGFzayA9IGNvbnZlcnRUb01pbGVzdG9uZSh0YXNrLCBpbmRleCwgZGF0ZXMsIGNvbHVtbldpZHRoLCByb3dIZWlnaHQsIHRhc2tIZWlnaHQsIGJhckNvcm5lclJhZGl1cywgaGFuZGxlV2lkdGgsIG1pbGVzdG9uZUJhY2tncm91bmRDb2xvciwgbWlsZXN0b25lQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwicHJvamVjdFwiOlxuICAgICAgYmFyVGFzayA9IGNvbnZlcnRUb0Jhcih0YXNrLCBpbmRleCwgZGF0ZXMsIGNvbHVtbldpZHRoLCByb3dIZWlnaHQsIHRhc2tIZWlnaHQsIGJhckNvcm5lclJhZGl1cywgaGFuZGxlV2lkdGgsIHJ0bCwgcHJvamVjdFByb2dyZXNzQ29sb3IsIHByb2plY3RQcm9ncmVzc1NlbGVjdGVkQ29sb3IsIHByb2plY3RCYWNrZ3JvdW5kQ29sb3IsIHByb2plY3RCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcik7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBiYXJUYXNrID0gY29udmVydFRvQmFyKHRhc2ssIGluZGV4LCBkYXRlcywgY29sdW1uV2lkdGgsIHJvd0hlaWdodCwgdGFza0hlaWdodCwgYmFyQ29ybmVyUmFkaXVzLCBoYW5kbGVXaWR0aCwgcnRsLCBiYXJQcm9ncmVzc0NvbG9yLCBiYXJQcm9ncmVzc1NlbGVjdGVkQ29sb3IsIGJhckJhY2tncm91bmRDb2xvciwgYmFyQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gYmFyVGFzaztcbn07XG5cbnZhciBjb252ZXJ0VG9CYXIgPSBmdW5jdGlvbiBjb252ZXJ0VG9CYXIodGFzaywgaW5kZXgsIGRhdGVzLCBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBiYXJDb3JuZXJSYWRpdXMsIGhhbmRsZVdpZHRoLCBydGwsIGJhclByb2dyZXNzQ29sb3IsIGJhclByb2dyZXNzU2VsZWN0ZWRDb2xvciwgYmFyQmFja2dyb3VuZENvbG9yLCBiYXJCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcikge1xuICB2YXIgeDE7XG4gIHZhciB4MjtcblxuICBpZiAocnRsKSB7XG4gICAgeDIgPSB0YXNrWENvb3JkaW5hdGVSVEwodGFzay5zdGFydCwgZGF0ZXMsIGNvbHVtbldpZHRoKTtcbiAgICB4MSA9IHRhc2tYQ29vcmRpbmF0ZVJUTCh0YXNrLmVuZCwgZGF0ZXMsIGNvbHVtbldpZHRoKTtcbiAgfSBlbHNlIHtcbiAgICB4MSA9IHRhc2tYQ29vcmRpbmF0ZSh0YXNrLnN0YXJ0LCBkYXRlcywgY29sdW1uV2lkdGgpO1xuICAgIHgyID0gdGFza1hDb29yZGluYXRlKHRhc2suZW5kLCBkYXRlcywgY29sdW1uV2lkdGgpO1xuICB9XG5cbiAgdmFyIHR5cGVJbnRlcm5hbCA9IHRhc2sudHlwZTtcblxuICBpZiAodHlwZUludGVybmFsID09PSBcInRhc2tcIiAmJiB4MiAtIHgxIDwgaGFuZGxlV2lkdGggKiAyKSB7XG4gICAgdHlwZUludGVybmFsID0gXCJzbWFsbHRhc2tcIjtcbiAgICB4MiA9IHgxICsgaGFuZGxlV2lkdGggKiAyO1xuICB9XG5cbiAgdmFyIF9wcm9ncmVzc1dpdGhCeVBhcmFtcyA9IHByb2dyZXNzV2l0aEJ5UGFyYW1zKHgxLCB4MiwgdGFzay5wcm9ncmVzcywgcnRsKSxcbiAgICAgIHByb2dyZXNzV2lkdGggPSBfcHJvZ3Jlc3NXaXRoQnlQYXJhbXNbMF0sXG4gICAgICBwcm9ncmVzc1ggPSBfcHJvZ3Jlc3NXaXRoQnlQYXJhbXNbMV07XG5cbiAgdmFyIHkgPSB0YXNrWUNvb3JkaW5hdGUoaW5kZXgsIHJvd0hlaWdodCwgdGFza0hlaWdodCk7XG4gIHZhciBoaWRlQ2hpbGRyZW4gPSB0YXNrLnR5cGUgPT09IFwicHJvamVjdFwiID8gdGFzay5oaWRlQ2hpbGRyZW4gOiB1bmRlZmluZWQ7XG5cbiAgdmFyIHN0eWxlcyA9IF9leHRlbmRzKHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhckJhY2tncm91bmRDb2xvcixcbiAgICBiYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcjogYmFyQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsXG4gICAgcHJvZ3Jlc3NDb2xvcjogYmFyUHJvZ3Jlc3NDb2xvcixcbiAgICBwcm9ncmVzc1NlbGVjdGVkQ29sb3I6IGJhclByb2dyZXNzU2VsZWN0ZWRDb2xvclxuICB9LCB0YXNrLnN0eWxlcyk7XG5cbiAgcmV0dXJuIF9leHRlbmRzKHt9LCB0YXNrLCB7XG4gICAgdHlwZUludGVybmFsOiB0eXBlSW50ZXJuYWwsXG4gICAgeDE6IHgxLFxuICAgIHgyOiB4MixcbiAgICB5OiB5LFxuICAgIGluZGV4OiBpbmRleCxcbiAgICBwcm9ncmVzc1g6IHByb2dyZXNzWCxcbiAgICBwcm9ncmVzc1dpZHRoOiBwcm9ncmVzc1dpZHRoLFxuICAgIGJhckNvcm5lclJhZGl1czogYmFyQ29ybmVyUmFkaXVzLFxuICAgIGhhbmRsZVdpZHRoOiBoYW5kbGVXaWR0aCxcbiAgICBoaWRlQ2hpbGRyZW46IGhpZGVDaGlsZHJlbixcbiAgICBoZWlnaHQ6IHRhc2tIZWlnaHQsXG4gICAgYmFyQ2hpbGRyZW46IFtdLFxuICAgIHN0eWxlczogc3R5bGVzXG4gIH0pO1xufTtcblxudmFyIGNvbnZlcnRUb01pbGVzdG9uZSA9IGZ1bmN0aW9uIGNvbnZlcnRUb01pbGVzdG9uZSh0YXNrLCBpbmRleCwgZGF0ZXMsIGNvbHVtbldpZHRoLCByb3dIZWlnaHQsIHRhc2tIZWlnaHQsIGJhckNvcm5lclJhZGl1cywgaGFuZGxlV2lkdGgsIG1pbGVzdG9uZUJhY2tncm91bmRDb2xvciwgbWlsZXN0b25lQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IpIHtcbiAgdmFyIHggPSB0YXNrWENvb3JkaW5hdGUodGFzay5zdGFydCwgZGF0ZXMsIGNvbHVtbldpZHRoKTtcbiAgdmFyIHkgPSB0YXNrWUNvb3JkaW5hdGUoaW5kZXgsIHJvd0hlaWdodCwgdGFza0hlaWdodCk7XG4gIHZhciB4MSA9IHggLSB0YXNrSGVpZ2h0ICogMC41O1xuICB2YXIgeDIgPSB4ICsgdGFza0hlaWdodCAqIDAuNTtcbiAgdmFyIHJvdGF0ZWRIZWlnaHQgPSB0YXNrSGVpZ2h0IC8gMS40MTQ7XG5cbiAgdmFyIHN0eWxlcyA9IF9leHRlbmRzKHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IG1pbGVzdG9uZUJhY2tncm91bmRDb2xvcixcbiAgICBiYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcjogbWlsZXN0b25lQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsXG4gICAgcHJvZ3Jlc3NDb2xvcjogXCJcIixcbiAgICBwcm9ncmVzc1NlbGVjdGVkQ29sb3I6IFwiXCJcbiAgfSwgdGFzay5zdHlsZXMpO1xuXG4gIHJldHVybiBfZXh0ZW5kcyh7fSwgdGFzaywge1xuICAgIGVuZDogdGFzay5zdGFydCxcbiAgICB4MTogeDEsXG4gICAgeDI6IHgyLFxuICAgIHk6IHksXG4gICAgaW5kZXg6IGluZGV4LFxuICAgIHByb2dyZXNzWDogMCxcbiAgICBwcm9ncmVzc1dpZHRoOiAwLFxuICAgIGJhckNvcm5lclJhZGl1czogYmFyQ29ybmVyUmFkaXVzLFxuICAgIGhhbmRsZVdpZHRoOiBoYW5kbGVXaWR0aCxcbiAgICB0eXBlSW50ZXJuYWw6IHRhc2sudHlwZSxcbiAgICBwcm9ncmVzczogMCxcbiAgICBoZWlnaHQ6IHJvdGF0ZWRIZWlnaHQsXG4gICAgaGlkZUNoaWxkcmVuOiB1bmRlZmluZWQsXG4gICAgYmFyQ2hpbGRyZW46IFtdLFxuICAgIHN0eWxlczogc3R5bGVzXG4gIH0pO1xufTtcblxudmFyIHRhc2tYQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uIHRhc2tYQ29vcmRpbmF0ZSh4RGF0ZSwgZGF0ZXMsIGNvbHVtbldpZHRoKSB7XG4gIHZhciBpbmRleCA9IGRhdGVzLmZpbmRJbmRleChmdW5jdGlvbiAoZCkge1xuICAgIHJldHVybiBkLmdldFRpbWUoKSA+PSB4RGF0ZS5nZXRUaW1lKCk7XG4gIH0pIC0gMTtcbiAgdmFyIHJlbWFpbmRlck1pbGxpcyA9IHhEYXRlLmdldFRpbWUoKSAtIGRhdGVzW2luZGV4XS5nZXRUaW1lKCk7XG4gIHZhciBwZXJjZW50T2ZJbnRlcnZhbCA9IHJlbWFpbmRlck1pbGxpcyAvIChkYXRlc1tpbmRleCArIDFdLmdldFRpbWUoKSAtIGRhdGVzW2luZGV4XS5nZXRUaW1lKCkpO1xuICB2YXIgeCA9IGluZGV4ICogY29sdW1uV2lkdGggKyBwZXJjZW50T2ZJbnRlcnZhbCAqIGNvbHVtbldpZHRoO1xuICByZXR1cm4geDtcbn07XG5cbnZhciB0YXNrWENvb3JkaW5hdGVSVEwgPSBmdW5jdGlvbiB0YXNrWENvb3JkaW5hdGVSVEwoeERhdGUsIGRhdGVzLCBjb2x1bW5XaWR0aCkge1xuICB2YXIgeCA9IHRhc2tYQ29vcmRpbmF0ZSh4RGF0ZSwgZGF0ZXMsIGNvbHVtbldpZHRoKTtcbiAgeCArPSBjb2x1bW5XaWR0aDtcbiAgcmV0dXJuIHg7XG59O1xuXG52YXIgdGFza1lDb29yZGluYXRlID0gZnVuY3Rpb24gdGFza1lDb29yZGluYXRlKGluZGV4LCByb3dIZWlnaHQsIHRhc2tIZWlnaHQpIHtcbiAgdmFyIHkgPSBpbmRleCAqIHJvd0hlaWdodCArIChyb3dIZWlnaHQgLSB0YXNrSGVpZ2h0KSAvIDI7XG4gIHJldHVybiB5O1xufTtcblxudmFyIHByb2dyZXNzV2l0aEJ5UGFyYW1zID0gZnVuY3Rpb24gcHJvZ3Jlc3NXaXRoQnlQYXJhbXModGFza1gxLCB0YXNrWDIsIHByb2dyZXNzLCBydGwpIHtcbiAgdmFyIHByb2dyZXNzV2lkdGggPSAodGFza1gyIC0gdGFza1gxKSAqIHByb2dyZXNzICogMC4wMTtcbiAgdmFyIHByb2dyZXNzWDtcblxuICBpZiAocnRsKSB7XG4gICAgcHJvZ3Jlc3NYID0gdGFza1gyIC0gcHJvZ3Jlc3NXaWR0aDtcbiAgfSBlbHNlIHtcbiAgICBwcm9ncmVzc1ggPSB0YXNrWDE7XG4gIH1cblxuICByZXR1cm4gW3Byb2dyZXNzV2lkdGgsIHByb2dyZXNzWF07XG59O1xuXG52YXIgcHJvZ3Jlc3NCeVggPSBmdW5jdGlvbiBwcm9ncmVzc0J5WCh4LCB0YXNrKSB7XG4gIGlmICh4ID49IHRhc2sueDIpIHJldHVybiAxMDA7ZWxzZSBpZiAoeCA8PSB0YXNrLngxKSByZXR1cm4gMDtlbHNlIHtcbiAgICB2YXIgYmFyV2lkdGggPSB0YXNrLngyIC0gdGFzay54MTtcbiAgICB2YXIgcHJvZ3Jlc3NQZXJjZW50ID0gTWF0aC5yb3VuZCgoeCAtIHRhc2sueDEpICogMTAwIC8gYmFyV2lkdGgpO1xuICAgIHJldHVybiBwcm9ncmVzc1BlcmNlbnQ7XG4gIH1cbn07XG5cbnZhciBwcm9ncmVzc0J5WFJUTCA9IGZ1bmN0aW9uIHByb2dyZXNzQnlYUlRMKHgsIHRhc2spIHtcbiAgaWYgKHggPj0gdGFzay54MikgcmV0dXJuIDA7ZWxzZSBpZiAoeCA8PSB0YXNrLngxKSByZXR1cm4gMTAwO2Vsc2Uge1xuICAgIHZhciBiYXJXaWR0aCA9IHRhc2sueDIgLSB0YXNrLngxO1xuICAgIHZhciBwcm9ncmVzc1BlcmNlbnQgPSBNYXRoLnJvdW5kKCh0YXNrLngyIC0geCkgKiAxMDAgLyBiYXJXaWR0aCk7XG4gICAgcmV0dXJuIHByb2dyZXNzUGVyY2VudDtcbiAgfVxufTtcblxudmFyIGdldFByb2dyZXNzUG9pbnQgPSBmdW5jdGlvbiBnZXRQcm9ncmVzc1BvaW50KHByb2dyZXNzWCwgdGFza1ksIHRhc2tIZWlnaHQpIHtcbiAgdmFyIHBvaW50ID0gW3Byb2dyZXNzWCAtIDUsIHRhc2tZICsgdGFza0hlaWdodCwgcHJvZ3Jlc3NYICsgNSwgdGFza1kgKyB0YXNrSGVpZ2h0LCBwcm9ncmVzc1gsIHRhc2tZICsgdGFza0hlaWdodCAtIDguNjZdO1xuICByZXR1cm4gcG9pbnQuam9pbihcIixcIik7XG59O1xuXG52YXIgc3RhcnRCeVggPSBmdW5jdGlvbiBzdGFydEJ5WCh4LCB4U3RlcCwgdGFzaykge1xuICBpZiAoeCA+PSB0YXNrLngyIC0gdGFzay5oYW5kbGVXaWR0aCAqIDIpIHtcbiAgICB4ID0gdGFzay54MiAtIHRhc2suaGFuZGxlV2lkdGggKiAyO1xuICB9XG5cbiAgdmFyIHN0ZXBzID0gTWF0aC5yb3VuZCgoeCAtIHRhc2sueDEpIC8geFN0ZXApO1xuICB2YXIgYWRkaXRpb25hbFhWYWx1ZSA9IHN0ZXBzICogeFN0ZXA7XG4gIHZhciBuZXdYID0gdGFzay54MSArIGFkZGl0aW9uYWxYVmFsdWU7XG4gIHJldHVybiBuZXdYO1xufTtcblxudmFyIGVuZEJ5WCA9IGZ1bmN0aW9uIGVuZEJ5WCh4LCB4U3RlcCwgdGFzaykge1xuICBpZiAoeCA8PSB0YXNrLngxICsgdGFzay5oYW5kbGVXaWR0aCAqIDIpIHtcbiAgICB4ID0gdGFzay54MSArIHRhc2suaGFuZGxlV2lkdGggKiAyO1xuICB9XG5cbiAgdmFyIHN0ZXBzID0gTWF0aC5yb3VuZCgoeCAtIHRhc2sueDIpIC8geFN0ZXApO1xuICB2YXIgYWRkaXRpb25hbFhWYWx1ZSA9IHN0ZXBzICogeFN0ZXA7XG4gIHZhciBuZXdYID0gdGFzay54MiArIGFkZGl0aW9uYWxYVmFsdWU7XG4gIHJldHVybiBuZXdYO1xufTtcblxudmFyIG1vdmVCeVggPSBmdW5jdGlvbiBtb3ZlQnlYKHgsIHhTdGVwLCB0YXNrKSB7XG4gIHZhciBzdGVwcyA9IE1hdGgucm91bmQoKHggLSB0YXNrLngxKSAvIHhTdGVwKTtcbiAgdmFyIGFkZGl0aW9uYWxYVmFsdWUgPSBzdGVwcyAqIHhTdGVwO1xuICB2YXIgbmV3WDEgPSB0YXNrLngxICsgYWRkaXRpb25hbFhWYWx1ZTtcbiAgdmFyIG5ld1gyID0gbmV3WDEgKyB0YXNrLngyIC0gdGFzay54MTtcbiAgcmV0dXJuIFtuZXdYMSwgbmV3WDJdO1xufTtcblxudmFyIGRhdGVCeVggPSBmdW5jdGlvbiBkYXRlQnlYKHgsIHRhc2tYLCB0YXNrRGF0ZSwgeFN0ZXAsIHRpbWVTdGVwKSB7XG4gIHZhciBuZXdEYXRlID0gbmV3IERhdGUoKHggLSB0YXNrWCkgLyB4U3RlcCAqIHRpbWVTdGVwICsgdGFza0RhdGUuZ2V0VGltZSgpKTtcbiAgbmV3RGF0ZSA9IG5ldyBEYXRlKG5ld0RhdGUuZ2V0VGltZSgpICsgKG5ld0RhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSAtIHRhc2tEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkpICogNjAwMDApO1xuICByZXR1cm4gbmV3RGF0ZTtcbn07XG5cbnZhciBoYW5kbGVUYXNrQnlTVkdNb3VzZUV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVGFza0J5U1ZHTW91c2VFdmVudChzdmdYLCBhY3Rpb24sIHNlbGVjdGVkVGFzaywgeFN0ZXAsIHRpbWVTdGVwLCBpbml0RXZlbnRYMURlbHRhLCBydGwpIHtcbiAgdmFyIHJlc3VsdDtcblxuICBzd2l0Y2ggKHNlbGVjdGVkVGFzay50eXBlKSB7XG4gICAgY2FzZSBcIm1pbGVzdG9uZVwiOlxuICAgICAgcmVzdWx0ID0gaGFuZGxlVGFza0J5U1ZHTW91c2VFdmVudEZvck1pbGVzdG9uZShzdmdYLCBhY3Rpb24sIHNlbGVjdGVkVGFzaywgeFN0ZXAsIHRpbWVTdGVwLCBpbml0RXZlbnRYMURlbHRhKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJlc3VsdCA9IGhhbmRsZVRhc2tCeVNWR01vdXNlRXZlbnRGb3JCYXIoc3ZnWCwgYWN0aW9uLCBzZWxlY3RlZFRhc2ssIHhTdGVwLCB0aW1lU3RlcCwgaW5pdEV2ZW50WDFEZWx0YSwgcnRsKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBoYW5kbGVUYXNrQnlTVkdNb3VzZUV2ZW50Rm9yQmFyID0gZnVuY3Rpb24gaGFuZGxlVGFza0J5U1ZHTW91c2VFdmVudEZvckJhcihzdmdYLCBhY3Rpb24sIHNlbGVjdGVkVGFzaywgeFN0ZXAsIHRpbWVTdGVwLCBpbml0RXZlbnRYMURlbHRhLCBydGwpIHtcbiAgdmFyIGNoYW5nZWRUYXNrID0gX2V4dGVuZHMoe30sIHNlbGVjdGVkVGFzayk7XG5cbiAgdmFyIGlzQ2hhbmdlZCA9IGZhbHNlO1xuXG4gIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgY2FzZSBcInByb2dyZXNzXCI6XG4gICAgICBpZiAocnRsKSB7XG4gICAgICAgIGNoYW5nZWRUYXNrLnByb2dyZXNzID0gcHJvZ3Jlc3NCeVhSVEwoc3ZnWCwgc2VsZWN0ZWRUYXNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZWRUYXNrLnByb2dyZXNzID0gcHJvZ3Jlc3NCeVgoc3ZnWCwgc2VsZWN0ZWRUYXNrKTtcbiAgICAgIH1cblxuICAgICAgaXNDaGFuZ2VkID0gY2hhbmdlZFRhc2sucHJvZ3Jlc3MgIT09IHNlbGVjdGVkVGFzay5wcm9ncmVzcztcblxuICAgICAgaWYgKGlzQ2hhbmdlZCkge1xuICAgICAgICB2YXIgX3Byb2dyZXNzV2l0aEJ5UGFyYW1zMiA9IHByb2dyZXNzV2l0aEJ5UGFyYW1zKGNoYW5nZWRUYXNrLngxLCBjaGFuZ2VkVGFzay54MiwgY2hhbmdlZFRhc2sucHJvZ3Jlc3MsIHJ0bCksXG4gICAgICAgICAgICBwcm9ncmVzc1dpZHRoID0gX3Byb2dyZXNzV2l0aEJ5UGFyYW1zMlswXSxcbiAgICAgICAgICAgIHByb2dyZXNzWCA9IF9wcm9ncmVzc1dpdGhCeVBhcmFtczJbMV07XG5cbiAgICAgICAgY2hhbmdlZFRhc2sucHJvZ3Jlc3NXaWR0aCA9IHByb2dyZXNzV2lkdGg7XG4gICAgICAgIGNoYW5nZWRUYXNrLnByb2dyZXNzWCA9IHByb2dyZXNzWDtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgIHtcbiAgICAgICAgdmFyIG5ld1gxID0gc3RhcnRCeVgoc3ZnWCwgeFN0ZXAsIHNlbGVjdGVkVGFzayk7XG4gICAgICAgIGNoYW5nZWRUYXNrLngxID0gbmV3WDE7XG4gICAgICAgIGlzQ2hhbmdlZCA9IGNoYW5nZWRUYXNrLngxICE9PSBzZWxlY3RlZFRhc2sueDE7XG5cbiAgICAgICAgaWYgKGlzQ2hhbmdlZCkge1xuICAgICAgICAgIGlmIChydGwpIHtcbiAgICAgICAgICAgIGNoYW5nZWRUYXNrLmVuZCA9IGRhdGVCeVgobmV3WDEsIHNlbGVjdGVkVGFzay54MSwgc2VsZWN0ZWRUYXNrLmVuZCwgeFN0ZXAsIHRpbWVTdGVwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbmdlZFRhc2suc3RhcnQgPSBkYXRlQnlYKG5ld1gxLCBzZWxlY3RlZFRhc2sueDEsIHNlbGVjdGVkVGFzay5zdGFydCwgeFN0ZXAsIHRpbWVTdGVwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgX3Byb2dyZXNzV2l0aEJ5UGFyYW1zMyA9IHByb2dyZXNzV2l0aEJ5UGFyYW1zKGNoYW5nZWRUYXNrLngxLCBjaGFuZ2VkVGFzay54MiwgY2hhbmdlZFRhc2sucHJvZ3Jlc3MsIHJ0bCksXG4gICAgICAgICAgICAgIF9wcm9ncmVzc1dpZHRoID0gX3Byb2dyZXNzV2l0aEJ5UGFyYW1zM1swXSxcbiAgICAgICAgICAgICAgX3Byb2dyZXNzWCA9IF9wcm9ncmVzc1dpdGhCeVBhcmFtczNbMV07XG5cbiAgICAgICAgICBjaGFuZ2VkVGFzay5wcm9ncmVzc1dpZHRoID0gX3Byb2dyZXNzV2lkdGg7XG4gICAgICAgICAgY2hhbmdlZFRhc2sucHJvZ3Jlc3NYID0gX3Byb2dyZXNzWDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgY2FzZSBcImVuZFwiOlxuICAgICAge1xuICAgICAgICB2YXIgbmV3WDIgPSBlbmRCeVgoc3ZnWCwgeFN0ZXAsIHNlbGVjdGVkVGFzayk7XG4gICAgICAgIGNoYW5nZWRUYXNrLngyID0gbmV3WDI7XG4gICAgICAgIGlzQ2hhbmdlZCA9IGNoYW5nZWRUYXNrLngyICE9PSBzZWxlY3RlZFRhc2sueDI7XG5cbiAgICAgICAgaWYgKGlzQ2hhbmdlZCkge1xuICAgICAgICAgIGlmIChydGwpIHtcbiAgICAgICAgICAgIGNoYW5nZWRUYXNrLnN0YXJ0ID0gZGF0ZUJ5WChuZXdYMiwgc2VsZWN0ZWRUYXNrLngyLCBzZWxlY3RlZFRhc2suc3RhcnQsIHhTdGVwLCB0aW1lU3RlcCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYW5nZWRUYXNrLmVuZCA9IGRhdGVCeVgobmV3WDIsIHNlbGVjdGVkVGFzay54Miwgc2VsZWN0ZWRUYXNrLmVuZCwgeFN0ZXAsIHRpbWVTdGVwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgX3Byb2dyZXNzV2l0aEJ5UGFyYW1zNCA9IHByb2dyZXNzV2l0aEJ5UGFyYW1zKGNoYW5nZWRUYXNrLngxLCBjaGFuZ2VkVGFzay54MiwgY2hhbmdlZFRhc2sucHJvZ3Jlc3MsIHJ0bCksXG4gICAgICAgICAgICAgIF9wcm9ncmVzc1dpZHRoMiA9IF9wcm9ncmVzc1dpdGhCeVBhcmFtczRbMF0sXG4gICAgICAgICAgICAgIF9wcm9ncmVzc1gyID0gX3Byb2dyZXNzV2l0aEJ5UGFyYW1zNFsxXTtcblxuICAgICAgICAgIGNoYW5nZWRUYXNrLnByb2dyZXNzV2lkdGggPSBfcHJvZ3Jlc3NXaWR0aDI7XG4gICAgICAgICAgY2hhbmdlZFRhc2sucHJvZ3Jlc3NYID0gX3Byb2dyZXNzWDI7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIGNhc2UgXCJtb3ZlXCI6XG4gICAgICB7XG4gICAgICAgIHZhciBfbW92ZUJ5WCA9IG1vdmVCeVgoc3ZnWCAtIGluaXRFdmVudFgxRGVsdGEsIHhTdGVwLCBzZWxlY3RlZFRhc2spLFxuICAgICAgICAgICAgbmV3TW92ZVgxID0gX21vdmVCeVhbMF0sXG4gICAgICAgICAgICBuZXdNb3ZlWDIgPSBfbW92ZUJ5WFsxXTtcblxuICAgICAgICBpc0NoYW5nZWQgPSBuZXdNb3ZlWDEgIT09IHNlbGVjdGVkVGFzay54MTtcblxuICAgICAgICBpZiAoaXNDaGFuZ2VkKSB7XG4gICAgICAgICAgY2hhbmdlZFRhc2suc3RhcnQgPSBkYXRlQnlYKG5ld01vdmVYMSwgc2VsZWN0ZWRUYXNrLngxLCBzZWxlY3RlZFRhc2suc3RhcnQsIHhTdGVwLCB0aW1lU3RlcCk7XG4gICAgICAgICAgY2hhbmdlZFRhc2suZW5kID0gZGF0ZUJ5WChuZXdNb3ZlWDIsIHNlbGVjdGVkVGFzay54Miwgc2VsZWN0ZWRUYXNrLmVuZCwgeFN0ZXAsIHRpbWVTdGVwKTtcbiAgICAgICAgICBjaGFuZ2VkVGFzay54MSA9IG5ld01vdmVYMTtcbiAgICAgICAgICBjaGFuZ2VkVGFzay54MiA9IG5ld01vdmVYMjtcblxuICAgICAgICAgIHZhciBfcHJvZ3Jlc3NXaXRoQnlQYXJhbXM1ID0gcHJvZ3Jlc3NXaXRoQnlQYXJhbXMoY2hhbmdlZFRhc2sueDEsIGNoYW5nZWRUYXNrLngyLCBjaGFuZ2VkVGFzay5wcm9ncmVzcywgcnRsKSxcbiAgICAgICAgICAgICAgX3Byb2dyZXNzV2lkdGgzID0gX3Byb2dyZXNzV2l0aEJ5UGFyYW1zNVswXSxcbiAgICAgICAgICAgICAgX3Byb2dyZXNzWDMgPSBfcHJvZ3Jlc3NXaXRoQnlQYXJhbXM1WzFdO1xuXG4gICAgICAgICAgY2hhbmdlZFRhc2sucHJvZ3Jlc3NXaWR0aCA9IF9wcm9ncmVzc1dpZHRoMztcbiAgICAgICAgICBjaGFuZ2VkVGFzay5wcm9ncmVzc1ggPSBfcHJvZ3Jlc3NYMztcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpc0NoYW5nZWQ6IGlzQ2hhbmdlZCxcbiAgICBjaGFuZ2VkVGFzazogY2hhbmdlZFRhc2tcbiAgfTtcbn07XG5cbnZhciBoYW5kbGVUYXNrQnlTVkdNb3VzZUV2ZW50Rm9yTWlsZXN0b25lID0gZnVuY3Rpb24gaGFuZGxlVGFza0J5U1ZHTW91c2VFdmVudEZvck1pbGVzdG9uZShzdmdYLCBhY3Rpb24sIHNlbGVjdGVkVGFzaywgeFN0ZXAsIHRpbWVTdGVwLCBpbml0RXZlbnRYMURlbHRhKSB7XG4gIHZhciBjaGFuZ2VkVGFzayA9IF9leHRlbmRzKHt9LCBzZWxlY3RlZFRhc2spO1xuXG4gIHZhciBpc0NoYW5nZWQgPSBmYWxzZTtcblxuICBzd2l0Y2ggKGFjdGlvbikge1xuICAgIGNhc2UgXCJtb3ZlXCI6XG4gICAgICB7XG4gICAgICAgIHZhciBfbW92ZUJ5WDIgPSBtb3ZlQnlYKHN2Z1ggLSBpbml0RXZlbnRYMURlbHRhLCB4U3RlcCwgc2VsZWN0ZWRUYXNrKSxcbiAgICAgICAgICAgIG5ld01vdmVYMSA9IF9tb3ZlQnlYMlswXSxcbiAgICAgICAgICAgIG5ld01vdmVYMiA9IF9tb3ZlQnlYMlsxXTtcblxuICAgICAgICBpc0NoYW5nZWQgPSBuZXdNb3ZlWDEgIT09IHNlbGVjdGVkVGFzay54MTtcblxuICAgICAgICBpZiAoaXNDaGFuZ2VkKSB7XG4gICAgICAgICAgY2hhbmdlZFRhc2suc3RhcnQgPSBkYXRlQnlYKG5ld01vdmVYMSwgc2VsZWN0ZWRUYXNrLngxLCBzZWxlY3RlZFRhc2suc3RhcnQsIHhTdGVwLCB0aW1lU3RlcCk7XG4gICAgICAgICAgY2hhbmdlZFRhc2suZW5kID0gY2hhbmdlZFRhc2suc3RhcnQ7XG4gICAgICAgICAgY2hhbmdlZFRhc2sueDEgPSBuZXdNb3ZlWDE7XG4gICAgICAgICAgY2hhbmdlZFRhc2sueDIgPSBuZXdNb3ZlWDI7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaXNDaGFuZ2VkOiBpc0NoYW5nZWQsXG4gICAgY2hhbmdlZFRhc2s6IGNoYW5nZWRUYXNrXG4gIH07XG59O1xuXG5mdW5jdGlvbiBpc0tleWJvYXJkRXZlbnQoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LmtleSAhPT0gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gcmVtb3ZlSGlkZGVuVGFza3ModGFza3MpIHtcbiAgdmFyIGdyb3VwZWRUYXNrcyA9IHRhc2tzLmZpbHRlcihmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0LmhpZGVDaGlsZHJlbiAmJiB0LnR5cGUgPT09IFwicHJvamVjdFwiO1xuICB9KTtcblxuICBpZiAoZ3JvdXBlZFRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7XG4gICAgICB2YXIgZ3JvdXBlZFRhc2sgPSBncm91cGVkVGFza3NbaV07XG4gICAgICB2YXIgY2hpbGRyZW4gPSBnZXRDaGlsZHJlbih0YXNrcywgZ3JvdXBlZFRhc2spO1xuICAgICAgdGFza3MgPSB0YXNrcy5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuLmluZGV4T2YodCkgPT09IC0xO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBncm91cGVkVGFza3MubGVuZ3RoID4gaTsgaSsrKSB7XG4gICAgICBfbG9vcChpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFza3M7XG59XG5cbmZ1bmN0aW9uIGdldENoaWxkcmVuKHRhc2tMaXN0LCB0YXNrKSB7XG4gIHZhciB0YXNrcyA9IFtdO1xuXG4gIGlmICh0YXNrLnR5cGUgIT09IFwicHJvamVjdFwiKSB7XG4gICAgdGFza3MgPSB0YXNrTGlzdC5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB0LmRlcGVuZGVuY2llcyAmJiB0LmRlcGVuZGVuY2llcy5pbmRleE9mKHRhc2suaWQpICE9PSAtMTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB0YXNrcyA9IHRhc2tMaXN0LmZpbHRlcihmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuIHQucHJvamVjdCAmJiB0LnByb2plY3QgPT09IHRhc2suaWQ7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdGFza0NoaWxkcmVuID0gW107XG4gIHRhc2tzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICB0YXNrQ2hpbGRyZW4ucHVzaC5hcHBseSh0YXNrQ2hpbGRyZW4sIGdldENoaWxkcmVuKHRhc2tMaXN0LCB0KSk7XG4gIH0pO1xuICB0YXNrcyA9IHRhc2tzLmNvbmNhdCh0YXNrcywgdGFza0NoaWxkcmVuKTtcbiAgcmV0dXJuIHRhc2tzO1xufVxuXG52YXIgc29ydFRhc2tzID0gZnVuY3Rpb24gc29ydFRhc2tzKHRhc2tBLCB0YXNrQikge1xuICB2YXIgb3JkZXJBID0gdGFza0EuZGlzcGxheU9yZGVyIHx8IE51bWJlci5NQVhfVkFMVUU7XG4gIHZhciBvcmRlckIgPSB0YXNrQi5kaXNwbGF5T3JkZXIgfHwgTnVtYmVyLk1BWF9WQUxVRTtcblxuICBpZiAob3JkZXJBID4gb3JkZXJCKSB7XG4gICAgcmV0dXJuIDE7XG4gIH0gZWxzZSBpZiAob3JkZXJBIDwgb3JkZXJCKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59O1xuXG52YXIgc3R5bGVzJDYgPSB7XCJiYXJXcmFwcGVyXCI6XCJfS3hTWFNcIixcImJhckhhbmRsZVwiOlwiXzN3XzV1XCIsXCJiYXJCYWNrZ3JvdW5kXCI6XCJfMzFFUlBcIn07XG5cbnZhciBCYXJEaXNwbGF5ID0gZnVuY3Rpb24gQmFyRGlzcGxheShfcmVmKSB7XG4gIHZhciB4ID0gX3JlZi54LFxuICAgICAgeSA9IF9yZWYueSxcbiAgICAgIHdpZHRoID0gX3JlZi53aWR0aCxcbiAgICAgIGhlaWdodCA9IF9yZWYuaGVpZ2h0LFxuICAgICAgaXNTZWxlY3RlZCA9IF9yZWYuaXNTZWxlY3RlZCxcbiAgICAgIHByb2dyZXNzWCA9IF9yZWYucHJvZ3Jlc3NYLFxuICAgICAgcHJvZ3Jlc3NXaWR0aCA9IF9yZWYucHJvZ3Jlc3NXaWR0aCxcbiAgICAgIGJhckNvcm5lclJhZGl1cyA9IF9yZWYuYmFyQ29ybmVyUmFkaXVzLFxuICAgICAgc3R5bGVzID0gX3JlZi5zdHlsZXMsXG4gICAgICBvbk1vdXNlRG93biA9IF9yZWYub25Nb3VzZURvd247XG5cbiAgdmFyIGdldFByb2Nlc3NDb2xvciA9IGZ1bmN0aW9uIGdldFByb2Nlc3NDb2xvcigpIHtcbiAgICByZXR1cm4gaXNTZWxlY3RlZCA/IHN0eWxlcy5wcm9ncmVzc1NlbGVjdGVkQ29sb3IgOiBzdHlsZXMucHJvZ3Jlc3NDb2xvcjtcbiAgfTtcblxuICB2YXIgZ2V0QmFyQ29sb3IgPSBmdW5jdGlvbiBnZXRCYXJDb2xvcigpIHtcbiAgICByZXR1cm4gaXNTZWxlY3RlZCA/IHN0eWxlcy5iYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvciA6IHN0eWxlcy5iYWNrZ3JvdW5kQ29sb3I7XG4gIH07XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICBvbk1vdXNlRG93bjogb25Nb3VzZURvd25cbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIHg6IHgsXG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIHk6IHksXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgcnk6IGJhckNvcm5lclJhZGl1cyxcbiAgICByeDogYmFyQ29ybmVyUmFkaXVzLFxuICAgIGZpbGw6IGdldEJhckNvbG9yKCksXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkNi5iYXJCYWNrZ3JvdW5kXG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7XG4gICAgeDogcHJvZ3Jlc3NYLFxuICAgIHdpZHRoOiBwcm9ncmVzc1dpZHRoLFxuICAgIHk6IHksXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgcnk6IGJhckNvcm5lclJhZGl1cyxcbiAgICByeDogYmFyQ29ybmVyUmFkaXVzLFxuICAgIGZpbGw6IGdldFByb2Nlc3NDb2xvcigpXG4gIH0pKTtcbn07XG5cbnZhciBCYXJEYXRlSGFuZGxlID0gZnVuY3Rpb24gQmFyRGF0ZUhhbmRsZShfcmVmKSB7XG4gIHZhciB4ID0gX3JlZi54LFxuICAgICAgeSA9IF9yZWYueSxcbiAgICAgIHdpZHRoID0gX3JlZi53aWR0aCxcbiAgICAgIGhlaWdodCA9IF9yZWYuaGVpZ2h0LFxuICAgICAgYmFyQ29ybmVyUmFkaXVzID0gX3JlZi5iYXJDb3JuZXJSYWRpdXMsXG4gICAgICBvbk1vdXNlRG93biA9IF9yZWYub25Nb3VzZURvd247XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7XG4gICAgeDogeCxcbiAgICB5OiB5LFxuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ2LmJhckhhbmRsZSxcbiAgICByeTogYmFyQ29ybmVyUmFkaXVzLFxuICAgIHJ4OiBiYXJDb3JuZXJSYWRpdXMsXG4gICAgb25Nb3VzZURvd246IG9uTW91c2VEb3duXG4gIH0pO1xufTtcblxudmFyIEJhclByb2dyZXNzSGFuZGxlID0gZnVuY3Rpb24gQmFyUHJvZ3Jlc3NIYW5kbGUoX3JlZikge1xuICB2YXIgcHJvZ3Jlc3NQb2ludCA9IF9yZWYucHJvZ3Jlc3NQb2ludCxcbiAgICAgIG9uTW91c2VEb3duID0gX3JlZi5vbk1vdXNlRG93bjtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwb2x5Z29uXCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ2LmJhckhhbmRsZSxcbiAgICBwb2ludHM6IHByb2dyZXNzUG9pbnQsXG4gICAgb25Nb3VzZURvd246IG9uTW91c2VEb3duXG4gIH0pO1xufTtcblxudmFyIEJhciA9IGZ1bmN0aW9uIEJhcihfcmVmKSB7XG4gIHZhciB0YXNrID0gX3JlZi50YXNrLFxuICAgICAgaXNQcm9ncmVzc0NoYW5nZWFibGUgPSBfcmVmLmlzUHJvZ3Jlc3NDaGFuZ2VhYmxlLFxuICAgICAgaXNEYXRlQ2hhbmdlYWJsZSA9IF9yZWYuaXNEYXRlQ2hhbmdlYWJsZSxcbiAgICAgIHJ0bCA9IF9yZWYucnRsLFxuICAgICAgb25FdmVudFN0YXJ0ID0gX3JlZi5vbkV2ZW50U3RhcnQsXG4gICAgICBpc1NlbGVjdGVkID0gX3JlZi5pc1NlbGVjdGVkO1xuICB2YXIgcHJvZ3Jlc3NQb2ludCA9IGdldFByb2dyZXNzUG9pbnQoKyFydGwgKiB0YXNrLnByb2dyZXNzV2lkdGggKyB0YXNrLnByb2dyZXNzWCwgdGFzay55LCB0YXNrLmhlaWdodCk7XG4gIHZhciBoYW5kbGVIZWlnaHQgPSB0YXNrLmhlaWdodCAtIDI7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkNi5iYXJXcmFwcGVyLFxuICAgIHRhYkluZGV4OiAwXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQmFyRGlzcGxheSwge1xuICAgIHg6IHRhc2sueDEsXG4gICAgeTogdGFzay55LFxuICAgIHdpZHRoOiB0YXNrLngyIC0gdGFzay54MSxcbiAgICBoZWlnaHQ6IHRhc2suaGVpZ2h0LFxuICAgIHByb2dyZXNzWDogdGFzay5wcm9ncmVzc1gsXG4gICAgcHJvZ3Jlc3NXaWR0aDogdGFzay5wcm9ncmVzc1dpZHRoLFxuICAgIGJhckNvcm5lclJhZGl1czogdGFzay5iYXJDb3JuZXJSYWRpdXMsXG4gICAgc3R5bGVzOiB0YXNrLnN0eWxlcyxcbiAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLFxuICAgIG9uTW91c2VEb3duOiBmdW5jdGlvbiBvbk1vdXNlRG93bihlKSB7XG4gICAgICBpc0RhdGVDaGFuZ2VhYmxlICYmIG9uRXZlbnRTdGFydChcIm1vdmVcIiwgdGFzaywgZSk7XG4gICAgfVxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJoYW5kbGVHcm91cFwiXG4gIH0sIGlzRGF0ZUNoYW5nZWFibGUgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChCYXJEYXRlSGFuZGxlLCB7XG4gICAgeDogdGFzay54MSArIDEsXG4gICAgeTogdGFzay55ICsgMSxcbiAgICB3aWR0aDogdGFzay5oYW5kbGVXaWR0aCxcbiAgICBoZWlnaHQ6IGhhbmRsZUhlaWdodCxcbiAgICBiYXJDb3JuZXJSYWRpdXM6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIG9uTW91c2VEb3duOiBmdW5jdGlvbiBvbk1vdXNlRG93bihlKSB7XG4gICAgICBvbkV2ZW50U3RhcnQoXCJzdGFydFwiLCB0YXNrLCBlKTtcbiAgICB9XG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KEJhckRhdGVIYW5kbGUsIHtcbiAgICB4OiB0YXNrLngyIC0gdGFzay5oYW5kbGVXaWR0aCAtIDEsXG4gICAgeTogdGFzay55ICsgMSxcbiAgICB3aWR0aDogdGFzay5oYW5kbGVXaWR0aCxcbiAgICBoZWlnaHQ6IGhhbmRsZUhlaWdodCxcbiAgICBiYXJDb3JuZXJSYWRpdXM6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIG9uTW91c2VEb3duOiBmdW5jdGlvbiBvbk1vdXNlRG93bihlKSB7XG4gICAgICBvbkV2ZW50U3RhcnQoXCJlbmRcIiwgdGFzaywgZSk7XG4gICAgfVxuICB9KSksIGlzUHJvZ3Jlc3NDaGFuZ2VhYmxlICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQmFyUHJvZ3Jlc3NIYW5kbGUsIHtcbiAgICBwcm9ncmVzc1BvaW50OiBwcm9ncmVzc1BvaW50LFxuICAgIG9uTW91c2VEb3duOiBmdW5jdGlvbiBvbk1vdXNlRG93bihlKSB7XG4gICAgICBvbkV2ZW50U3RhcnQoXCJwcm9ncmVzc1wiLCB0YXNrLCBlKTtcbiAgICB9XG4gIH0pKSk7XG59O1xuXG52YXIgQmFyU21hbGwgPSBmdW5jdGlvbiBCYXJTbWFsbChfcmVmKSB7XG4gIHZhciB0YXNrID0gX3JlZi50YXNrLFxuICAgICAgaXNQcm9ncmVzc0NoYW5nZWFibGUgPSBfcmVmLmlzUHJvZ3Jlc3NDaGFuZ2VhYmxlLFxuICAgICAgaXNEYXRlQ2hhbmdlYWJsZSA9IF9yZWYuaXNEYXRlQ2hhbmdlYWJsZSxcbiAgICAgIG9uRXZlbnRTdGFydCA9IF9yZWYub25FdmVudFN0YXJ0LFxuICAgICAgaXNTZWxlY3RlZCA9IF9yZWYuaXNTZWxlY3RlZDtcbiAgdmFyIHByb2dyZXNzUG9pbnQgPSBnZXRQcm9ncmVzc1BvaW50KHRhc2sucHJvZ3Jlc3NXaWR0aCArIHRhc2sueDEsIHRhc2sueSwgdGFzay5oZWlnaHQpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzJDYuYmFyV3JhcHBlcixcbiAgICB0YWJJbmRleDogMFxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KEJhckRpc3BsYXksIHtcbiAgICB4OiB0YXNrLngxLFxuICAgIHk6IHRhc2sueSxcbiAgICB3aWR0aDogdGFzay54MiAtIHRhc2sueDEsXG4gICAgaGVpZ2h0OiB0YXNrLmhlaWdodCxcbiAgICBwcm9ncmVzc1g6IHRhc2sucHJvZ3Jlc3NYLFxuICAgIHByb2dyZXNzV2lkdGg6IHRhc2sucHJvZ3Jlc3NXaWR0aCxcbiAgICBiYXJDb3JuZXJSYWRpdXM6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIHN0eWxlczogdGFzay5zdHlsZXMsXG4gICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgaXNEYXRlQ2hhbmdlYWJsZSAmJiBvbkV2ZW50U3RhcnQoXCJtb3ZlXCIsIHRhc2ssIGUpO1xuICAgIH1cbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICBjbGFzc05hbWU6IFwiaGFuZGxlR3JvdXBcIlxuICB9LCBpc1Byb2dyZXNzQ2hhbmdlYWJsZSAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KEJhclByb2dyZXNzSGFuZGxlLCB7XG4gICAgcHJvZ3Jlc3NQb2ludDogcHJvZ3Jlc3NQb2ludCxcbiAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgb25FdmVudFN0YXJ0KFwicHJvZ3Jlc3NcIiwgdGFzaywgZSk7XG4gICAgfVxuICB9KSkpO1xufTtcblxudmFyIHN0eWxlcyQ3ID0ge1wibWlsZXN0b25lV3JhcHBlclwiOlwiX1JScjEzXCIsXCJtaWxlc3RvbmVCYWNrZ3JvdW5kXCI6XCJfMlAyQjFcIn07XG5cbnZhciBNaWxlc3RvbmUgPSBmdW5jdGlvbiBNaWxlc3RvbmUoX3JlZikge1xuICB2YXIgdGFzayA9IF9yZWYudGFzayxcbiAgICAgIGlzRGF0ZUNoYW5nZWFibGUgPSBfcmVmLmlzRGF0ZUNoYW5nZWFibGUsXG4gICAgICBvbkV2ZW50U3RhcnQgPSBfcmVmLm9uRXZlbnRTdGFydCxcbiAgICAgIGlzU2VsZWN0ZWQgPSBfcmVmLmlzU2VsZWN0ZWQ7XG4gIHZhciB0cmFuc2Zvcm0gPSBcInJvdGF0ZSg0NSBcIiArICh0YXNrLngxICsgdGFzay5oZWlnaHQgKiAwLjM1NikgKyBcIiBcXG4gICAgXCIgKyAodGFzay55ICsgdGFzay5oZWlnaHQgKiAwLjg1KSArIFwiKVwiO1xuXG4gIHZhciBnZXRCYXJDb2xvciA9IGZ1bmN0aW9uIGdldEJhckNvbG9yKCkge1xuICAgIHJldHVybiBpc1NlbGVjdGVkID8gdGFzay5zdHlsZXMuYmFja2dyb3VuZFNlbGVjdGVkQ29sb3IgOiB0YXNrLnN0eWxlcy5iYWNrZ3JvdW5kQ29sb3I7XG4gIH07XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICB0YWJJbmRleDogMCxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ3Lm1pbGVzdG9uZVdyYXBwZXJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIGZpbGw6IGdldEJhckNvbG9yKCksXG4gICAgeDogdGFzay54MSxcbiAgICB3aWR0aDogdGFzay5oZWlnaHQsXG4gICAgeTogdGFzay55LFxuICAgIGhlaWdodDogdGFzay5oZWlnaHQsXG4gICAgcng6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIHJ5OiB0YXNrLmJhckNvcm5lclJhZGl1cyxcbiAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ3Lm1pbGVzdG9uZUJhY2tncm91bmQsXG4gICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICAgIGlzRGF0ZUNoYW5nZWFibGUgJiYgb25FdmVudFN0YXJ0KFwibW92ZVwiLCB0YXNrLCBlKTtcbiAgICB9XG4gIH0pKTtcbn07XG5cbnZhciBzdHlsZXMkOCA9IHtcInByb2plY3RXcmFwcGVyXCI6XCJfMUtKNnhcIixcInByb2plY3RCYWNrZ3JvdW5kXCI6XCJfMlJiVnlcIixcInByb2plY3RUb3BcIjpcIl8ycFpNRlwifTtcblxudmFyIFByb2plY3QgPSBmdW5jdGlvbiBQcm9qZWN0KF9yZWYpIHtcbiAgdmFyIHRhc2sgPSBfcmVmLnRhc2ssXG4gICAgICBpc1NlbGVjdGVkID0gX3JlZi5pc1NlbGVjdGVkO1xuICB2YXIgYmFyQ29sb3IgPSBpc1NlbGVjdGVkID8gdGFzay5zdHlsZXMuYmFja2dyb3VuZFNlbGVjdGVkQ29sb3IgOiB0YXNrLnN0eWxlcy5iYWNrZ3JvdW5kQ29sb3I7XG4gIHZhciBwcm9jZXNzQ29sb3IgPSBpc1NlbGVjdGVkID8gdGFzay5zdHlsZXMucHJvZ3Jlc3NTZWxlY3RlZENvbG9yIDogdGFzay5zdHlsZXMucHJvZ3Jlc3NDb2xvcjtcbiAgdmFyIHByb2plY3RXaXRoID0gdGFzay54MiAtIHRhc2sueDE7XG4gIHZhciBwcm9qZWN0TGVmdFRyaWFuZ2xlID0gW3Rhc2sueDEsIHRhc2sueSArIHRhc2suaGVpZ2h0IC8gMiAtIDEsIHRhc2sueDEsIHRhc2sueSArIHRhc2suaGVpZ2h0LCB0YXNrLngxICsgMTUsIHRhc2sueSArIHRhc2suaGVpZ2h0IC8gMiAtIDFdLmpvaW4oXCIsXCIpO1xuICB2YXIgcHJvamVjdFJpZ2h0VHJpYW5nbGUgPSBbdGFzay54MiwgdGFzay55ICsgdGFzay5oZWlnaHQgLyAyIC0gMSwgdGFzay54MiwgdGFzay55ICsgdGFzay5oZWlnaHQsIHRhc2sueDIgLSAxNSwgdGFzay55ICsgdGFzay5oZWlnaHQgLyAyIC0gMV0uam9pbihcIixcIik7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgdGFiSW5kZXg6IDAsXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkOC5wcm9qZWN0V3JhcHBlclxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7XG4gICAgZmlsbDogYmFyQ29sb3IsXG4gICAgeDogdGFzay54MSxcbiAgICB3aWR0aDogcHJvamVjdFdpdGgsXG4gICAgeTogdGFzay55LFxuICAgIGhlaWdodDogdGFzay5oZWlnaHQsXG4gICAgcng6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIHJ5OiB0YXNrLmJhckNvcm5lclJhZGl1cyxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ4LnByb2plY3RCYWNrZ3JvdW5kXG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7XG4gICAgeDogdGFzay5wcm9ncmVzc1gsXG4gICAgd2lkdGg6IHRhc2sucHJvZ3Jlc3NXaWR0aCxcbiAgICB5OiB0YXNrLnksXG4gICAgaGVpZ2h0OiB0YXNrLmhlaWdodCxcbiAgICByeTogdGFzay5iYXJDb3JuZXJSYWRpdXMsXG4gICAgcng6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIGZpbGw6IHByb2Nlc3NDb2xvclxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIGZpbGw6IGJhckNvbG9yLFxuICAgIHg6IHRhc2sueDEsXG4gICAgd2lkdGg6IHByb2plY3RXaXRoLFxuICAgIHk6IHRhc2sueSxcbiAgICBoZWlnaHQ6IHRhc2suaGVpZ2h0IC8gMixcbiAgICByeDogdGFzay5iYXJDb3JuZXJSYWRpdXMsXG4gICAgcnk6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIGNsYXNzTmFtZTogc3R5bGVzJDgucHJvamVjdFRvcFxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInBvbHlnb25cIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzJDgucHJvamVjdFRvcCxcbiAgICBwb2ludHM6IHByb2plY3RMZWZ0VHJpYW5nbGUsXG4gICAgZmlsbDogYmFyQ29sb3JcbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwb2x5Z29uXCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ4LnByb2plY3RUb3AsXG4gICAgcG9pbnRzOiBwcm9qZWN0UmlnaHRUcmlhbmdsZSxcbiAgICBmaWxsOiBiYXJDb2xvclxuICB9KSk7XG59O1xuXG52YXIgc3R5bGUgPSB7XCJiYXJMYWJlbFwiOlwiXzN6UkpRXCIsXCJiYXJMYWJlbE91dHNpZGVcIjpcIl8zS2NhTVwifTtcblxudmFyIFRhc2tJdGVtID0gZnVuY3Rpb24gVGFza0l0ZW0ocHJvcHMpIHtcbiAgdmFyIF9wcm9wcyA9IF9leHRlbmRzKHt9LCBwcm9wcyksXG4gICAgICB0YXNrID0gX3Byb3BzLnRhc2ssXG4gICAgICBhcnJvd0luZGVudCA9IF9wcm9wcy5hcnJvd0luZGVudCxcbiAgICAgIGlzRGVsZXRlID0gX3Byb3BzLmlzRGVsZXRlLFxuICAgICAgdGFza0hlaWdodCA9IF9wcm9wcy50YXNrSGVpZ2h0LFxuICAgICAgaXNTZWxlY3RlZCA9IF9wcm9wcy5pc1NlbGVjdGVkLFxuICAgICAgcnRsID0gX3Byb3BzLnJ0bCxcbiAgICAgIG9uRXZlbnRTdGFydCA9IF9wcm9wcy5vbkV2ZW50U3RhcnQ7XG5cbiAgdmFyIHRleHRSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCkpLFxuICAgICAgdGFza0l0ZW0gPSBfdXNlU3RhdGVbMF0sXG4gICAgICBzZXRUYXNrSXRlbSA9IF91c2VTdGF0ZVsxXTtcblxuICB2YXIgX3VzZVN0YXRlMiA9IHVzZVN0YXRlKHRydWUpLFxuICAgICAgaXNUZXh0SW5zaWRlID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldElzVGV4dEluc2lkZSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzd2l0Y2ggKHRhc2sudHlwZUludGVybmFsKSB7XG4gICAgICBjYXNlIFwibWlsZXN0b25lXCI6XG4gICAgICAgIHNldFRhc2tJdGVtKFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWlsZXN0b25lLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcykpKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJwcm9qZWN0XCI6XG4gICAgICAgIHNldFRhc2tJdGVtKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUHJvamVjdCwgT2JqZWN0LmFzc2lnbih7fSwgcHJvcHMpKSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwic21hbGx0YXNrXCI6XG4gICAgICAgIHNldFRhc2tJdGVtKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQmFyU21hbGwsIE9iamVjdC5hc3NpZ24oe30sIHByb3BzKSkpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgc2V0VGFza0l0ZW0oUmVhY3QuY3JlYXRlRWxlbWVudChCYXIsIE9iamVjdC5hc3NpZ24oe30sIHByb3BzKSkpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0sIFt0YXNrLCBpc1NlbGVjdGVkXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRleHRSZWYuY3VycmVudCkge1xuICAgICAgc2V0SXNUZXh0SW5zaWRlKHRleHRSZWYuY3VycmVudC5nZXRCQm94KCkud2lkdGggPCB0YXNrLngyIC0gdGFzay54MSk7XG4gICAgfVxuICB9LCBbdGV4dFJlZiwgdGFza10pO1xuXG4gIHZhciBnZXRYID0gZnVuY3Rpb24gZ2V0WCgpIHtcbiAgICB2YXIgd2lkdGggPSB0YXNrLngyIC0gdGFzay54MTtcbiAgICB2YXIgaGFzQ2hpbGQgPSB0YXNrLmJhckNoaWxkcmVuLmxlbmd0aCA+IDA7XG5cbiAgICBpZiAoaXNUZXh0SW5zaWRlKSB7XG4gICAgICByZXR1cm4gdGFzay54MSArIHdpZHRoICogMC41O1xuICAgIH1cblxuICAgIGlmIChydGwgJiYgdGV4dFJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm4gdGFzay54MSAtIHRleHRSZWYuY3VycmVudC5nZXRCQm94KCkud2lkdGggLSBhcnJvd0luZGVudCAqICtoYXNDaGlsZCAtIGFycm93SW5kZW50ICogMC4yO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGFzay54MSArIHdpZHRoICsgYXJyb3dJbmRlbnQgKiAraGFzQ2hpbGQgKyBhcnJvd0luZGVudCAqIDAuMjtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgIGNhc2UgXCJEZWxldGVcIjpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZiAoaXNEZWxldGUpIG9uRXZlbnRTdGFydChcImRlbGV0ZVwiLCB0YXNrLCBlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9LFxuICAgIG9uTW91c2VFbnRlcjogZnVuY3Rpb24gb25Nb3VzZUVudGVyKGUpIHtcbiAgICAgIG9uRXZlbnRTdGFydChcIm1vdXNlZW50ZXJcIiwgdGFzaywgZSk7XG4gICAgfSxcbiAgICBvbk1vdXNlTGVhdmU6IGZ1bmN0aW9uIG9uTW91c2VMZWF2ZShlKSB7XG4gICAgICBvbkV2ZW50U3RhcnQoXCJtb3VzZWxlYXZlXCIsIHRhc2ssIGUpO1xuICAgIH0sXG4gICAgb25Eb3VibGVDbGljazogZnVuY3Rpb24gb25Eb3VibGVDbGljayhlKSB7XG4gICAgICBvbkV2ZW50U3RhcnQoXCJkYmxjbGlja1wiLCB0YXNrLCBlKTtcbiAgICB9LFxuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgb25FdmVudFN0YXJ0KFwiY2xpY2tcIiwgdGFzaywgZSk7XG4gICAgfSxcbiAgICBvbkZvY3VzOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuICAgICAgb25FdmVudFN0YXJ0KFwic2VsZWN0XCIsIHRhc2spO1xuICAgIH1cbiAgfSwgdGFza0l0ZW0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0XCIsIHtcbiAgICB4OiBnZXRYKCksXG4gICAgeTogdGFzay55ICsgdGFza0hlaWdodCAqIDAuNSxcbiAgICBjbGFzc05hbWU6IGlzVGV4dEluc2lkZSA/IHN0eWxlLmJhckxhYmVsIDogIHN0eWxlLmJhckxhYmVsT3V0c2lkZSxcbiAgICByZWY6IHRleHRSZWZcbiAgfSwgdGFzay5uYW1lKSk7XG59O1xuXG52YXIgVGFza0dhbnR0Q29udGVudCA9IGZ1bmN0aW9uIFRhc2tHYW50dENvbnRlbnQoX3JlZikge1xuICB2YXIgX3N2ZyRjdXJyZW50O1xuXG4gIHZhciB0YXNrcyA9IF9yZWYudGFza3MsXG4gICAgICBkYXRlcyA9IF9yZWYuZGF0ZXMsXG4gICAgICBnYW50dEV2ZW50ID0gX3JlZi5nYW50dEV2ZW50LFxuICAgICAgc2VsZWN0ZWRUYXNrID0gX3JlZi5zZWxlY3RlZFRhc2ssXG4gICAgICByb3dIZWlnaHQgPSBfcmVmLnJvd0hlaWdodCxcbiAgICAgIGNvbHVtbldpZHRoID0gX3JlZi5jb2x1bW5XaWR0aCxcbiAgICAgIHRpbWVTdGVwID0gX3JlZi50aW1lU3RlcCxcbiAgICAgIHN2ZyA9IF9yZWYuc3ZnLFxuICAgICAgdGFza0hlaWdodCA9IF9yZWYudGFza0hlaWdodCxcbiAgICAgIGFycm93Q29sb3IgPSBfcmVmLmFycm93Q29sb3IsXG4gICAgICBhcnJvd0luZGVudCA9IF9yZWYuYXJyb3dJbmRlbnQsXG4gICAgICBmb250RmFtaWx5ID0gX3JlZi5mb250RmFtaWx5LFxuICAgICAgZm9udFNpemUgPSBfcmVmLmZvbnRTaXplLFxuICAgICAgcnRsID0gX3JlZi5ydGwsXG4gICAgICBzZXRHYW50dEV2ZW50ID0gX3JlZi5zZXRHYW50dEV2ZW50LFxuICAgICAgc2V0RmFpbGVkVGFzayA9IF9yZWYuc2V0RmFpbGVkVGFzayxcbiAgICAgIHNldFNlbGVjdGVkVGFzayA9IF9yZWYuc2V0U2VsZWN0ZWRUYXNrLFxuICAgICAgb25EYXRlQ2hhbmdlID0gX3JlZi5vbkRhdGVDaGFuZ2UsXG4gICAgICBvblByb2dyZXNzQ2hhbmdlID0gX3JlZi5vblByb2dyZXNzQ2hhbmdlLFxuICAgICAgb25Eb3VibGVDbGljayA9IF9yZWYub25Eb3VibGVDbGljayxcbiAgICAgIG9uQ2xpY2sgPSBfcmVmLm9uQ2xpY2ssXG4gICAgICBvbkRlbGV0ZSA9IF9yZWYub25EZWxldGU7XG4gIHZhciBwb2ludCA9IHN2ZyA9PT0gbnVsbCB8fCBzdmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfc3ZnJGN1cnJlbnQgPSBzdmcuY3VycmVudCkgPT09IG51bGwgfHwgX3N2ZyRjdXJyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ZnJGN1cnJlbnQuY3JlYXRlU1ZHUG9pbnQoKTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoMCksXG4gICAgICB4U3RlcCA9IF91c2VTdGF0ZVswXSxcbiAgICAgIHNldFhTdGVwID0gX3VzZVN0YXRlWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUyID0gdXNlU3RhdGUoMCksXG4gICAgICBpbml0RXZlbnRYMURlbHRhID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldEluaXRFdmVudFgxRGVsdGEgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgICAgaXNNb3ZpbmcgPSBfdXNlU3RhdGUzWzBdLFxuICAgICAgc2V0SXNNb3ZpbmcgPSBfdXNlU3RhdGUzWzFdO1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRhdGVEZWx0YSA9IGRhdGVzWzFdLmdldFRpbWUoKSAtIGRhdGVzWzBdLmdldFRpbWUoKSAtIGRhdGVzWzFdLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MCAqIDEwMDAgKyBkYXRlc1swXS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAgKiAxMDAwO1xuICAgIHZhciBuZXdYU3RlcCA9IHRpbWVTdGVwICogY29sdW1uV2lkdGggLyBkYXRlRGVsdGE7XG4gICAgc2V0WFN0ZXAobmV3WFN0ZXApO1xuICB9LCBbY29sdW1uV2lkdGgsIGRhdGVzLCB0aW1lU3RlcF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYW5kbGVNb3VzZU1vdmUgPSBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmUoZXZlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBfc3ZnJGN1cnJlbnQkZ2V0U2NyZWU7XG5cbiAgICAgICAgaWYgKCFnYW50dEV2ZW50LmNoYW5nZWRUYXNrIHx8ICFwb2ludCB8fCAhKHN2ZyAhPT0gbnVsbCAmJiBzdmcgIT09IHZvaWQgMCAmJiBzdmcuY3VycmVudCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcG9pbnQueCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICAgIHZhciBjdXJzb3IgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0oc3ZnID09PSBudWxsIHx8IHN2ZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zdmckY3VycmVudCRnZXRTY3JlZSA9IHN2Zy5jdXJyZW50LmdldFNjcmVlbkNUTSgpKSA9PT0gbnVsbCB8fCBfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdmckY3VycmVudCRnZXRTY3JlZS5pbnZlcnNlKCkpO1xuXG4gICAgICAgIHZhciBfaGFuZGxlVGFza0J5U1ZHTW91c2UgPSBoYW5kbGVUYXNrQnlTVkdNb3VzZUV2ZW50KGN1cnNvci54LCBnYW50dEV2ZW50LmFjdGlvbiwgZ2FudHRFdmVudC5jaGFuZ2VkVGFzaywgeFN0ZXAsIHRpbWVTdGVwLCBpbml0RXZlbnRYMURlbHRhLCBydGwpLFxuICAgICAgICAgICAgaXNDaGFuZ2VkID0gX2hhbmRsZVRhc2tCeVNWR01vdXNlLmlzQ2hhbmdlZCxcbiAgICAgICAgICAgIGNoYW5nZWRUYXNrID0gX2hhbmRsZVRhc2tCeVNWR01vdXNlLmNoYW5nZWRUYXNrO1xuXG4gICAgICAgIGlmIChpc0NoYW5nZWQpIHtcbiAgICAgICAgICBzZXRHYW50dEV2ZW50KHtcbiAgICAgICAgICAgIGFjdGlvbjogZ2FudHRFdmVudC5hY3Rpb24sXG4gICAgICAgICAgICBjaGFuZ2VkVGFzazogY2hhbmdlZFRhc2tcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgaGFuZGxlTW91c2VVcCA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlVXAoZXZlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUyO1xuXG4gICAgICAgIHZhciBfdGVtcDYgPSBmdW5jdGlvbiBfdGVtcDYoKSB7XG4gICAgICAgICAgaWYgKCFvcGVyYXRpb25TdWNjZXNzKSB7XG4gICAgICAgICAgICBzZXRGYWlsZWRUYXNrKG9yaWdpbmFsU2VsZWN0ZWRUYXNrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGFjdGlvbiA9IGdhbnR0RXZlbnQuYWN0aW9uLFxuICAgICAgICAgICAgb3JpZ2luYWxTZWxlY3RlZFRhc2sgPSBnYW50dEV2ZW50Lm9yaWdpbmFsU2VsZWN0ZWRUYXNrLFxuICAgICAgICAgICAgY2hhbmdlZFRhc2sgPSBnYW50dEV2ZW50LmNoYW5nZWRUYXNrO1xuICAgICAgICBpZiAoIWNoYW5nZWRUYXNrIHx8ICFwb2ludCB8fCAhKHN2ZyAhPT0gbnVsbCAmJiBzdmcgIT09IHZvaWQgMCAmJiBzdmcuY3VycmVudCkgfHwgIW9yaWdpbmFsU2VsZWN0ZWRUYXNrKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHBvaW50LnggPSBldmVudC5jbGllbnRYO1xuICAgICAgICB2YXIgY3Vyc29yID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKHN2ZyA9PT0gbnVsbCB8fCBzdmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUyID0gc3ZnLmN1cnJlbnQuZ2V0U2NyZWVuQ1RNKCkpID09PSBudWxsIHx8IF9zdmckY3VycmVudCRnZXRTY3JlZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdmckY3VycmVudCRnZXRTY3JlZTIuaW52ZXJzZSgpKTtcblxuICAgICAgICB2YXIgX2hhbmRsZVRhc2tCeVNWR01vdXNlMiA9IGhhbmRsZVRhc2tCeVNWR01vdXNlRXZlbnQoY3Vyc29yLngsIGFjdGlvbiwgY2hhbmdlZFRhc2ssIHhTdGVwLCB0aW1lU3RlcCwgaW5pdEV2ZW50WDFEZWx0YSwgcnRsKSxcbiAgICAgICAgICAgIG5ld0NoYW5nZWRUYXNrID0gX2hhbmRsZVRhc2tCeVNWR01vdXNlMi5jaGFuZ2VkVGFzaztcblxuICAgICAgICB2YXIgaXNOb3RMaWtlT3JpZ2luYWwgPSBvcmlnaW5hbFNlbGVjdGVkVGFzay5zdGFydCAhPT0gbmV3Q2hhbmdlZFRhc2suc3RhcnQgfHwgb3JpZ2luYWxTZWxlY3RlZFRhc2suZW5kICE9PSBuZXdDaGFuZ2VkVGFzay5lbmQgfHwgb3JpZ2luYWxTZWxlY3RlZFRhc2sucHJvZ3Jlc3MgIT09IG5ld0NoYW5nZWRUYXNrLnByb2dyZXNzO1xuICAgICAgICBzdmcuY3VycmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZU1vdXNlTW92ZSk7XG4gICAgICAgIHN2Zy5jdXJyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZU1vdXNlVXApO1xuICAgICAgICBzZXRHYW50dEV2ZW50KHtcbiAgICAgICAgICBhY3Rpb246IFwiXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHNldElzTW92aW5nKGZhbHNlKTtcbiAgICAgICAgdmFyIG9wZXJhdGlvblN1Y2Nlc3MgPSB0cnVlO1xuXG4gICAgICAgIHZhciBfdGVtcDcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKChhY3Rpb24gPT09IFwibW92ZVwiIHx8IGFjdGlvbiA9PT0gXCJlbmRcIiB8fCBhY3Rpb24gPT09IFwic3RhcnRcIikgJiYgb25EYXRlQ2hhbmdlICYmIGlzTm90TGlrZU9yaWdpbmFsKSB7XG4gICAgICAgICAgICB2YXIgX3RlbXA4ID0gX2NhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShvbkRhdGVDaGFuZ2UobmV3Q2hhbmdlZFRhc2ssIG5ld0NoYW5nZWRUYXNrLmJhckNoaWxkcmVuKSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICBvcGVyYXRpb25TdWNjZXNzID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIG9wZXJhdGlvblN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoX3RlbXA4ICYmIF90ZW1wOC50aGVuKSByZXR1cm4gX3RlbXA4LnRoZW4oZnVuY3Rpb24gKCkge30pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgX3RlbXA5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAob25Qcm9ncmVzc0NoYW5nZSAmJiBpc05vdExpa2VPcmlnaW5hbCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGVtcDEwID0gX2NhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUob25Qcm9ncmVzc0NoYW5nZShuZXdDaGFuZ2VkVGFzaywgbmV3Q2hhbmdlZFRhc2suYmFyQ2hpbGRyZW4pKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uU3VjY2VzcyA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uU3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKF90ZW1wMTAgJiYgX3RlbXAxMC50aGVuKSByZXR1cm4gX3RlbXAxMC50aGVuKGZ1bmN0aW9uICgpIHt9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSgpO1xuXG4gICAgICAgICAgICBpZiAoX3RlbXA5ICYmIF90ZW1wOS50aGVuKSByZXR1cm4gX3RlbXA5LnRoZW4oZnVuY3Rpb24gKCkge30pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoX3RlbXA3ICYmIF90ZW1wNy50aGVuID8gX3RlbXA3LnRoZW4oX3RlbXA2KSA6IF90ZW1wNihfdGVtcDcpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIWlzTW92aW5nICYmIChnYW50dEV2ZW50LmFjdGlvbiA9PT0gXCJtb3ZlXCIgfHwgZ2FudHRFdmVudC5hY3Rpb24gPT09IFwiZW5kXCIgfHwgZ2FudHRFdmVudC5hY3Rpb24gPT09IFwic3RhcnRcIiB8fCBnYW50dEV2ZW50LmFjdGlvbiA9PT0gXCJwcm9ncmVzc1wiKSAmJiBzdmcgIT09IG51bGwgJiYgc3ZnICE9PSB2b2lkIDAgJiYgc3ZnLmN1cnJlbnQpIHtcbiAgICAgIHN2Zy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgIHN2Zy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZU1vdXNlVXApO1xuICAgICAgc2V0SXNNb3ZpbmcodHJ1ZSk7XG4gICAgfVxuICB9LCBbZ2FudHRFdmVudCwgeFN0ZXAsIGluaXRFdmVudFgxRGVsdGEsIG9uUHJvZ3Jlc3NDaGFuZ2UsIHRpbWVTdGVwLCBvbkRhdGVDaGFuZ2UsIHN2ZywgaXNNb3ZpbmcsIHBvaW50LCBydGwsIHNldEZhaWxlZFRhc2ssIHNldEdhbnR0RXZlbnRdKTtcblxuICB2YXIgaGFuZGxlQmFyRXZlbnRTdGFydCA9IGZ1bmN0aW9uIGhhbmRsZUJhckV2ZW50U3RhcnQoYWN0aW9uLCB0YXNrLCBldmVudCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgIGlmIChhY3Rpb24gPT09IFwic2VsZWN0XCIpIHtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkVGFzayh0YXNrLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChpc0tleWJvYXJkRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgICAgICB2YXIgX3RlbXAxNCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJkZWxldGVcIikge1xuICAgICAgICAgICAgICAgIHZhciBfdGVtcDE1ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgaWYgKG9uRGVsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGVtcDE2ID0gX2NhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9uRGVsZXRlKHRhc2spKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0R2FudHRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZFRhc2s6IHRhc2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvbiBEZWxldGUuIFwiICsgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RlbXAxNiAmJiBfdGVtcDE2LnRoZW4pIHJldHVybiBfdGVtcDE2LnRoZW4oZnVuY3Rpb24gKCkge30pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0oKTtcblxuICAgICAgICAgICAgICAgIGlmIChfdGVtcDE1ICYmIF90ZW1wMTUudGhlbikgcmV0dXJuIF90ZW1wMTUudGhlbihmdW5jdGlvbiAoKSB7fSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0oKTtcblxuICAgICAgICAgICAgaWYgKF90ZW1wMTQgJiYgX3RlbXAxNC50aGVuKSByZXR1cm4gX3RlbXAxNC50aGVuKGZ1bmN0aW9uICgpIHt9KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJtb3VzZWVudGVyXCIpIHtcbiAgICAgICAgICAgIGlmICghZ2FudHRFdmVudC5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgc2V0R2FudHRFdmVudCh7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICAgICAgY2hhbmdlZFRhc2s6IHRhc2ssXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxTZWxlY3RlZFRhc2s6IHRhc2tcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwibW91c2VsZWF2ZVwiKSB7XG4gICAgICAgICAgICBpZiAoZ2FudHRFdmVudC5hY3Rpb24gPT09IFwibW91c2VlbnRlclwiKSB7XG4gICAgICAgICAgICAgIHNldEdhbnR0RXZlbnQoe1xuICAgICAgICAgICAgICAgIGFjdGlvbjogXCJcIlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJkYmxjbGlja1wiKSB7XG4gICAgICAgICAgICAhIW9uRG91YmxlQ2xpY2sgJiYgb25Eb3VibGVDbGljayh0YXNrKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJjbGlja1wiKSB7XG4gICAgICAgICAgICAhIW9uQ2xpY2sgJiYgb25DbGljayh0YXNrKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJtb3ZlXCIpIHtcbiAgICAgICAgICAgIHZhciBfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUzO1xuXG4gICAgICAgICAgICBpZiAoIShzdmcgIT09IG51bGwgJiYgc3ZnICE9PSB2b2lkIDAgJiYgc3ZnLmN1cnJlbnQpIHx8ICFwb2ludCkgcmV0dXJuO1xuICAgICAgICAgICAgcG9pbnQueCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICAgICAgICB2YXIgY3Vyc29yID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKChfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUzID0gc3ZnLmN1cnJlbnQuZ2V0U2NyZWVuQ1RNKCkpID09PSBudWxsIHx8IF9zdmckY3VycmVudCRnZXRTY3JlZTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdmckY3VycmVudCRnZXRTY3JlZTMuaW52ZXJzZSgpKTtcbiAgICAgICAgICAgIHNldEluaXRFdmVudFgxRGVsdGEoY3Vyc29yLnggLSB0YXNrLngxKTtcbiAgICAgICAgICAgIHNldEdhbnR0RXZlbnQoe1xuICAgICAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICAgICAgY2hhbmdlZFRhc2s6IHRhc2ssXG4gICAgICAgICAgICAgIG9yaWdpbmFsU2VsZWN0ZWRUYXNrOiB0YXNrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0R2FudHRFdmVudCh7XG4gICAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgICBjaGFuZ2VkVGFzazogdGFzayxcbiAgICAgICAgICAgICAgb3JpZ2luYWxTZWxlY3RlZFRhc2s6IHRhc2tcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSgpO1xuICAgICAgfSgpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNvbnRlbnRcIlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcImFycm93c1wiLFxuICAgIGZpbGw6IGFycm93Q29sb3IsXG4gICAgc3Ryb2tlOiBhcnJvd0NvbG9yXG4gIH0sIHRhc2tzLm1hcChmdW5jdGlvbiAodGFzaykge1xuICAgIHJldHVybiB0YXNrLmJhckNoaWxkcmVuLm1hcChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEFycm93LCB7XG4gICAgICAgIGtleTogXCJBcnJvdyBmcm9tIFwiICsgdGFzay5pZCArIFwiIHRvIFwiICsgdGFza3NbY2hpbGQuaW5kZXhdLmlkLFxuICAgICAgICB0YXNrRnJvbTogdGFzayxcbiAgICAgICAgdGFza1RvOiB0YXNrc1tjaGlsZC5pbmRleF0sXG4gICAgICAgIHJvd0hlaWdodDogcm93SGVpZ2h0LFxuICAgICAgICB0YXNrSGVpZ2h0OiB0YXNrSGVpZ2h0LFxuICAgICAgICBhcnJvd0luZGVudDogYXJyb3dJbmRlbnQsXG4gICAgICAgIHJ0bDogcnRsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcImJhclwiLFxuICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgZm9udFNpemU6IGZvbnRTaXplXG4gIH0sIHRhc2tzLm1hcChmdW5jdGlvbiAodGFzaykge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFRhc2tJdGVtLCB7XG4gICAgICB0YXNrOiB0YXNrLFxuICAgICAgYXJyb3dJbmRlbnQ6IGFycm93SW5kZW50LFxuICAgICAgdGFza0hlaWdodDogdGFza0hlaWdodCxcbiAgICAgIGlzUHJvZ3Jlc3NDaGFuZ2VhYmxlOiAhIW9uUHJvZ3Jlc3NDaGFuZ2UgJiYgIXRhc2suaXNEaXNhYmxlZCxcbiAgICAgIGlzRGF0ZUNoYW5nZWFibGU6ICEhb25EYXRlQ2hhbmdlICYmICF0YXNrLmlzRGlzYWJsZWQsXG4gICAgICBpc0RlbGV0ZTogIXRhc2suaXNEaXNhYmxlZCxcbiAgICAgIG9uRXZlbnRTdGFydDogaGFuZGxlQmFyRXZlbnRTdGFydCxcbiAgICAgIGtleTogdGFzay5pZCxcbiAgICAgIGlzU2VsZWN0ZWQ6ICEhc2VsZWN0ZWRUYXNrICYmIHRhc2suaWQgPT09IHNlbGVjdGVkVGFzay5pZCxcbiAgICAgIHJ0bDogcnRsXG4gICAgfSk7XG4gIH0pKSk7XG59O1xuXG52YXIgc3R5bGVzJDkgPSB7XCJnYW50dFZlcnRpY2FsQ29udGFpbmVyXCI6XCJfQ1pqdURcIixcImhvcml6b250YWxDb250YWluZXJcIjpcIl8yQjJ6dlwiLFwid3JhcHBlclwiOlwiXzNlVUxmXCJ9O1xuXG52YXIgVGFza0dhbnR0ID0gZnVuY3Rpb24gVGFza0dhbnR0KF9yZWYpIHtcbiAgdmFyIGdyaWRQcm9wcyA9IF9yZWYuZ3JpZFByb3BzLFxuICAgICAgY2FsZW5kYXJQcm9wcyA9IF9yZWYuY2FsZW5kYXJQcm9wcyxcbiAgICAgIGJhclByb3BzID0gX3JlZi5iYXJQcm9wcyxcbiAgICAgIGdhbnR0SGVpZ2h0ID0gX3JlZi5nYW50dEhlaWdodCxcbiAgICAgIHNjcm9sbFkgPSBfcmVmLnNjcm9sbFksXG4gICAgICBzY3JvbGxYID0gX3JlZi5zY3JvbGxYO1xuICB2YXIgZ2FudHRTVkdSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHZhciBob3Jpem9udGFsQ29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICB2YXIgdmVydGljYWxHYW50dENvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcblxuICB2YXIgbmV3QmFyUHJvcHMgPSBfZXh0ZW5kcyh7fSwgYmFyUHJvcHMsIHtcbiAgICBzdmc6IGdhbnR0U1ZHUmVmXG4gIH0pO1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGhvcml6b250YWxDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgaG9yaXpvbnRhbENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbFRvcCA9IHNjcm9sbFk7XG4gICAgfVxuICB9LCBbc2Nyb2xsWV0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICh2ZXJ0aWNhbEdhbnR0Q29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHZlcnRpY2FsR2FudHRDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxMZWZ0ID0gc2Nyb2xsWDtcbiAgICB9XG4gIH0sIFtzY3JvbGxYXSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ5LmdhbnR0VmVydGljYWxDb250YWluZXIsXG4gICAgcmVmOiB2ZXJ0aWNhbEdhbnR0Q29udGFpbmVyUmVmLFxuICAgIGRpcjogXCJsdHJcIlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHtcbiAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICAgIHdpZHRoOiBncmlkUHJvcHMuc3ZnV2lkdGgsXG4gICAgaGVpZ2h0OiBjYWxlbmRhclByb3BzLmhlYWRlckhlaWdodCxcbiAgICBmb250RmFtaWx5OiBiYXJQcm9wcy5mb250RmFtaWx5XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FsZW5kYXIsIE9iamVjdC5hc3NpZ24oe30sIGNhbGVuZGFyUHJvcHMpKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHJlZjogaG9yaXpvbnRhbENvbnRhaW5lclJlZixcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ5Lmhvcml6b250YWxDb250YWluZXIsXG4gICAgc3R5bGU6IGdhbnR0SGVpZ2h0ID8ge1xuICAgICAgaGVpZ2h0OiBnYW50dEhlaWdodCxcbiAgICAgIHdpZHRoOiBncmlkUHJvcHMuc3ZnV2lkdGhcbiAgICB9IDoge1xuICAgICAgd2lkdGg6IGdyaWRQcm9wcy5zdmdXaWR0aFxuICAgIH1cbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7XG4gICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgICB3aWR0aDogZ3JpZFByb3BzLnN2Z1dpZHRoLFxuICAgIGhlaWdodDogYmFyUHJvcHMucm93SGVpZ2h0ICogYmFyUHJvcHMudGFza3MubGVuZ3RoLFxuICAgIGZvbnRGYW1pbHk6IGJhclByb3BzLmZvbnRGYW1pbHksXG4gICAgcmVmOiBnYW50dFNWR1JlZlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KEdyaWQsIE9iamVjdC5hc3NpZ24oe30sIGdyaWRQcm9wcykpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFRhc2tHYW50dENvbnRlbnQsIE9iamVjdC5hc3NpZ24oe30sIG5ld0JhclByb3BzKSkpKSk7XG59O1xuXG52YXIgc3R5bGVzJGEgPSB7XCJzY3JvbGxXcmFwcGVyXCI6XCJfMms5WXNcIixcInNjcm9sbFwiOlwiXzE5amdXXCJ9O1xuXG52YXIgSG9yaXpvbnRhbFNjcm9sbCA9IGZ1bmN0aW9uIEhvcml6b250YWxTY3JvbGwoX3JlZikge1xuICB2YXIgc2Nyb2xsID0gX3JlZi5zY3JvbGwsXG4gICAgICBzdmdXaWR0aCA9IF9yZWYuc3ZnV2lkdGgsXG4gICAgICB0YXNrTGlzdFdpZHRoID0gX3JlZi50YXNrTGlzdFdpZHRoLFxuICAgICAgcnRsID0gX3JlZi5ydGwsXG4gICAgICBvblNjcm9sbCA9IF9yZWYub25TY3JvbGw7XG4gIHZhciBzY3JvbGxSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNjcm9sbFJlZi5jdXJyZW50KSB7XG4gICAgICBzY3JvbGxSZWYuY3VycmVudC5zY3JvbGxMZWZ0ID0gc2Nyb2xsO1xuICAgIH1cbiAgfSwgW3Njcm9sbF0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgZGlyOiBcImx0clwiLFxuICAgIHN0eWxlOiB7XG4gICAgICBtYXJnaW46IHJ0bCA/IFwiMHB4IFwiICsgdGFza0xpc3RXaWR0aCArIFwicHggMHB4IDBweFwiIDogXCIwcHggMHB4IDBweCBcIiArIHRhc2tMaXN0V2lkdGggKyBcInB4XCJcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogc3R5bGVzJGEuc2Nyb2xsV3JhcHBlcixcbiAgICBvblNjcm9sbDogb25TY3JvbGwsXG4gICAgcmVmOiBzY3JvbGxSZWZcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgc3R5bGU6IHtcbiAgICAgIHdpZHRoOiBzdmdXaWR0aFxuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkYS5zY3JvbGxcbiAgfSkpO1xufTtcblxudmFyIEdhbnR0ID0gZnVuY3Rpb24gR2FudHQoX3JlZikge1xuICB2YXIgdGFza3MgPSBfcmVmLnRhc2tzLFxuICAgICAgX3JlZiRoZWFkZXJIZWlnaHQgPSBfcmVmLmhlYWRlckhlaWdodCxcbiAgICAgIGhlYWRlckhlaWdodCA9IF9yZWYkaGVhZGVySGVpZ2h0ID09PSB2b2lkIDAgPyA1MCA6IF9yZWYkaGVhZGVySGVpZ2h0LFxuICAgICAgX3JlZiRjb2x1bW5XaWR0aCA9IF9yZWYuY29sdW1uV2lkdGgsXG4gICAgICBjb2x1bW5XaWR0aCA9IF9yZWYkY29sdW1uV2lkdGggPT09IHZvaWQgMCA/IDYwIDogX3JlZiRjb2x1bW5XaWR0aCxcbiAgICAgIF9yZWYkbGlzdENlbGxXaWR0aCA9IF9yZWYubGlzdENlbGxXaWR0aCxcbiAgICAgIGxpc3RDZWxsV2lkdGggPSBfcmVmJGxpc3RDZWxsV2lkdGggPT09IHZvaWQgMCA/IFwiMTU1cHhcIiA6IF9yZWYkbGlzdENlbGxXaWR0aCxcbiAgICAgIF9yZWYkcm93SGVpZ2h0ID0gX3JlZi5yb3dIZWlnaHQsXG4gICAgICByb3dIZWlnaHQgPSBfcmVmJHJvd0hlaWdodCA9PT0gdm9pZCAwID8gNTAgOiBfcmVmJHJvd0hlaWdodCxcbiAgICAgIF9yZWYkZ2FudHRIZWlnaHQgPSBfcmVmLmdhbnR0SGVpZ2h0LFxuICAgICAgZ2FudHRIZWlnaHQgPSBfcmVmJGdhbnR0SGVpZ2h0ID09PSB2b2lkIDAgPyAwIDogX3JlZiRnYW50dEhlaWdodCxcbiAgICAgIF9yZWYkdmlld01vZGUgPSBfcmVmLnZpZXdNb2RlLFxuICAgICAgdmlld01vZGUgPSBfcmVmJHZpZXdNb2RlID09PSB2b2lkIDAgPyBWaWV3TW9kZS5EYXkgOiBfcmVmJHZpZXdNb2RlLFxuICAgICAgX3JlZiRwcmVTdGVwc0NvdW50ID0gX3JlZi5wcmVTdGVwc0NvdW50LFxuICAgICAgcHJlU3RlcHNDb3VudCA9IF9yZWYkcHJlU3RlcHNDb3VudCA9PT0gdm9pZCAwID8gMSA6IF9yZWYkcHJlU3RlcHNDb3VudCxcbiAgICAgIF9yZWYkbG9jYWxlID0gX3JlZi5sb2NhbGUsXG4gICAgICBsb2NhbGUgPSBfcmVmJGxvY2FsZSA9PT0gdm9pZCAwID8gXCJlbi1HQlwiIDogX3JlZiRsb2NhbGUsXG4gICAgICBfcmVmJGJhckZpbGwgPSBfcmVmLmJhckZpbGwsXG4gICAgICBiYXJGaWxsID0gX3JlZiRiYXJGaWxsID09PSB2b2lkIDAgPyA2MCA6IF9yZWYkYmFyRmlsbCxcbiAgICAgIF9yZWYkYmFyQ29ybmVyUmFkaXVzID0gX3JlZi5iYXJDb3JuZXJSYWRpdXMsXG4gICAgICBiYXJDb3JuZXJSYWRpdXMgPSBfcmVmJGJhckNvcm5lclJhZGl1cyA9PT0gdm9pZCAwID8gMyA6IF9yZWYkYmFyQ29ybmVyUmFkaXVzLFxuICAgICAgX3JlZiRiYXJQcm9ncmVzc0NvbG9yID0gX3JlZi5iYXJQcm9ncmVzc0NvbG9yLFxuICAgICAgYmFyUHJvZ3Jlc3NDb2xvciA9IF9yZWYkYmFyUHJvZ3Jlc3NDb2xvciA9PT0gdm9pZCAwID8gXCIjYTNhM2ZmXCIgOiBfcmVmJGJhclByb2dyZXNzQ29sb3IsXG4gICAgICBfcmVmJGJhclByb2dyZXNzU2VsZWMgPSBfcmVmLmJhclByb2dyZXNzU2VsZWN0ZWRDb2xvcixcbiAgICAgIGJhclByb2dyZXNzU2VsZWN0ZWRDb2xvciA9IF9yZWYkYmFyUHJvZ3Jlc3NTZWxlYyA9PT0gdm9pZCAwID8gXCIjODI4MmY1XCIgOiBfcmVmJGJhclByb2dyZXNzU2VsZWMsXG4gICAgICBfcmVmJGJhckJhY2tncm91bmRDb2wgPSBfcmVmLmJhckJhY2tncm91bmRDb2xvcixcbiAgICAgIGJhckJhY2tncm91bmRDb2xvciA9IF9yZWYkYmFyQmFja2dyb3VuZENvbCA9PT0gdm9pZCAwID8gXCIjYjhjMmNjXCIgOiBfcmVmJGJhckJhY2tncm91bmRDb2wsXG4gICAgICBfcmVmJGJhckJhY2tncm91bmRTZWwgPSBfcmVmLmJhckJhY2tncm91bmRTZWxlY3RlZENvbG9yLFxuICAgICAgYmFyQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IgPSBfcmVmJGJhckJhY2tncm91bmRTZWwgPT09IHZvaWQgMCA/IFwiI2FlYjhjMlwiIDogX3JlZiRiYXJCYWNrZ3JvdW5kU2VsLFxuICAgICAgX3JlZiRwcm9qZWN0UHJvZ3Jlc3NDID0gX3JlZi5wcm9qZWN0UHJvZ3Jlc3NDb2xvcixcbiAgICAgIHByb2plY3RQcm9ncmVzc0NvbG9yID0gX3JlZiRwcm9qZWN0UHJvZ3Jlc3NDID09PSB2b2lkIDAgPyBcIiM3ZGI1OWFcIiA6IF9yZWYkcHJvamVjdFByb2dyZXNzQyxcbiAgICAgIF9yZWYkcHJvamVjdFByb2dyZXNzUyA9IF9yZWYucHJvamVjdFByb2dyZXNzU2VsZWN0ZWRDb2xvcixcbiAgICAgIHByb2plY3RQcm9ncmVzc1NlbGVjdGVkQ29sb3IgPSBfcmVmJHByb2plY3RQcm9ncmVzc1MgPT09IHZvaWQgMCA/IFwiIzU5YTk4NVwiIDogX3JlZiRwcm9qZWN0UHJvZ3Jlc3NTLFxuICAgICAgX3JlZiRwcm9qZWN0QmFja2dyb3VuID0gX3JlZi5wcm9qZWN0QmFja2dyb3VuZENvbG9yLFxuICAgICAgcHJvamVjdEJhY2tncm91bmRDb2xvciA9IF9yZWYkcHJvamVjdEJhY2tncm91biA9PT0gdm9pZCAwID8gXCIjZmFjNDY1XCIgOiBfcmVmJHByb2plY3RCYWNrZ3JvdW4sXG4gICAgICBfcmVmJHByb2plY3RCYWNrZ3JvdW4yID0gX3JlZi5wcm9qZWN0QmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsXG4gICAgICBwcm9qZWN0QmFja2dyb3VuZFNlbGVjdGVkQ29sb3IgPSBfcmVmJHByb2plY3RCYWNrZ3JvdW4yID09PSB2b2lkIDAgPyBcIiNmN2JiNTNcIiA6IF9yZWYkcHJvamVjdEJhY2tncm91bjIsXG4gICAgICBfcmVmJG1pbGVzdG9uZUJhY2tncm8gPSBfcmVmLm1pbGVzdG9uZUJhY2tncm91bmRDb2xvcixcbiAgICAgIG1pbGVzdG9uZUJhY2tncm91bmRDb2xvciA9IF9yZWYkbWlsZXN0b25lQmFja2dybyA9PT0gdm9pZCAwID8gXCIjZjFjNDUzXCIgOiBfcmVmJG1pbGVzdG9uZUJhY2tncm8sXG4gICAgICBfcmVmJG1pbGVzdG9uZUJhY2tncm8yID0gX3JlZi5taWxlc3RvbmVCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcixcbiAgICAgIG1pbGVzdG9uZUJhY2tncm91bmRTZWxlY3RlZENvbG9yID0gX3JlZiRtaWxlc3RvbmVCYWNrZ3JvMiA9PT0gdm9pZCAwID8gXCIjZjI5ZTRjXCIgOiBfcmVmJG1pbGVzdG9uZUJhY2tncm8yLFxuICAgICAgX3JlZiRydGwgPSBfcmVmLnJ0bCxcbiAgICAgIHJ0bCA9IF9yZWYkcnRsID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkcnRsLFxuICAgICAgX3JlZiRoYW5kbGVXaWR0aCA9IF9yZWYuaGFuZGxlV2lkdGgsXG4gICAgICBoYW5kbGVXaWR0aCA9IF9yZWYkaGFuZGxlV2lkdGggPT09IHZvaWQgMCA/IDggOiBfcmVmJGhhbmRsZVdpZHRoLFxuICAgICAgX3JlZiR0aW1lU3RlcCA9IF9yZWYudGltZVN0ZXAsXG4gICAgICB0aW1lU3RlcCA9IF9yZWYkdGltZVN0ZXAgPT09IHZvaWQgMCA/IDMwMDAwMCA6IF9yZWYkdGltZVN0ZXAsXG4gICAgICBfcmVmJGFycm93Q29sb3IgPSBfcmVmLmFycm93Q29sb3IsXG4gICAgICBhcnJvd0NvbG9yID0gX3JlZiRhcnJvd0NvbG9yID09PSB2b2lkIDAgPyBcImdyZXlcIiA6IF9yZWYkYXJyb3dDb2xvcixcbiAgICAgIF9yZWYkZm9udEZhbWlseSA9IF9yZWYuZm9udEZhbWlseSxcbiAgICAgIGZvbnRGYW1pbHkgPSBfcmVmJGZvbnRGYW1pbHkgPT09IHZvaWQgMCA/IFwiQXJpYWwsIFJvYm90bywgT3h5Z2VuLCBVYnVudHUsIENhbnRhcmVsbCwgRmlyYSBTYW5zLCBEcm9pZCBTYW5zLCBIZWx2ZXRpY2EgTmV1ZVwiIDogX3JlZiRmb250RmFtaWx5LFxuICAgICAgX3JlZiRmb250U2l6ZSA9IF9yZWYuZm9udFNpemUsXG4gICAgICBmb250U2l6ZSA9IF9yZWYkZm9udFNpemUgPT09IHZvaWQgMCA/IFwiMTRweFwiIDogX3JlZiRmb250U2l6ZSxcbiAgICAgIF9yZWYkYXJyb3dJbmRlbnQgPSBfcmVmLmFycm93SW5kZW50LFxuICAgICAgYXJyb3dJbmRlbnQgPSBfcmVmJGFycm93SW5kZW50ID09PSB2b2lkIDAgPyAyMCA6IF9yZWYkYXJyb3dJbmRlbnQsXG4gICAgICBfcmVmJHRvZGF5Q29sb3IgPSBfcmVmLnRvZGF5Q29sb3IsXG4gICAgICB0b2RheUNvbG9yID0gX3JlZiR0b2RheUNvbG9yID09PSB2b2lkIDAgPyBcInJnYmEoMjUyLCAyNDgsIDIyNywgMC41KVwiIDogX3JlZiR0b2RheUNvbG9yLFxuICAgICAgdmlld0RhdGUgPSBfcmVmLnZpZXdEYXRlLFxuICAgICAgX3JlZiRUb29sdGlwQ29udGVudCA9IF9yZWYuVG9vbHRpcENvbnRlbnQsXG4gICAgICBUb29sdGlwQ29udGVudCA9IF9yZWYkVG9vbHRpcENvbnRlbnQgPT09IHZvaWQgMCA/IFN0YW5kYXJkVG9vbHRpcENvbnRlbnQgOiBfcmVmJFRvb2x0aXBDb250ZW50LFxuICAgICAgX3JlZiRUYXNrTGlzdEhlYWRlciA9IF9yZWYuVGFza0xpc3RIZWFkZXIsXG4gICAgICBUYXNrTGlzdEhlYWRlciA9IF9yZWYkVGFza0xpc3RIZWFkZXIgPT09IHZvaWQgMCA/IFRhc2tMaXN0SGVhZGVyRGVmYXVsdCA6IF9yZWYkVGFza0xpc3RIZWFkZXIsXG4gICAgICBfcmVmJFRhc2tMaXN0VGFibGUgPSBfcmVmLlRhc2tMaXN0VGFibGUsXG4gICAgICBUYXNrTGlzdFRhYmxlID0gX3JlZiRUYXNrTGlzdFRhYmxlID09PSB2b2lkIDAgPyBUYXNrTGlzdFRhYmxlRGVmYXVsdCA6IF9yZWYkVGFza0xpc3RUYWJsZSxcbiAgICAgIG9uRGF0ZUNoYW5nZSA9IF9yZWYub25EYXRlQ2hhbmdlLFxuICAgICAgb25Qcm9ncmVzc0NoYW5nZSA9IF9yZWYub25Qcm9ncmVzc0NoYW5nZSxcbiAgICAgIG9uRG91YmxlQ2xpY2sgPSBfcmVmLm9uRG91YmxlQ2xpY2ssXG4gICAgICBvbkNsaWNrID0gX3JlZi5vbkNsaWNrLFxuICAgICAgb25EZWxldGUgPSBfcmVmLm9uRGVsZXRlLFxuICAgICAgb25TZWxlY3QgPSBfcmVmLm9uU2VsZWN0LFxuICAgICAgb25FeHBhbmRlckNsaWNrID0gX3JlZi5vbkV4cGFuZGVyQ2xpY2s7XG4gIHZhciB3cmFwcGVyUmVmID0gdXNlUmVmKG51bGwpO1xuICB2YXIgdGFza0xpc3RSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2dhbnR0RGF0ZVJhbmdlID0gZ2FudHREYXRlUmFuZ2UodGFza3MsIHZpZXdNb2RlLCBwcmVTdGVwc0NvdW50KSxcbiAgICAgICAgc3RhcnREYXRlID0gX2dhbnR0RGF0ZVJhbmdlWzBdLFxuICAgICAgICBlbmREYXRlID0gX2dhbnR0RGF0ZVJhbmdlWzFdO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZpZXdNb2RlOiB2aWV3TW9kZSxcbiAgICAgIGRhdGVzOiBzZWVkRGF0ZXMoc3RhcnREYXRlLCBlbmREYXRlLCB2aWV3TW9kZSlcbiAgICB9O1xuICB9KSxcbiAgICAgIGRhdGVTZXR1cCA9IF91c2VTdGF0ZVswXSxcbiAgICAgIHNldERhdGVTZXR1cCA9IF91c2VTdGF0ZVsxXTtcblxuICB2YXIgX3VzZVN0YXRlMiA9IHVzZVN0YXRlKHVuZGVmaW5lZCksXG4gICAgICBjdXJyZW50Vmlld0RhdGUgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0Q3VycmVudFZpZXdEYXRlID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKDApLFxuICAgICAgdGFza0xpc3RXaWR0aCA9IF91c2VTdGF0ZTNbMF0sXG4gICAgICBzZXRUYXNrTGlzdFdpZHRoID0gX3VzZVN0YXRlM1sxXTtcblxuICB2YXIgX3VzZVN0YXRlNCA9IHVzZVN0YXRlKDApLFxuICAgICAgc3ZnQ29udGFpbmVyV2lkdGggPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0U3ZnQ29udGFpbmVyV2lkdGggPSBfdXNlU3RhdGU0WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUoZ2FudHRIZWlnaHQpLFxuICAgICAgc3ZnQ29udGFpbmVySGVpZ2h0ID0gX3VzZVN0YXRlNVswXSxcbiAgICAgIHNldFN2Z0NvbnRhaW5lckhlaWdodCA9IF91c2VTdGF0ZTVbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTYgPSB1c2VTdGF0ZShbXSksXG4gICAgICBiYXJUYXNrcyA9IF91c2VTdGF0ZTZbMF0sXG4gICAgICBzZXRCYXJUYXNrcyA9IF91c2VTdGF0ZTZbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTcgPSB1c2VTdGF0ZSh7XG4gICAgYWN0aW9uOiBcIlwiXG4gIH0pLFxuICAgICAgZ2FudHRFdmVudCA9IF91c2VTdGF0ZTdbMF0sXG4gICAgICBzZXRHYW50dEV2ZW50ID0gX3VzZVN0YXRlN1sxXTtcblxuICB2YXIgdGFza0hlaWdodCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiByb3dIZWlnaHQgKiBiYXJGaWxsIC8gMTAwO1xuICB9LCBbcm93SGVpZ2h0LCBiYXJGaWxsXSk7XG5cbiAgdmFyIF91c2VTdGF0ZTggPSB1c2VTdGF0ZSgpLFxuICAgICAgc2VsZWN0ZWRUYXNrID0gX3VzZVN0YXRlOFswXSxcbiAgICAgIHNldFNlbGVjdGVkVGFzayA9IF91c2VTdGF0ZThbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTkgPSB1c2VTdGF0ZShudWxsKSxcbiAgICAgIGZhaWxlZFRhc2sgPSBfdXNlU3RhdGU5WzBdLFxuICAgICAgc2V0RmFpbGVkVGFzayA9IF91c2VTdGF0ZTlbMV07XG5cbiAgdmFyIHN2Z1dpZHRoID0gZGF0ZVNldHVwLmRhdGVzLmxlbmd0aCAqIGNvbHVtbldpZHRoO1xuICB2YXIgZ2FudHRGdWxsSGVpZ2h0ID0gYmFyVGFza3MubGVuZ3RoICogcm93SGVpZ2h0O1xuXG4gIHZhciBfdXNlU3RhdGUxMCA9IHVzZVN0YXRlKDApLFxuICAgICAgc2Nyb2xsWSA9IF91c2VTdGF0ZTEwWzBdLFxuICAgICAgc2V0U2Nyb2xsWSA9IF91c2VTdGF0ZTEwWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUxMSA9IHVzZVN0YXRlKC0xKSxcbiAgICAgIHNjcm9sbFggPSBfdXNlU3RhdGUxMVswXSxcbiAgICAgIHNldFNjcm9sbFggPSBfdXNlU3RhdGUxMVsxXTtcblxuICB2YXIgX3VzZVN0YXRlMTIgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgICBpZ25vcmVTY3JvbGxFdmVudCA9IF91c2VTdGF0ZTEyWzBdLFxuICAgICAgc2V0SWdub3JlU2Nyb2xsRXZlbnQgPSBfdXNlU3RhdGUxMlsxXTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBmaWx0ZXJlZFRhc2tzO1xuXG4gICAgaWYgKG9uRXhwYW5kZXJDbGljaykge1xuICAgICAgZmlsdGVyZWRUYXNrcyA9IHJlbW92ZUhpZGRlblRhc2tzKHRhc2tzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsdGVyZWRUYXNrcyA9IHRhc2tzO1xuICAgIH1cblxuICAgIGZpbHRlcmVkVGFza3MgPSBmaWx0ZXJlZFRhc2tzLnNvcnQoc29ydFRhc2tzKTtcblxuICAgIHZhciBfZ2FudHREYXRlUmFuZ2UyID0gZ2FudHREYXRlUmFuZ2UoZmlsdGVyZWRUYXNrcywgdmlld01vZGUsIHByZVN0ZXBzQ291bnQpLFxuICAgICAgICBzdGFydERhdGUgPSBfZ2FudHREYXRlUmFuZ2UyWzBdLFxuICAgICAgICBlbmREYXRlID0gX2dhbnR0RGF0ZVJhbmdlMlsxXTtcblxuICAgIHZhciBuZXdEYXRlcyA9IHNlZWREYXRlcyhzdGFydERhdGUsIGVuZERhdGUsIHZpZXdNb2RlKTtcblxuICAgIGlmIChydGwpIHtcbiAgICAgIG5ld0RhdGVzID0gbmV3RGF0ZXMucmV2ZXJzZSgpO1xuXG4gICAgICBpZiAoc2Nyb2xsWCA9PT0gLTEpIHtcbiAgICAgICAgc2V0U2Nyb2xsWChuZXdEYXRlcy5sZW5ndGggKiBjb2x1bW5XaWR0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0RGF0ZVNldHVwKHtcbiAgICAgIGRhdGVzOiBuZXdEYXRlcyxcbiAgICAgIHZpZXdNb2RlOiB2aWV3TW9kZVxuICAgIH0pO1xuICAgIHNldEJhclRhc2tzKGNvbnZlcnRUb0JhclRhc2tzKGZpbHRlcmVkVGFza3MsIG5ld0RhdGVzLCBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBiYXJDb3JuZXJSYWRpdXMsIGhhbmRsZVdpZHRoLCBydGwsIGJhclByb2dyZXNzQ29sb3IsIGJhclByb2dyZXNzU2VsZWN0ZWRDb2xvciwgYmFyQmFja2dyb3VuZENvbG9yLCBiYXJCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvciwgcHJvamVjdFByb2dyZXNzQ29sb3IsIHByb2plY3RQcm9ncmVzc1NlbGVjdGVkQ29sb3IsIHByb2plY3RCYWNrZ3JvdW5kQ29sb3IsIHByb2plY3RCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvciwgbWlsZXN0b25lQmFja2dyb3VuZENvbG9yLCBtaWxlc3RvbmVCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcikpO1xuICB9LCBbdGFza3MsIHZpZXdNb2RlLCBwcmVTdGVwc0NvdW50LCByb3dIZWlnaHQsIGJhckNvcm5lclJhZGl1cywgY29sdW1uV2lkdGgsIHRhc2tIZWlnaHQsIGhhbmRsZVdpZHRoLCBiYXJQcm9ncmVzc0NvbG9yLCBiYXJQcm9ncmVzc1NlbGVjdGVkQ29sb3IsIGJhckJhY2tncm91bmRDb2xvciwgYmFyQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsIHByb2plY3RQcm9ncmVzc0NvbG9yLCBwcm9qZWN0UHJvZ3Jlc3NTZWxlY3RlZENvbG9yLCBwcm9qZWN0QmFja2dyb3VuZENvbG9yLCBwcm9qZWN0QmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsIG1pbGVzdG9uZUJhY2tncm91bmRDb2xvciwgbWlsZXN0b25lQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsIHJ0bCwgc2Nyb2xsWCwgb25FeHBhbmRlckNsaWNrXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHZpZXdNb2RlID09PSBkYXRlU2V0dXAudmlld01vZGUgJiYgKHZpZXdEYXRlICYmICFjdXJyZW50Vmlld0RhdGUgfHwgdmlld0RhdGUgJiYgKGN1cnJlbnRWaWV3RGF0ZSA9PT0gbnVsbCB8fCBjdXJyZW50Vmlld0RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRWaWV3RGF0ZS52YWx1ZU9mKCkpICE9PSB2aWV3RGF0ZS52YWx1ZU9mKCkpKSB7XG4gICAgICB2YXIgZGF0ZXMgPSBkYXRlU2V0dXAuZGF0ZXM7XG4gICAgICB2YXIgaW5kZXggPSBkYXRlcy5maW5kSW5kZXgoZnVuY3Rpb24gKGQsIGkpIHtcbiAgICAgICAgcmV0dXJuIHZpZXdEYXRlLnZhbHVlT2YoKSA+PSBkLnZhbHVlT2YoKSAmJiBpICsgMSAhPT0gZGF0ZXMubGVuZ3RoICYmIHZpZXdEYXRlLnZhbHVlT2YoKSA8IGRhdGVzW2kgKyAxXS52YWx1ZU9mKCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldEN1cnJlbnRWaWV3RGF0ZSh2aWV3RGF0ZSk7XG4gICAgICBzZXRTY3JvbGxYKGNvbHVtbldpZHRoICogaW5kZXgpO1xuICAgIH1cbiAgfSwgW3ZpZXdEYXRlLCBjb2x1bW5XaWR0aCwgZGF0ZVNldHVwLmRhdGVzLCBkYXRlU2V0dXAudmlld01vZGUsIHZpZXdNb2RlLCBjdXJyZW50Vmlld0RhdGUsIHNldEN1cnJlbnRWaWV3RGF0ZV0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjaGFuZ2VkVGFzayA9IGdhbnR0RXZlbnQuY2hhbmdlZFRhc2ssXG4gICAgICAgIGFjdGlvbiA9IGdhbnR0RXZlbnQuYWN0aW9uO1xuXG4gICAgaWYgKGNoYW5nZWRUYXNrKSB7XG4gICAgICBpZiAoYWN0aW9uID09PSBcImRlbGV0ZVwiKSB7XG4gICAgICAgIHNldEdhbnR0RXZlbnQoe1xuICAgICAgICAgIGFjdGlvbjogXCJcIlxuICAgICAgICB9KTtcbiAgICAgICAgc2V0QmFyVGFza3MoYmFyVGFza3MuZmlsdGVyKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIHQuaWQgIT09IGNoYW5nZWRUYXNrLmlkO1xuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJtb3ZlXCIgfHwgYWN0aW9uID09PSBcImVuZFwiIHx8IGFjdGlvbiA9PT0gXCJzdGFydFwiIHx8IGFjdGlvbiA9PT0gXCJwcm9ncmVzc1wiKSB7XG4gICAgICAgIHZhciBwcmV2U3RhdGVUYXNrID0gYmFyVGFza3MuZmluZChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiB0LmlkID09PSBjaGFuZ2VkVGFzay5pZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHByZXZTdGF0ZVRhc2sgJiYgKHByZXZTdGF0ZVRhc2suc3RhcnQuZ2V0VGltZSgpICE9PSBjaGFuZ2VkVGFzay5zdGFydC5nZXRUaW1lKCkgfHwgcHJldlN0YXRlVGFzay5lbmQuZ2V0VGltZSgpICE9PSBjaGFuZ2VkVGFzay5lbmQuZ2V0VGltZSgpIHx8IHByZXZTdGF0ZVRhc2sucHJvZ3Jlc3MgIT09IGNoYW5nZWRUYXNrLnByb2dyZXNzKSkge1xuICAgICAgICAgIHZhciBuZXdUYXNrTGlzdCA9IGJhclRhc2tzLm1hcChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIHQuaWQgPT09IGNoYW5nZWRUYXNrLmlkID8gY2hhbmdlZFRhc2sgOiB0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldEJhclRhc2tzKG5ld1Rhc2tMaXN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2dhbnR0RXZlbnQsIGJhclRhc2tzXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGZhaWxlZFRhc2spIHtcbiAgICAgIHNldEJhclRhc2tzKGJhclRhc2tzLm1hcChmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4gdC5pZCAhPT0gZmFpbGVkVGFzay5pZCA/IHQgOiBmYWlsZWRUYXNrO1xuICAgICAgfSkpO1xuICAgICAgc2V0RmFpbGVkVGFzayhudWxsKTtcbiAgICB9XG4gIH0sIFtmYWlsZWRUYXNrLCBiYXJUYXNrc10pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghbGlzdENlbGxXaWR0aCkge1xuICAgICAgc2V0VGFza0xpc3RXaWR0aCgwKTtcbiAgICB9XG5cbiAgICBpZiAodGFza0xpc3RSZWYuY3VycmVudCkge1xuICAgICAgc2V0VGFza0xpc3RXaWR0aCh0YXNrTGlzdFJlZi5jdXJyZW50Lm9mZnNldFdpZHRoKTtcbiAgICB9XG4gIH0sIFt0YXNrTGlzdFJlZiwgbGlzdENlbGxXaWR0aF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICh3cmFwcGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHNldFN2Z0NvbnRhaW5lcldpZHRoKHdyYXBwZXJSZWYuY3VycmVudC5vZmZzZXRXaWR0aCAtIHRhc2tMaXN0V2lkdGgpO1xuICAgIH1cbiAgfSwgW3dyYXBwZXJSZWYsIHRhc2tMaXN0V2lkdGhdKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZ2FudHRIZWlnaHQpIHtcbiAgICAgIHNldFN2Z0NvbnRhaW5lckhlaWdodChnYW50dEhlaWdodCArIGhlYWRlckhlaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFN2Z0NvbnRhaW5lckhlaWdodCh0YXNrcy5sZW5ndGggKiByb3dIZWlnaHQgKyBoZWFkZXJIZWlnaHQpO1xuICAgIH1cbiAgfSwgW2dhbnR0SGVpZ2h0LCB0YXNrcywgaGVhZGVySGVpZ2h0LCByb3dIZWlnaHRdKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3dyYXBwZXJSZWYkY3VycmVudDtcblxuICAgIHZhciBoYW5kbGVXaGVlbCA9IGZ1bmN0aW9uIGhhbmRsZVdoZWVsKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQuZGVsdGFYKSB7XG4gICAgICAgIHZhciBzY3JvbGxNb3ZlID0gZXZlbnQuZGVsdGFYID8gZXZlbnQuZGVsdGFYIDogZXZlbnQuZGVsdGFZO1xuICAgICAgICB2YXIgbmV3U2Nyb2xsWCA9IHNjcm9sbFggKyBzY3JvbGxNb3ZlO1xuXG4gICAgICAgIGlmIChuZXdTY3JvbGxYIDwgMCkge1xuICAgICAgICAgIG5ld1Njcm9sbFggPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld1Njcm9sbFggPiBzdmdXaWR0aCkge1xuICAgICAgICAgIG5ld1Njcm9sbFggPSBzdmdXaWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFNjcm9sbFgobmV3U2Nyb2xsWCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9IGVsc2UgaWYgKGdhbnR0SGVpZ2h0KSB7XG4gICAgICAgIHZhciBuZXdTY3JvbGxZID0gc2Nyb2xsWSArIGV2ZW50LmRlbHRhWTtcblxuICAgICAgICBpZiAobmV3U2Nyb2xsWSA8IDApIHtcbiAgICAgICAgICBuZXdTY3JvbGxZID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChuZXdTY3JvbGxZID4gZ2FudHRGdWxsSGVpZ2h0IC0gZ2FudHRIZWlnaHQpIHtcbiAgICAgICAgICBuZXdTY3JvbGxZID0gZ2FudHRGdWxsSGVpZ2h0IC0gZ2FudHRIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3U2Nyb2xsWSAhPT0gc2Nyb2xsWSkge1xuICAgICAgICAgIHNldFNjcm9sbFkobmV3U2Nyb2xsWSk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZXRJZ25vcmVTY3JvbGxFdmVudCh0cnVlKTtcbiAgICB9O1xuXG4gICAgKF93cmFwcGVyUmVmJGN1cnJlbnQgPSB3cmFwcGVyUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF93cmFwcGVyUmVmJGN1cnJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93cmFwcGVyUmVmJGN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIGhhbmRsZVdoZWVsLCB7XG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3dyYXBwZXJSZWYkY3VycmVudDI7XG5cbiAgICAgIChfd3JhcHBlclJlZiRjdXJyZW50MiA9IHdyYXBwZXJSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX3dyYXBwZXJSZWYkY3VycmVudDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93cmFwcGVyUmVmJGN1cnJlbnQyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBoYW5kbGVXaGVlbCk7XG4gICAgfTtcbiAgfSwgW3dyYXBwZXJSZWYsIHNjcm9sbFksIHNjcm9sbFgsIGdhbnR0SGVpZ2h0LCBzdmdXaWR0aCwgcnRsLCBnYW50dEZ1bGxIZWlnaHRdKTtcblxuICB2YXIgaGFuZGxlU2Nyb2xsWSA9IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbFkoZXZlbnQpIHtcbiAgICBpZiAoc2Nyb2xsWSAhPT0gZXZlbnQuY3VycmVudFRhcmdldC5zY3JvbGxUb3AgJiYgIWlnbm9yZVNjcm9sbEV2ZW50KSB7XG4gICAgICBzZXRTY3JvbGxZKGV2ZW50LmN1cnJlbnRUYXJnZXQuc2Nyb2xsVG9wKTtcbiAgICAgIHNldElnbm9yZVNjcm9sbEV2ZW50KHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRJZ25vcmVTY3JvbGxFdmVudChmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoYW5kbGVTY3JvbGxYID0gZnVuY3Rpb24gaGFuZGxlU2Nyb2xsWChldmVudCkge1xuICAgIGlmIChzY3JvbGxYICE9PSBldmVudC5jdXJyZW50VGFyZ2V0LnNjcm9sbExlZnQgJiYgIWlnbm9yZVNjcm9sbEV2ZW50KSB7XG4gICAgICBzZXRTY3JvbGxYKGV2ZW50LmN1cnJlbnRUYXJnZXQuc2Nyb2xsTGVmdCk7XG4gICAgICBzZXRJZ25vcmVTY3JvbGxFdmVudCh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SWdub3JlU2Nyb2xsRXZlbnQoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIGhhbmRsZUtleURvd24oZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBuZXdTY3JvbGxZID0gc2Nyb2xsWTtcbiAgICB2YXIgbmV3U2Nyb2xsWCA9IHNjcm9sbFg7XG4gICAgdmFyIGlzWCA9IHRydWU7XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgY2FzZSBcIkRvd25cIjpcbiAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgbmV3U2Nyb2xsWSArPSByb3dIZWlnaHQ7XG4gICAgICAgIGlzWCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcIlVwXCI6XG4gICAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgICBuZXdTY3JvbGxZIC09IHJvd0hlaWdodDtcbiAgICAgICAgaXNYID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiTGVmdFwiOlxuICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICBuZXdTY3JvbGxYIC09IGNvbHVtbldpZHRoO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcIlJpZ2h0XCI6XG4gICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOlxuICAgICAgICBuZXdTY3JvbGxYICs9IGNvbHVtbldpZHRoO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoaXNYKSB7XG4gICAgICBpZiAobmV3U2Nyb2xsWCA8IDApIHtcbiAgICAgICAgbmV3U2Nyb2xsWCA9IDA7XG4gICAgICB9IGVsc2UgaWYgKG5ld1Njcm9sbFggPiBzdmdXaWR0aCkge1xuICAgICAgICBuZXdTY3JvbGxYID0gc3ZnV2lkdGg7XG4gICAgICB9XG5cbiAgICAgIHNldFNjcm9sbFgobmV3U2Nyb2xsWCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChuZXdTY3JvbGxZIDwgMCkge1xuICAgICAgICBuZXdTY3JvbGxZID0gMDtcbiAgICAgIH0gZWxzZSBpZiAobmV3U2Nyb2xsWSA+IGdhbnR0RnVsbEhlaWdodCAtIGdhbnR0SGVpZ2h0KSB7XG4gICAgICAgIG5ld1Njcm9sbFkgPSBnYW50dEZ1bGxIZWlnaHQgLSBnYW50dEhlaWdodDtcbiAgICAgIH1cblxuICAgICAgc2V0U2Nyb2xsWShuZXdTY3JvbGxZKTtcbiAgICB9XG5cbiAgICBzZXRJZ25vcmVTY3JvbGxFdmVudCh0cnVlKTtcbiAgfTtcblxuICB2YXIgaGFuZGxlU2VsZWN0ZWRUYXNrID0gZnVuY3Rpb24gaGFuZGxlU2VsZWN0ZWRUYXNrKHRhc2tJZCkge1xuICAgIHZhciBuZXdTZWxlY3RlZFRhc2sgPSBiYXJUYXNrcy5maW5kKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gdC5pZCA9PT0gdGFza0lkO1xuICAgIH0pO1xuICAgIHZhciBvbGRTZWxlY3RlZFRhc2sgPSBiYXJUYXNrcy5maW5kKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gISFzZWxlY3RlZFRhc2sgJiYgdC5pZCA9PT0gc2VsZWN0ZWRUYXNrLmlkO1xuICAgIH0pO1xuXG4gICAgaWYgKG9uU2VsZWN0KSB7XG4gICAgICBpZiAob2xkU2VsZWN0ZWRUYXNrKSB7XG4gICAgICAgIG9uU2VsZWN0KG9sZFNlbGVjdGVkVGFzaywgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAobmV3U2VsZWN0ZWRUYXNrKSB7XG4gICAgICAgIG9uU2VsZWN0KG5ld1NlbGVjdGVkVGFzaywgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0U2VsZWN0ZWRUYXNrKG5ld1NlbGVjdGVkVGFzayk7XG4gIH07XG5cbiAgdmFyIGhhbmRsZUV4cGFuZGVyQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVFeHBhbmRlckNsaWNrKHRhc2spIHtcbiAgICBpZiAob25FeHBhbmRlckNsaWNrICYmIHRhc2suaGlkZUNoaWxkcmVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9uRXhwYW5kZXJDbGljayhfZXh0ZW5kcyh7fSwgdGFzaywge1xuICAgICAgICBoaWRlQ2hpbGRyZW46ICF0YXNrLmhpZGVDaGlsZHJlblxuICAgICAgfSkpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZ3JpZFByb3BzID0ge1xuICAgIGNvbHVtbldpZHRoOiBjb2x1bW5XaWR0aCxcbiAgICBzdmdXaWR0aDogc3ZnV2lkdGgsXG4gICAgdGFza3M6IHRhc2tzLFxuICAgIHJvd0hlaWdodDogcm93SGVpZ2h0LFxuICAgIGRhdGVzOiBkYXRlU2V0dXAuZGF0ZXMsXG4gICAgdG9kYXlDb2xvcjogdG9kYXlDb2xvcixcbiAgICBydGw6IHJ0bFxuICB9O1xuICB2YXIgY2FsZW5kYXJQcm9wcyA9IHtcbiAgICBkYXRlU2V0dXA6IGRhdGVTZXR1cCxcbiAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICB2aWV3TW9kZTogdmlld01vZGUsXG4gICAgaGVhZGVySGVpZ2h0OiBoZWFkZXJIZWlnaHQsXG4gICAgY29sdW1uV2lkdGg6IGNvbHVtbldpZHRoLFxuICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgZm9udFNpemU6IGZvbnRTaXplLFxuICAgIHJ0bDogcnRsXG4gIH07XG4gIHZhciBiYXJQcm9wcyA9IHtcbiAgICB0YXNrczogYmFyVGFza3MsXG4gICAgZGF0ZXM6IGRhdGVTZXR1cC5kYXRlcyxcbiAgICBnYW50dEV2ZW50OiBnYW50dEV2ZW50LFxuICAgIHNlbGVjdGVkVGFzazogc2VsZWN0ZWRUYXNrLFxuICAgIHJvd0hlaWdodDogcm93SGVpZ2h0LFxuICAgIHRhc2tIZWlnaHQ6IHRhc2tIZWlnaHQsXG4gICAgY29sdW1uV2lkdGg6IGNvbHVtbldpZHRoLFxuICAgIGFycm93Q29sb3I6IGFycm93Q29sb3IsXG4gICAgdGltZVN0ZXA6IHRpbWVTdGVwLFxuICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgZm9udFNpemU6IGZvbnRTaXplLFxuICAgIGFycm93SW5kZW50OiBhcnJvd0luZGVudCxcbiAgICBzdmdXaWR0aDogc3ZnV2lkdGgsXG4gICAgcnRsOiBydGwsXG4gICAgc2V0R2FudHRFdmVudDogc2V0R2FudHRFdmVudCxcbiAgICBzZXRGYWlsZWRUYXNrOiBzZXRGYWlsZWRUYXNrLFxuICAgIHNldFNlbGVjdGVkVGFzazogaGFuZGxlU2VsZWN0ZWRUYXNrLFxuICAgIG9uRGF0ZUNoYW5nZTogb25EYXRlQ2hhbmdlLFxuICAgIG9uUHJvZ3Jlc3NDaGFuZ2U6IG9uUHJvZ3Jlc3NDaGFuZ2UsXG4gICAgb25Eb3VibGVDbGljazogb25Eb3VibGVDbGljayxcbiAgICBvbkNsaWNrOiBvbkNsaWNrLFxuICAgIG9uRGVsZXRlOiBvbkRlbGV0ZVxuICB9O1xuICB2YXIgdGFibGVQcm9wcyA9IHtcbiAgICByb3dIZWlnaHQ6IHJvd0hlaWdodCxcbiAgICByb3dXaWR0aDogbGlzdENlbGxXaWR0aCxcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5LFxuICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICB0YXNrczogYmFyVGFza3MsXG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgaGVhZGVySGVpZ2h0OiBoZWFkZXJIZWlnaHQsXG4gICAgc2Nyb2xsWTogc2Nyb2xsWSxcbiAgICBnYW50dEhlaWdodDogZ2FudHRIZWlnaHQsXG4gICAgaG9yaXpvbnRhbENvbnRhaW5lckNsYXNzOiBzdHlsZXMkOS5ob3Jpem9udGFsQ29udGFpbmVyLFxuICAgIHNlbGVjdGVkVGFzazogc2VsZWN0ZWRUYXNrLFxuICAgIHRhc2tMaXN0UmVmOiB0YXNrTGlzdFJlZixcbiAgICBzZXRTZWxlY3RlZFRhc2s6IGhhbmRsZVNlbGVjdGVkVGFzayxcbiAgICBvbkV4cGFuZGVyQ2xpY2s6IGhhbmRsZUV4cGFuZGVyQ2xpY2ssXG4gICAgVGFza0xpc3RIZWFkZXI6IFRhc2tMaXN0SGVhZGVyLFxuICAgIFRhc2tMaXN0VGFibGU6IFRhc2tMaXN0VGFibGVcbiAgfTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkOS53cmFwcGVyLFxuICAgIG9uS2V5RG93bjogaGFuZGxlS2V5RG93bixcbiAgICB0YWJJbmRleDogMCxcbiAgICByZWY6IHdyYXBwZXJSZWZcbiAgfSwgbGlzdENlbGxXaWR0aCAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KFRhc2tMaXN0LCBPYmplY3QuYXNzaWduKHt9LCB0YWJsZVByb3BzKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFza0dhbnR0LCB7XG4gICAgZ3JpZFByb3BzOiBncmlkUHJvcHMsXG4gICAgY2FsZW5kYXJQcm9wczogY2FsZW5kYXJQcm9wcyxcbiAgICBiYXJQcm9wczogYmFyUHJvcHMsXG4gICAgZ2FudHRIZWlnaHQ6IGdhbnR0SGVpZ2h0LFxuICAgIHNjcm9sbFk6IHNjcm9sbFksXG4gICAgc2Nyb2xsWDogc2Nyb2xsWFxuICB9KSwgZ2FudHRFdmVudC5jaGFuZ2VkVGFzayAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHtcbiAgICBhcnJvd0luZGVudDogYXJyb3dJbmRlbnQsXG4gICAgcm93SGVpZ2h0OiByb3dIZWlnaHQsXG4gICAgc3ZnQ29udGFpbmVySGVpZ2h0OiBzdmdDb250YWluZXJIZWlnaHQsXG4gICAgc3ZnQ29udGFpbmVyV2lkdGg6IHN2Z0NvbnRhaW5lcldpZHRoLFxuICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgZm9udFNpemU6IGZvbnRTaXplLFxuICAgIHNjcm9sbFg6IHNjcm9sbFgsXG4gICAgc2Nyb2xsWTogc2Nyb2xsWSxcbiAgICB0YXNrOiBnYW50dEV2ZW50LmNoYW5nZWRUYXNrLFxuICAgIGhlYWRlckhlaWdodDogaGVhZGVySGVpZ2h0LFxuICAgIHRhc2tMaXN0V2lkdGg6IHRhc2tMaXN0V2lkdGgsXG4gICAgVG9vbHRpcENvbnRlbnQ6IFRvb2x0aXBDb250ZW50LFxuICAgIHJ0bDogcnRsLFxuICAgIHN2Z1dpZHRoOiBzdmdXaWR0aFxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChWZXJ0aWNhbFNjcm9sbCwge1xuICAgIGdhbnR0RnVsbEhlaWdodDogZ2FudHRGdWxsSGVpZ2h0LFxuICAgIGdhbnR0SGVpZ2h0OiBnYW50dEhlaWdodCxcbiAgICBoZWFkZXJIZWlnaHQ6IGhlYWRlckhlaWdodCxcbiAgICBzY3JvbGw6IHNjcm9sbFksXG4gICAgb25TY3JvbGw6IGhhbmRsZVNjcm9sbFksXG4gICAgcnRsOiBydGxcbiAgfSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KEhvcml6b250YWxTY3JvbGwsIHtcbiAgICBzdmdXaWR0aDogc3ZnV2lkdGgsXG4gICAgdGFza0xpc3RXaWR0aDogdGFza0xpc3RXaWR0aCxcbiAgICBzY3JvbGw6IHNjcm9sbFgsXG4gICAgcnRsOiBydGwsXG4gICAgb25TY3JvbGw6IGhhbmRsZVNjcm9sbFhcbiAgfSkpO1xufTtcblxuZXhwb3J0IHsgR2FudHQsIFZpZXdNb2RlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tb2Rlcm4uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/gantt-task-react/dist/index.modern.js\n");

/***/ })

};
;